(function(){"use strict";var a={7282:function(a,e,o){var t=o(4373),i=o(5130),s=o(6768);const r={class:"body"};function n(a,e,o,t,i,n){const l=(0,s.g2)("NavbarPublicoComponent"),c=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",r,["/"===a.$route.path||"/login"===a.$route.path||"/contacto"===a.$route.path||"/registrar"===a.$route.path||/^\/noticias(\/.*)?$/.test(a.$route.path)?((0,s.uX)(),(0,s.Wv)(l,{key:0})):(0,s.Q3)("",!0),(0,s.bF)(c)])}o(8077);const l={class:"barra-navegacion"},c={class:"ancho-pag fondo-nav c-white"};function d(a,e,o,t,i,r){const n=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("nav",l,[(0,s.Lk)("div",c,[e[2]||(e[2]=(0,s.Lk)("a",{href:"/",class:"flex"},[(0,s.Lk)("img",{src:"/recursos/logomds.png",class:"mv-auto img-logo",alt:""}),(0,s.Lk)("h1",{class:"mb-0 p-3 titulo-navbar"},"Tarjetas Sociales")],-1)),i.logueado?"/"==a.$route.path?((0,s.uX)(),(0,s.CE)("button",{key:1,class:"btn btn-ingresar",onClick:e[0]||(e[0]=(...a)=>r.redireccionarInicio&&r.redireccionarInicio(...a))},"Inicio")):(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(n,{key:0,class:"btn-ingresar",to:"/login"},{default:(0,s.k6)((()=>e[1]||(e[1]=[(0,s.eW)("Iniciar sesión")]))),_:1}))])])])}o(4114);var u=o(1387),m=o(4232),p=o.p+"img/ministerio-banner.b61e6216.jpg";const f={class:"ancho-pag"},h={key:0,class:"noticias"},b={class:"noticia-destacada"},k=["src"],v={class:"noticia-titulo destacada"},g={class:"flex-column"},L={class:"noticias-scroll"},j=["src"],_={class:"noticia-titulo"},y={class:"ancho-pag bg-dark mt-4"},C={class:"ts-descripcion"},A={class:"ct-botones"},E={class:"flex-botones"};function S(a,e,o,t,i,r){const n=(0,s.g2)("router-link"),l=(0,s.g2)("PieComponent");return(0,s.uX)(),(0,s.CE)("div",null,[e[4]||(e[4]=(0,s.Lk)("div",{class:"banner"},[(0,s.Lk)("img",{class:"img-banner",src:p,alt:""})],-1)),(0,s.Lk)("div",f,[i.noticias.length>0?((0,s.uX)(),(0,s.CE)("section",h,[(0,s.Lk)("div",b,[i.noticias.length>0?((0,s.uX)(),(0,s.Wv)(n,{key:0,to:"/noticias/"+i.noticias[0].id},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{class:"noticia-imagen-destacada",src:"http://localhost:3000"+i.noticias[0].imagenes[0],alt:""},null,8,k),(0,s.Lk)("div",v,(0,m.v_)(i.noticias[0].titulo),1)])),_:1},8,["to"])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",g,[(0,s.Lk)("div",L,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.noticias.slice(1),(a=>((0,s.uX)(),(0,s.Wv)(n,{to:"/noticias/"+a.id,key:a.id,class:"noticia-cuadrada"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{class:"noticia-imagen",src:"http://localhost:3000"+a.imagenes[0],alt:""},null,8,j),(0,s.Lk)("div",_,(0,m.v_)(a.titulo),1)])),_:2},1032,["to"])))),128))]),(0,s.bF)(n,{class:"btn-css-underline text-top mt-2",to:"/noticias"},{default:(0,s.k6)((()=>e[0]||(e[0]=[(0,s.eW)("Ver Más")]))),_:1})])])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",y,[(0,s.Lk)("div",C,[e[2]||(e[2]=(0,s.Lk)("h3",null,[(0,s.Lk)("strong",null,"Sobre el programa...")],-1)),e[3]||(e[3]=(0,s.eW)(" El programa provincial de Tarjetas Sociales está diseñado para asistir a personas en situación de vulnerabilidad estructural, quienes no cuentan con ingresos por trabajo activo, jubilación, pensión ni reciben la Tarjeta Alimentar Nacional. Este programa proporciona fondos destinados exclusivamente a la compra de alimentos de primera necesidad. ")),(0,s.Lk)("div",A,[(0,s.Lk)("div",E,[(0,s.bF)(n,{class:"white btn-css",to:"/requisitos"},{default:(0,s.k6)((()=>e[1]||(e[1]=[(0,s.eW)("VER REQUISITOS")]))),_:1})])])])]),(0,s.bF)(l)])}var w=o.p+"img/logo-gobierno.8a72dd30.png";const I={class:"footer"},F={class:"ancho-pag container-footer"},N={class:"footer-content"};function D(a,e,o,t,i,r){const n=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("footer",I,[(0,s.Lk)("div",F,[e[2]||(e[2]=(0,s.Fv)('<div class="footer-header" data-v-ce69fde2><img class="img-footer" src="'+w+'" alt="" data-v-ce69fde2></div><div class="footer-content" data-v-ce69fde2><a class="link-pie" href="http://mdssde.gob.ar" target="__blank" data-v-ce69fde2>PÁGINA MINISTERIO</a><a href="https://www.facebook.com/profile.php?id=61552046130284" class="link-pie" data-v-ce69fde2>FACEBOOK</a></div>',2)),(0,s.Lk)("div",N,[(0,s.bF)(n,{class:"link-pie",to:"/contacto"},{default:(0,s.k6)((()=>e[0]||(e[0]=[(0,s.eW)("CONTACTO")]))),_:1}),e[1]||(e[1]=(0,s.Lk)("a",{href:"https://maps.app.goo.gl/XADPbVnJhzR3pyNd7",class:"link-pie",target:"__blank"},"DIRECCIÓN: SÁENZ PEÑA N° 340",-1))])])])}var x={},M=o(1241);const T=(0,M.A)(x,[["render",D],["__scopeId","data-v-ce69fde2"]]);var P=T,U={components:{PieComponent:P},data(){return{noticias:[]}},methods:{async fetchNoticias(){try{const a=await t.A.get("/noticias");this.noticias=a.data}catch(a){console.log("No se pudo obtener las noticias. ",a)}}},mounted(){this.fetchNoticias()}};const X=(0,M.A)(U,[["render",S],["__scopeId","data-v-206ba190"]]);var V=X;const O={key:0,class:"pantalla-carga text-center"},$={key:1,class:"mensaje-container-fondo"},q={class:"mensaje-container"},J={class:"mensaje"},W={class:"total text-center"},R={class:"form-container"},Q={class:"row"},B={class:"col-md-12"},z={class:"row"},G={class:"col-md-12"},H={class:"col-md-12 mt-4"};function K(a,e,o,t,r,n){const l=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",null,[r.cargando?((0,s.uX)(),(0,s.CE)("div",O,e[5]||(e[5]=[(0,s.Lk)("div",{class:"logo-carga"},[(0,s.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,s.Lk)("div",{class:"texto-carga"},"Ingresando")],-1)]))):(0,s.Q3)("",!0),r.mensajePopup?((0,s.uX)(),(0,s.CE)("div",$,[(0,s.Lk)("div",q,[(0,s.Lk)("span",J,(0,m.v_)(r.mensaje),1),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[0]||(e[0]=a=>{this.mensajePopup=!1,this.mensaje=""})},"Ok")])])):(0,s.Q3)("",!0),(0,s.Lk)("div",W,[(0,s.Lk)("form",{class:"flex-container",onSubmit:e[4]||(e[4]=(0,i.D$)(((...a)=>n.login&&n.login(...a)),["prevent"]))},[e[9]||(e[9]=(0,s.Lk)("h2",{class:"titulo mt-4"},"Iniciar Sesión",-1)),(0,s.Lk)("div",R,[(0,s.Lk)("div",Q,[(0,s.Lk)("div",B,[e[6]||(e[6]=(0,s.Lk)("label",{class:"form-label",for:"usuario"},"Usuario",-1)),(0,s.bo)((0,s.Lk)("input",{class:"form-control",type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>r.usuario.usuario=a),required:"",onInput:e[2]||(e[2]=(...a)=>n.restrictInput&&n.restrictInput(...a))},null,544),[[i.Jo,r.usuario.usuario]])])]),(0,s.Lk)("div",z,[(0,s.Lk)("div",G,[e[7]||(e[7]=(0,s.Lk)("label",{class:"form-label",for:"contraseña"},"Contraseña",-1)),(0,s.bo)((0,s.Lk)("input",{class:"form-control",type:"password","onUpdate:modelValue":e[3]||(e[3]=a=>r.usuario.contraseña=a),required:""},null,512),[[i.Jo,r.usuario.contraseña]])])])]),e[10]||(e[10]=(0,s.Lk)("div",{class:"btn-container"},[(0,s.Lk)("button",{type:"submit",class:"btn btn-entrar"},"Entrar")],-1)),(0,s.Lk)("div",H,[(0,s.bF)(l,{to:"/registrar"},{default:(0,s.k6)((()=>e[8]||(e[8]=[(0,s.eW)("Crear cuenta")]))),_:1})])],32)])])}var Y=o(595);const Z=(0,Y.A)();var aa=Z,ea={data(){return{mensajePopup:!1,mensaje:"",usuario:{usuario:"","contraseña":"",rol:""},cargando:!1}},methods:{restrictInput(a){const e=a.target.value,o=/[\s!@#$%^&*()_+=[\]{};':"\\|,<>?`´¨~¡/°¬¿]/g;o.test(e)&&(this.usuario.usuario=this.usuario.usuario.substring(0,this.usuario.usuario.length-1))},async login(){let a;this.cargando=!0;try{a=await t.A.post("/auth/login",this.usuario);const e={usuario:this.usuario.usuario,dni:a.data.dni,rol:a.data.rol};switch(localStorage.setItem("user",JSON.stringify(e)),aa.emit("usuarioLogueado"),e.rol){case 0:fn.push("/beneficiario");break;case 1:fn.push("/empleado");break;case 2:fn.push("/admin");break}}catch(e){this.mostrarMensaje(e.response?.data?.message||"Error al iniciar sesión")}finally{this.cargando=!1}},mostrarMensaje(a){this.mensaje=a,this.mensajePopup=!0}}};const oa=(0,M.A)(ea,[["render",K],["__scopeId","data-v-0975c95d"]]);var ta=oa;const ia={key:0,class:"pantalla-carga text-center"},sa={key:1,class:"mensaje-container-fondo"},ra={class:"mensaje-container"},na={class:"mensaje"},la={class:"total text-center"},ca={class:"form-container"},da={class:"row"},ua={class:"col-md-6"},ma={class:"col-md-6"},pa={class:"row"},fa={class:"col-md-6"},ha={class:"row"},ba={class:"col-md-6"},ka={class:"col-md-6"},va={class:"col-md-12 mt-4"};function ga(a,e,o,t,r,n){const l=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",null,[r.cargando?((0,s.uX)(),(0,s.CE)("div",ia,e[8]||(e[8]=[(0,s.Lk)("div",{class:"logo-carga"},[(0,s.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:"Logo"}),(0,s.Lk)("div",{class:"texto-carga"},"Registrando...")],-1)]))):(0,s.Q3)("",!0),r.mensajePopup?((0,s.uX)(),(0,s.CE)("div",sa,[(0,s.Lk)("div",ra,[(0,s.Lk)("span",na,(0,m.v_)(r.mensaje),1),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[0]||(e[0]=a=>{this.mensajePopup=!1,this.mensaje=""})},"Ok")])])):(0,s.Q3)("",!0),(0,s.Lk)("div",la,[(0,s.Lk)("form",{onSubmit:e[7]||(e[7]=(0,i.D$)(((...a)=>n.registrar&&n.registrar(...a)),["prevent"])),class:"flex-container"},[e[15]||(e[15]=(0,s.Lk)("h2",{class:"titulo mt-4"},"Registro de Usuario",-1)),(0,s.Lk)("div",ca,[(0,s.Lk)("div",da,[(0,s.Lk)("div",ua,[e[9]||(e[9]=(0,s.Lk)("label",{class:"form-label",for:"usuario"},"Nombre de Usuario",-1)),(0,s.bo)((0,s.Lk)("input",{class:"form-control",id:"usuario",type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>r.usuario.usuario=a),required:"",onInput:e[2]||(e[2]=(...a)=>n.restrictInput&&n.restrictInput(...a))},null,544),[[i.Jo,r.usuario.usuario]])]),(0,s.Lk)("div",ma,[e[10]||(e[10]=(0,s.Lk)("label",{class:"form-label",for:"correo"},"Correo",-1)),(0,s.bo)((0,s.Lk)("input",{class:"form-control",id:"correo",type:"email","onUpdate:modelValue":e[3]||(e[3]=a=>r.usuario.correo=a)},null,512),[[i.Jo,r.usuario.correo]])])]),(0,s.Lk)("div",pa,[(0,s.Lk)("div",fa,[e[11]||(e[11]=(0,s.Lk)("label",{for:"dni",class:"form-label"},"DNI",-1)),(0,s.bo)((0,s.Lk)("input",{class:"form-control",id:"dni",type:"number","onUpdate:modelValue":e[4]||(e[4]=a=>r.usuario.dni=a)},null,512),[[i.Jo,r.usuario.dni]])])]),(0,s.Lk)("div",ha,[(0,s.Lk)("div",ba,[e[12]||(e[12]=(0,s.Lk)("label",{class:"form-label",for:"contraseña"},"Contraseña",-1)),(0,s.bo)((0,s.Lk)("input",{class:"form-control",id:"contraseña",type:"password","onUpdate:modelValue":e[5]||(e[5]=a=>r.usuario.contraseña=a),required:""},null,512),[[i.Jo,r.usuario.contraseña]])]),(0,s.Lk)("div",ka,[e[13]||(e[13]=(0,s.Lk)("label",{class:"form-label",for:"contraseña2"},"Repetir Contraseña",-1)),(0,s.bo)((0,s.Lk)("input",{class:"form-control",id:"contraseña2",type:"password","onUpdate:modelValue":e[6]||(e[6]=a=>r.contraseña_repetida=a),required:""},null,512),[[i.Jo,r.contraseña_repetida]])])])]),e[16]||(e[16]=(0,s.Lk)("div",{class:"btn-container"},[(0,s.Lk)("button",{type:"submit",class:"btn-mensaje"},"Registrar")],-1)),(0,s.Lk)("div",va,[(0,s.bF)(l,{to:"/login"},{default:(0,s.k6)((()=>e[14]||(e[14]=[(0,s.eW)("¿Ya tenés cuenta? Ingresá")]))),_:1})])],32)])])}var La={data(){return{mensajePopup:!1,mensaje:"","contraseña_repetida":"",usuario:{correo:"",usuario:"","contraseña":"",dni:""},cargando:!1}},methods:{restrictInput(a){const e=a.target.value,o=/[\s!@#$%^&*()_+=[\]{};':"\\|,<>?`´¨~¡/°¬¿]/g;o.test(e)&&(this.usuario.usuario=this.usuario.usuario.substring(0,this.usuario.usuario.length-1))},async registrar(){if(this.usuario.contraseña==this.contraseña_repetida){this.cargando=!0;try{await t.A.post("/auth/register",this.usuario),fn.push("/login")}catch(a){this.mostrarMensaje(a.response.data.message)}finally{this.cargando=!1}}else this.mostrarMensaje("Las contraseñas no coinciden.")},mostrarMensaje(a){this.mensaje=a,this.mensajePopup=!0}}};const ja=(0,M.A)(La,[["render",ga],["__scopeId","data-v-6e2c1a0e"]]);var _a=ja;const ya={class:"ancho-pag mt-4"},Ca={class:"text-center"};function Aa(a,e,o,t,i,r){const n=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("div",ya,[e[1]||(e[1]=(0,s.Fv)('<h3 class="text-center"><strong>Requisitos</strong></h3><p>Aquellas personas que busquen adherirse al programa de Tarjetas Sociales deberán:</p><ul><li>No contar con ingresos por trabajo activo.</li><li>No contar con ingresos por jubilación.</li><li>No contar con ingresos por pensión.</li><li>No contar con la Tarjeta Alimentar Nacional.</li></ul><p>Luego de cumplir con esos requerimientos, deberán contar con:</p><ol><li>Fotografía legible del DNI (anverso y reverso).</li><li>Fotografía o PDF del Historial médico.</li></ol>',5)),(0,s.Lk)("div",Ca,[(0,s.bF)(n,{class:"btn-css c-black",to:"/registrar"},{default:(0,s.k6)((()=>e[0]||(e[0]=[(0,s.Lk)("strong",null,"SOLICITAR TARJETA",-1)]))),_:1})])])])}var Ea={components:{}};const Sa=(0,M.A)(Ea,[["render",Aa]]);var wa=Sa;const Ia={class:"flex-inline"},Fa={key:0,class:"pantalla-carga text-center"};function Na(a,e,o,t,i,r){const n=(0,s.g2)("SidebarBeneficiarioComponent"),l=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",Ia,[i.cargando?((0,s.uX)(),(0,s.CE)("div",Fa,e[0]||(e[0]=[(0,s.Lk)("div",{class:"logo-carga"},[(0,s.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:"Logo"}),(0,s.Lk)("div",{class:"texto-carga c-black"},"Cargando...")],-1)]))):(0,s.Q3)("",!0),(0,s.bF)(n,{"tiene-tarjeta":i.tieneTarjeta},null,8,["tiene-tarjeta"]),(0,s.bF)(l,{class:"vista","tiene-tarjeta":i.tieneTarjeta},null,8,["tiene-tarjeta"])])}const Da={key:0,class:"mensaje-container-fondo"},xa={class:"mensaje-container"},Ma={class:"modal-botones"},Ta={class:"contenedor"},Pa={class:"contenedor-botones"},Ua={key:0},Xa={key:1};function Va(a,e,o,t,i,r){const n=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",null,[i.mostrarModal?((0,s.uX)(),(0,s.CE)("div",Da,[(0,s.Lk)("div",xa,[e[3]||(e[3]=(0,s.Lk)("span",{class:"mensaje"},"¿Cerrar sesión?",-1)),(0,s.Lk)("div",Ma,[(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[0]||(e[0]=a=>this.mostrarModal=!1)},"No"),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[1]||(e[1]=(...a)=>r.cerrarSesion&&r.cerrarSesion(...a))},"Si")])])])):(0,s.Q3)("",!0),(0,s.Lk)("div",Ta,[(0,s.Lk)("div",Pa,[e[7]||(e[7]=(0,s.Lk)("a",{href:"/beneficiario",class:"sidebar-header"},[(0,s.Lk)("img",{src:"/recursos/logomds.png",class:"mv-auto img-logo",alt:""}),(0,s.Lk)("h4",{class:"white text-center"},[(0,s.eW)("Tarjetas"),(0,s.Lk)("br"),(0,s.eW)("Sociales")])],-1)),e[8]||(e[8]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",null,[(0,s.bF)(n,{class:(0,m.C4)(["item-btn",{active:"/beneficiario"==a.$route.path}]),to:"/beneficiario"},{default:(0,s.k6)((()=>e[4]||(e[4]=[(0,s.eW)("Inicio")]))),_:1},8,["class"])]),o.tieneTarjeta&&"PENDIENTE"!=o.tieneTarjeta?((0,s.uX)(),(0,s.CE)("div",Ua,[(0,s.bF)(n,{class:(0,m.C4)(["item-btn",{active:"/beneficiario/tarjeta"===a.$route.path}]),to:"/beneficiario/tarjeta"},{default:(0,s.k6)((()=>e[5]||(e[5]=[(0,s.eW)("Mi Tarjeta")]))),_:1},8,["class"])])):((0,s.uX)(),(0,s.CE)("div",Xa,[(0,s.bF)(n,{class:(0,m.C4)(["item-btn",{active:"/beneficiario/solicitud"===a.$route.path}]),to:"/beneficiario/solicitud"},{default:(0,s.k6)((()=>e[6]||(e[6]=[(0,s.eW)("Solicitud")]))),_:1},8,["class"])])),(0,s.Lk)("button",{class:"item-btn mt-4",onClick:e[2]||(e[2]=(...a)=>r.cerrarSesionModal&&r.cerrarSesionModal(...a))},"Cerrar Sesión")])])])}var Oa={data(){return{mostrarModal:!1}},props:{tieneTarjeta:{type:String,default:null}},methods:{cerrarSesionModal(){this.mostrarModal=!0},cerrarSesion(){this.mostrarModal=!1,localStorage.clear(),aa.emit("usuarioDeslogueado"),fn.push("/")}}};const $a=(0,M.A)(Oa,[["render",Va],["__scopeId","data-v-6f74a054"]]);var qa=$a,Ja={components:{SidebarBeneficiarioComponent:qa},data(){return{cargando:!1,tieneTarjeta:null}},methods:{async verificarTarjeta(){this.cargando=!0;const a=JSON.parse(localStorage.getItem("user")).dni;try{const e=await t.A.get("/beneficiarios/verificarTarjeta",{params:{dni:a}});this.tieneTarjeta=e.data.estado,localStorage.setItem("tieneTarjeta",this.tieneTarjeta)}catch(e){console.log("No tiene tarjeta.")}finally{this.cargando=!1}}},mounted(){this.verificarTarjeta()}};const Wa=(0,M.A)(Ja,[["render",Na],["__scopeId","data-v-535652f4"]]);var Ra=Wa;const Qa={class:"vista"},Ba={class:"container"},za={class:"mt-2"},Ga={class:"tarjetas-inicio"};function Ha(a,e,o,t,i,r){return(0,s.uX)(),(0,s.CE)("div",Qa,[(0,s.Lk)("div",Ba,[(0,s.Lk)("h3",za,"Bienvenid@, "+(0,m.v_)(i.usuario.usuario?.toUpperCase()),1),e[4]||(e[4]=(0,s.Lk)("p",{class:"lead"},"Desde aquí podés acceder a las principales funciones de gestión del sistema.",-1)),(0,s.Lk)("div",Ga,[o.tieneTarjeta&&"PENDIENTE"!=o.tieneTarjeta?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"card acceso",onClick:e[0]||(e[0]=e=>a.$router.push("/beneficiario/tarjeta"))},e[2]||(e[2]=[(0,s.Lk)("h5",null,"Mi Tarjeta",-1),(0,s.Lk)("p",null,"Ver información sobre mi Tarjeta Social.",-1)]))):((0,s.uX)(),(0,s.CE)("div",{key:1,class:"card acceso",onClick:e[1]||(e[1]=e=>a.$router.push("/beneficiario/solicitud"))},e[3]||(e[3]=[(0,s.Lk)("h5",null,"Solicitud",-1),(0,s.Lk)("p",null,"Solicitar o ver el estado de la solicitud de Tarjeta Social.",-1)])))])])])}var Ka={data(){return{usuario:""}},props:{tieneTarjeta:{type:String,default:null}},mounted(){this.usuario=JSON.parse(localStorage.getItem("user"))}};const Ya=(0,M.A)(Ka,[["render",Ha],["__scopeId","data-v-6699d44a"]]);var Za=Ya;const ae={class:"vista"},ee={key:0,class:"pantalla-carga text-center"},oe={key:1,class:"mensaje-container-fondo"},te={class:"mensaje-container"},ie={class:"mensaje"},se={class:"container",id:"datosTarjeta"},re={class:"tarjeta-grid"},ne={class:"dato"},le={class:"valor"},ce={class:"dato"},de={class:"valor"},ue={class:"dato"},me={class:"valor"},pe={class:"dato"},fe={class:"valor"},he={class:"dato"},be={class:"valor"},ke={class:"dato"},ve={class:"dato"},ge={class:"valor"},Le={key:0,class:"historial-container"},je={class:"historial"},_e={class:"acciones"};function ye(a,e,o,t,i,r){return(0,s.uX)(),(0,s.CE)("div",ae,[i.cargando?((0,s.uX)(),(0,s.CE)("div",ee,e[2]||(e[2]=[(0,s.Lk)("div",{class:"logo-carga"},[(0,s.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:"Logo"}),(0,s.Lk)("div",{class:"texto-carga"},"Cargando...")],-1)]))):(0,s.Q3)("",!0),i.mensajePopup?((0,s.uX)(),(0,s.CE)("div",oe,[(0,s.Lk)("div",te,[(0,s.Lk)("span",ie,(0,m.v_)(i.mensaje),1),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[0]||(e[0]=a=>{this.mensajePopup=!1,this.mensaje=""})}," Ok ")])])):(0,s.Q3)("",!0),(0,s.Lk)("div",se,[e[11]||(e[11]=(0,s.Lk)("h3",{class:"mt-2"},"Datos de Tarjeta Social",-1)),(0,s.Lk)("div",re,[(0,s.Lk)("div",ne,[e[3]||(e[3]=(0,s.Lk)("span",{class:"label"},"DNI",-1)),(0,s.Lk)("span",le,(0,m.v_)(i.tarjeta.dni),1)]),(0,s.Lk)("div",ce,[e[4]||(e[4]=(0,s.Lk)("span",{class:"label"},"Número de Cuenta",-1)),(0,s.Lk)("span",de,(0,m.v_)(i.tarjeta.num_cuenta||"####-####-####-####"),1)]),(0,s.Lk)("div",ue,[e[5]||(e[5]=(0,s.Lk)("span",{class:"label"},"Número de Tarjeta",-1)),(0,s.Lk)("span",me,(0,m.v_)(i.tarjeta.num_tarjeta||"####-####-####-####"),1)]),(0,s.Lk)("div",pe,[e[6]||(e[6]=(0,s.Lk)("span",{class:"label"},"Fecha de Registro",-1)),(0,s.Lk)("span",fe,(0,m.v_)(i.tarjeta.fecha_registro),1)]),(0,s.Lk)("div",he,[e[7]||(e[7]=(0,s.Lk)("span",{class:"label"},"Fecha de Modificación",-1)),(0,s.Lk)("span",be,(0,m.v_)(i.tarjeta.fecha_modificacion),1)]),(0,s.Lk)("div",ke,[e[8]||(e[8]=(0,s.Lk)("span",{class:"label"},"Estado",-1)),(0,s.Lk)("span",{class:(0,m.C4)(["valor estado","estado-"+i.tarjeta.estado.toLowerCase()])},(0,m.v_)(i.tarjeta.estado),3)]),(0,s.Lk)("div",ve,[e[9]||(e[9]=(0,s.Lk)("span",{class:"label"},"Importe Acreditado",-1)),(0,s.Lk)("span",ge,(0,m.v_)(i.tarjeta.importe_acreditado?"$"+i.tarjeta.importe_acreditado:"####"),1)])]),i.tarjeta.historias.length>0?((0,s.uX)(),(0,s.CE)("div",Le,[e[10]||(e[10]=(0,s.Lk)("h3",{class:"subtitulo"},"Historial",-1)),(0,s.Lk)("div",je,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.tarjeta.historias,((a,e)=>((0,s.uX)(),(0,s.CE)("div",{key:e,class:"historia-item"},[(0,s.Lk)("strong",null,(0,m.v_)(a.fecha+" - "),1),(0,s.Lk)("span",null,(0,m.v_)(a.observaciones),1)])))),128))])])):(0,s.Q3)("",!0),(0,s.Lk)("div",_e,[(0,s.Lk)("button",{type:"button",class:"btn-imprimir",onClick:e[1]||(e[1]=(...a)=>r.imprimir&&r.imprimir(...a))},"Imprimir")])])])}var Ce=o(1749),Ae={data(){return{cargando:!1,mensajePopup:!1,mensaje:"",tarjeta:{dni:"",num_cuenta:"",num_tarjeta:"",fecha_registro:"",estado:"",fecha_modificacion:"",importe_acreditado:"",observaciones:"",historias:[]}}},methods:{async fetchTarjeta(){this.cargando=!0;try{const a=await t.A.get("tarjetas/getDatos",{params:{dni:JSON.parse(localStorage.getItem("user")).dni}});this.tarjeta=a.data}finally{this.cargando=!1}},async imprimir(){const a=new Ce.Ay,e=8;let o=20;const t=(t,i)=>{a.setFont("Helvetica","bold"),a.text(`${t}:`,20,o),a.setFont("Helvetica","normal"),a.text(`${i||"-"}`,80,o),a.setFontSize(11),o+=e},i=(e,o,t=11)=>{a.setFontSize(t),a.setFont("Helvetica","bold");const i=a.getStringUnitWidth(e)*t/a.internal.scaleFactor,s=(a.internal.pageSize.getWidth()-i)/2;a.text(e,s,o)},s=a=>fetch(a).then((a=>a.blob())).then((a=>new Promise((e=>{const o=new FileReader;o.onloadend=()=>e(o.result),o.readAsDataURL(a)})))),r=await s("/recursos/icono-mds-negro.png"),n=await s("/recursos/icono-gobierno.png");a.addImage(r,"PNG",30,10,60,15),a.addImage(n,"PNG",150,10,15,15),a.setFont("Helvetica","normal"),a.setFontSize(11),a.text("SANTIAGO DEL ESTERO",160,35,{align:"center"});const l=this.capitalize((new Date).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"}));a.text(l,160,40,{align:"center"}),o=50,i("DATOS DE TARJETA SOCIAL",o),o+=2*e,t("DNI",this.tarjeta.dni),t("Número de Cuenta",this.tarjeta.num_cuenta||"####-####-####-####"),t("Número de Tarjeta",this.tarjeta.num_tarjeta||"####-####-####-####"),t("Fecha de Registro",this.tarjeta.fecha_registro),t("Fecha de Modificación",this.tarjeta.fecha_modificacion),t("Estado",this.tarjeta.estado),t("Importe Acreditado",this.tarjeta.importe_acreditado?"$"+this.tarjeta.importe_acreditado:"####"),o+=e,this.tarjeta.historias&&this.tarjeta.historias.length>0&&(a.setFont("Helvetica","bold"),a.text("-- Historial --",20,o),o+=e,a.setFont("Helvetica","normal"),this.tarjeta.historias.forEach((t=>{a.text(`${t.fecha}: ${t.observaciones}`,25,o),o+=e,o>270&&(a.addPage(),o=20)})),o+=e),a.save(`tarjeta_social_${this.tarjeta.dni}.pdf`)},capitalize(a){return a.charAt(0).toUpperCase()+a.slice(1)}},mounted(){this.fetchTarjeta()}};const Ee=(0,M.A)(Ae,[["render",ye],["__scopeId","data-v-e10e99da"]]);var Se=Ee;const we={class:"vista"},Ie={key:0,class:"pantalla-carga text-center"},Fe={key:1,class:"mensaje-container-fondo"},Ne={class:"mensaje-container"},De={class:"mensaje"},xe={key:2,class:"container"},Me={class:"fila"},Te={class:"w-5"},Pe={class:"flex-cuil"},Ue={class:"input-group-text cuil-medio"},Xe={class:"w-5"},Ve={class:"fila"},Oe={class:"w-5"},$e={class:"w-5"},qe={class:"fila"},Je={class:"w-5"},We={class:"w-5"},Re={class:"fila"},Qe={class:"w-5"},Be=["value"],ze={class:"w-5"},Ge=["disabled"],He=["value"],Ke={class:"fila"},Ye={class:"w-5"},Ze=["disabled"],ao=["value"],eo={class:"w-5"},oo={class:"fila"},to={class:"w-5"},io=["for"],so=["name","onUpdate:modelValue"],ro={class:"w-5"},no=["for"],lo=["name","onUpdate:modelValue"],co={class:"fila"},uo={class:"w-5"},mo=["for"],po=["name","onUpdate:modelValue"],fo={class:"w-5"},ho=["for"],bo=["name","onUpdate:modelValue"],ko={key:3,class:"container"},vo={class:"solicitud-detalle"},go={class:"solicitud-info"},Lo={class:"info-item"},jo={class:"value"},_o={class:"info-item"},yo={class:"value"},Co={class:"info-item"},Ao={class:"value"},Eo={key:0,class:"historial"};function So(a,e,o,t,r,n){return(0,s.uX)(),(0,s.CE)("div",we,[r.cargando?((0,s.uX)(),(0,s.CE)("div",Ie,e[17]||(e[17]=[(0,s.Lk)("div",{class:"logo-carga"},[(0,s.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:"Logo"}),(0,s.Lk)("div",{class:"texto-carga"},"Cargando")],-1)]))):(0,s.Q3)("",!0),r.mensajePopup?((0,s.uX)(),(0,s.CE)("div",Fe,[(0,s.Lk)("div",Ne,[(0,s.Lk)("span",De,(0,m.v_)(a.mensaje),1),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[0]||(e[0]=a=>{this.mensajePopup=!1,this.mensaje=""})},"Ok")])])):(0,s.Q3)("",!0),"PENDIENTE"!=o.tieneTarjeta?((0,s.uX)(),(0,s.CE)("div",xe,[e[35]||(e[35]=(0,s.Lk)("h3",{class:"mt-2"},"Solicitar Tarjeta",-1)),(0,s.Lk)("form",{onSubmit:e[16]||(e[16]=(0,i.D$)(((...a)=>n.solicitar&&n.solicitar(...a)),["prevent"])),class:"formulario-beneficiario"},[(0,s.Lk)("div",Me,[(0,s.Lk)("div",Te,[e[18]||(e[18]=(0,s.Lk)("label",{for:"cuil",class:"form-label"},"CUIL",-1)),(0,s.Lk)("div",Pe,[(0,s.bo)((0,s.Lk)("input",{class:"form-control text-center cuil-lado",maxlength:"2",type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>r.cuilInicio=a),onInput:e[2]||(e[2]=(...a)=>n.updateCuil&&n.updateCuil(...a)),style:{"max-width":"3em"},required:""},null,544),[[i.Jo,r.cuilInicio]]),(0,s.Lk)("span",Ue,(0,m.v_)(r.usuario.dni),1),(0,s.bo)((0,s.Lk)("input",{class:"form-control text-center cuil-lado",maxlength:"1",type:"text","onUpdate:modelValue":e[3]||(e[3]=a=>r.cuilFin=a),onInput:e[4]||(e[4]=(...a)=>n.updateCuil&&n.updateCuil(...a)),style:{"max-width":"3em"},required:""},null,544),[[i.Jo,r.cuilFin]])])]),(0,s.Lk)("div",Xe,[e[19]||(e[19]=(0,s.Lk)("label",{for:"nombre",class:"form-label"},"Nombre completo",-1)),(0,s.bo)((0,s.Lk)("input",{id:"nombre",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=a=>r.usuario.nombre=a),type:"text"},null,512),[[i.Jo,r.usuario.nombre]])])]),(0,s.Lk)("div",Ve,[(0,s.Lk)("div",Oe,[e[20]||(e[20]=(0,s.Lk)("label",{class:"form-label",for:"telefono"},"Teléfono",-1)),(0,s.bo)((0,s.Lk)("input",{class:"form-control",type:"number","onUpdate:modelValue":e[6]||(e[6]=a=>r.usuario.telefono=a),required:""},null,512),[[i.Jo,r.usuario.telefono]])]),(0,s.Lk)("div",$e,[e[22]||(e[22]=(0,s.Lk)("label",{for:"sexo",class:"form-label"},"Sexo",-1)),(0,s.bo)((0,s.Lk)("select",{id:"sexo",class:"form-select","onUpdate:modelValue":e[7]||(e[7]=a=>r.usuario.sexo=a)},e[21]||(e[21]=[(0,s.Lk)("option",{disabled:"",value:"default"},"Seleccione",-1),(0,s.Lk)("option",{value:"F"},"Femenino",-1),(0,s.Lk)("option",{value:"M"},"Masculino",-1)]),512),[[i.u1,r.usuario.sexo]])])]),(0,s.Lk)("div",qe,[(0,s.Lk)("div",Je,[e[23]||(e[23]=(0,s.Lk)("label",{class:"form-label",for:"fecha_nacimiento"},"Fecha de Nacimiento",-1)),(0,s.bo)((0,s.Lk)("input",{class:"form-control",type:"date","onUpdate:modelValue":e[8]||(e[8]=a=>r.usuario.fecha_nacimiento=a),required:""},null,512),[[i.Jo,r.usuario.fecha_nacimiento]])]),(0,s.Lk)("div",We,[e[24]||(e[24]=(0,s.Lk)("label",{class:"form-label",for:"cant_parientes"},"Cantidad de parientes",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number",class:"form-control","onUpdate:modelValue":e[9]||(e[9]=a=>r.usuario.cant_parientes=a),required:""},null,512),[[i.Jo,r.usuario.cant_parientes]])])]),e[33]||(e[33]=(0,s.Fv)('<div class="fila" data-v-f7d90e70><div class="w-5" data-v-f7d90e70><label for="archivo-dni" class="form-label" data-v-f7d90e70>Foto/PDF del DNI</label><input class="form-control" name="archivo-dni" type="file" accept=".jpeg, .png, .pdf" required data-v-f7d90e70></div><div class="w-5" data-v-f7d90e70><label for="archivo-historial-medico" class="form-label" data-v-f7d90e70>Foto/PDF del Historial Médico</label><input class="form-control" name="archivo-historial-medico" type="file" accept=".jpeg, .png, .pdf" required data-v-f7d90e70></div></div>',1)),(0,s.Lk)("div",Re,[(0,s.Lk)("div",Qe,[e[26]||(e[26]=(0,s.Lk)("label",{class:"form-label",for:"departamento"},"Departamento",-1)),(0,s.bo)((0,s.Lk)("select",{class:"form-select","onUpdate:modelValue":e[10]||(e[10]=a=>r.usuario.departamento=a),onChange:e[11]||(e[11]=a=>n.fetchLocalidades(r.usuario.departamento)),required:""},[e[25]||(e[25]=(0,s.Lk)("option",{value:"default",disabled:""},"Seleccionar",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.departamentos,((a,e)=>((0,s.uX)(),(0,s.CE)("option",{value:a.cod_dpto,key:e},(0,m.v_)(a.descripcion),9,Be)))),128))],544),[[i.u1,r.usuario.departamento]])]),(0,s.Lk)("div",ze,[e[28]||(e[28]=(0,s.Lk)("label",{class:"form-label",for:"localidad"},"Localidad",-1)),(0,s.bo)((0,s.Lk)("select",{class:"form-select","onUpdate:modelValue":e[12]||(e[12]=a=>r.usuario.localidad=a),disabled:!("default"!=r.usuario.departamento),onChange:e[13]||(e[13]=a=>n.fetchBarrios(r.usuario.localidad)),required:""},[e[27]||(e[27]=(0,s.Lk)("option",{value:"default",disabled:""},"Seleccionar",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.localidades,((a,e)=>((0,s.uX)(),(0,s.CE)("option",{value:a.cod_localidad,key:e},(0,m.v_)(a.descripcion),9,He)))),128))],40,Ge),[[i.u1,r.usuario.localidad]])])]),(0,s.Lk)("div",Ke,[(0,s.Lk)("div",Ye,[e[30]||(e[30]=(0,s.Lk)("label",{class:"form-label",for:"barrio"},"Barrio",-1)),(0,s.bo)((0,s.Lk)("select",{class:"form-select","onUpdate:modelValue":e[14]||(e[14]=a=>r.usuario.barrio=a),disabled:!("default"!=r.usuario.localidad),required:""},[e[29]||(e[29]=(0,s.Lk)("option",{value:"default",disabled:""},"Seleccionar",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.barrios,((a,e)=>((0,s.uX)(),(0,s.CE)("option",{value:a.cod_barrio,key:e},(0,m.v_)(a.descripcion),9,ao)))),128))],8,Ze),[[i.u1,r.usuario.barrio]])]),(0,s.Lk)("div",eo,[e[31]||(e[31]=(0,s.Lk)("label",{for:"domicilio",class:"form-label"},"Domicilio",-1)),(0,s.bo)((0,s.Lk)("input",{id:"domicilio",class:"form-control","onUpdate:modelValue":e[15]||(e[15]=a=>r.usuario.domicilio=a),type:"text",required:""},null,512),[[i.Jo,r.usuario.domicilio]])])]),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.usuario.cant_parientes,(a=>((0,s.uX)(),(0,s.CE)("div",{class:"form-container",key:a},[(0,s.Lk)("h5",null,"Pariente "+(0,m.v_)(a),1),(0,s.Lk)("div",oo,[(0,s.Lk)("div",to,[(0,s.Lk)("label",{class:"form-label",for:"nom-pariente"+a},"Nombre y Apellido",8,io),(0,s.bo)((0,s.Lk)("input",{type:"text",name:"nom-pariente"+a,class:"form-control","onUpdate:modelValue":e=>r.parientes[a-1].nombre_pariente=e,required:""},null,8,so),[[i.Jo,r.parientes[a-1].nombre_pariente]])]),(0,s.Lk)("div",ro,[(0,s.Lk)("label",{class:"form-label",for:"dni-pariente"+a},"DNI",8,no),(0,s.bo)((0,s.Lk)("input",{type:"number",name:"dni-pariente"+a,class:"form-control","onUpdate:modelValue":e=>r.parientes[a-1].dni_pariente=e,required:""},null,8,lo),[[i.Jo,r.parientes[a-1].dni_pariente]])])]),(0,s.Lk)("div",co,[(0,s.Lk)("div",uo,[(0,s.Lk)("label",{class:"form-label",for:"sexo-pariente"+a},"Sexo",8,mo),(0,s.bo)((0,s.Lk)("select",{name:"sexo-pariente"+a,class:"form-select","onUpdate:modelValue":e=>r.parientes[a-1].sexo_pariente=e,required:""},e[32]||(e[32]=[(0,s.Lk)("option",{value:"default",disabled:"",selected:""},"Seleccionar",-1),(0,s.Lk)("option",{value:"f"},"Femenino",-1),(0,s.Lk)("option",{value:"m"},"Masculino",-1),(0,s.Lk)("option",{value:"n"},"No binario",-1)]),8,po),[[i.u1,r.parientes[a-1].sexo_pariente]])]),(0,s.Lk)("div",fo,[(0,s.Lk)("label",{class:"form-label",for:"fecha-nacimiento-pariente"+a},"Fecha de Nacimiento",8,ho),(0,s.bo)((0,s.Lk)("input",{type:"date",name:"fecha-nacimiento-pariente"+a,class:"form-control","onUpdate:modelValue":e=>r.parientes[a-1].fecha_nacimiento_pariente=e,required:""},null,8,bo),[[i.Jo,r.parientes[a-1].fecha_nacimiento_pariente]])])])])))),128)),e[34]||(e[34]=(0,s.Lk)("div",{class:"fila m-4"},[(0,s.Lk)("button",{type:"submit",class:"btn-mensaje"},"Solicitar")],-1))],32)])):((0,s.uX)(),(0,s.CE)("div",ko,[e[41]||(e[41]=(0,s.Lk)("h3",{class:"mt-2"},"Estado de la Solicitud",-1)),(0,s.Lk)("div",vo,[(0,s.Lk)("div",go,[(0,s.Lk)("div",Lo,[e[36]||(e[36]=(0,s.Lk)("span",{class:"label"},"Número de Solicitud",-1)),(0,s.Lk)("span",jo,(0,m.v_)(r.solicitud.id),1)]),(0,s.Lk)("div",_o,[e[37]||(e[37]=(0,s.Lk)("span",{class:"label"},"Estado",-1)),(0,s.Lk)("span",yo,(0,m.v_)(r.solicitud.estado),1)]),(0,s.Lk)("div",Co,[e[38]||(e[38]=(0,s.Lk)("span",{class:"label"},"Fecha de Solicitud",-1)),(0,s.Lk)("span",Ao,(0,m.v_)(n.formatearFecha(r.solicitud.fecha_solicitud)),1)])]),r.solicitud.historial&&r.solicitud.historial.length?((0,s.uX)(),(0,s.CE)("div",Eo,[e[39]||(e[39]=(0,s.Lk)("h3",{class:"historial-titulo"},"Historial",-1)),e[40]||(e[40]=(0,s.Lk)("div",{class:"historial-encabezado"},[(0,s.Lk)("span",null,"Observaciones"),(0,s.Lk)("span",null,"Fecha")],-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.solicitud.historial,((a,e)=>((0,s.uX)(),(0,s.CE)("div",{key:e,class:"historial-item"},[(0,s.Lk)("span",null,(0,m.v_)(a.observaciones),1),(0,s.Lk)("span",null,(0,m.v_)(n.formatearFecha(a.fecha)),1)])))),128))])):(0,s.Q3)("",!0)])]))])}var wo={data(){return{cuilInicio:"",cuilFin:"",cargando:!1,mensajePopup:!1,usuario:{nombre:"",dni:"",cuil:"",sexo:"default",telefono:"",fecha_nacimiento:"",cant_parientes:0,localidad:"default",departamento:"default",barrio:"default",domicilio:""},parientes:[],localidades:[],departamentos:[],barrios:[],solicitud:""}},props:{tieneTarjeta:{type:String,default:null}},watch:{"usuario.cant_parientes"(a){a<0?this.usuario.cant_parientes=0:this.parientes=Array.from({length:a},((a,e)=>({nombre_pariente:this.parientes[e]?.nombre_pariente||"",dni_pariente:this.parientes[e]?.dni_pariente||"",fecha_nacimiento_pariente:this.parientes[e]?.fecha_nacimiento_pariente||"",sexo_pariente:this.parientes[e]?.sexo_pariente||""})))}},methods:{formatearFecha(a){return new Date(a).toLocaleDateString("es-AR",{day:"2-digit",month:"2-digit",year:"2-digit"})},updateCuil(){const a=this.cuilInicio.padStart(2,"0").slice(0,2),e=this.cuilFin.slice(0,1),o=this.usuario.dni;this.usuario.cuil=`${a}${o}${e}`},restrictInput(a){const e=a.target.value,o=/[\s!@#$%^&*()_+=[\]{};':"\\|,<>?`´¨~¡/°¬¿]/g;o.test(e)&&(this.usuario.usuario=this.usuario.usuario.substring(0,this.usuario.usuario.length-1))},async solicitar(){this.cargando=!0;try{const a=new FormData;for(const t in this.usuario)a.append(t,this.usuario[t]);a.append("parientes",JSON.stringify(this.parientes));const e=this.$el.querySelector('input[name="archivo-dni"]').files[0],o=this.$el.querySelector('input[name="archivo-historial-medico"]').files[0];e&&a.append("dni",e),o&&a.append("historial",o),await t.A.post("/tarjetas/solicitar",a,{headers:{"Content-Type":"multipart/form-data"}}),fn.push("/beneficiario")}catch(a){this.mensajePopup=!0,this.mensaje="Error al solicitar: "+a.message}finally{this.cargando=!1}},async fetchDepartamentos(){try{const a=await t.A.get("/get/departamentos");this.departamentos=a.data}catch(a){console.error(a)}},async fetchLocalidades(a){try{const e=await t.A.get(`/get/localidades/${a}`);this.localidades=e.data,this.usuario.localidad="default",this.usuario.barrio="default"}catch(e){console.error(e)}},async fetchBarrios(a){try{const e=await t.A.get(`/get/barrios/${a}`);this.barrios=e.data,this.usuario.barrio="default"}catch(e){console.error(e)}},async fetchSolicitud(){try{const a=await t.A.get("/tarjetas/getSolicitud",{params:{dni:this.usuario.dni}});this.solicitud=a.data}catch(a){console.log(a.response.data)}},async fetchDatos(){this.cargando=!0;try{const a=await t.A.get("/beneficiarios/getDatosPadron",{params:{dni:this.usuario.dni}});Object.assign(this.usuario,a.data)}catch(a){console.log(a)}finally{this.cargando=!1}}},async mounted(){await this.fetchDepartamentos(),this.usuario.dni=await JSON.parse(localStorage.getItem("user")).dni,null!=localStorage.getItem("tieneTarjeta")?await this.fetchSolicitud():await this.fetchDatos()}};const Io=(0,M.A)(wo,[["render",So],["__scopeId","data-v-f7d90e70"]]);var Fo=Io;const No={class:"flex-inline"};function Do(a,e,o,t,i,r){const n=(0,s.g2)("SidebarEmpleadoComponent"),l=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",No,[(0,s.bF)(n),(0,s.bF)(l,{class:"vista"})])}const xo={key:0,class:"mensaje-container-fondo"},Mo={class:"mensaje-container"},To={class:"modal-botones"},Po={class:"contenedor"},Uo={class:"contenedor-botones"};function Xo(a,e,o,t,i,r){const n=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",null,[i.mostrarModal?((0,s.uX)(),(0,s.CE)("div",xo,[(0,s.Lk)("div",Mo,[e[3]||(e[3]=(0,s.Lk)("span",{class:"mensaje"},"¿Cerrar sesión?",-1)),(0,s.Lk)("div",To,[(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[0]||(e[0]=a=>this.mostrarModal=!1)},"No"),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[1]||(e[1]=(...a)=>r.cerrarSesion&&r.cerrarSesion(...a))},"Si")])])])):(0,s.Q3)("",!0),(0,s.Lk)("div",Po,[(0,s.Lk)("div",Uo,[e[9]||(e[9]=(0,s.Lk)("a",{href:"/empleado",class:"sidebar-header"},[(0,s.Lk)("img",{src:"/recursos/logomds.png",class:"mv-auto img-logo",alt:""}),(0,s.Lk)("h4",{class:"white text-center"},[(0,s.eW)("Tarjetas"),(0,s.Lk)("br"),(0,s.eW)("Sociales")])],-1)),e[10]||(e[10]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",null,[(0,s.bF)(n,{class:(0,m.C4)(["item-btn",{active:"/empleado"==a.$route.path}]),to:"/empleado"},{default:(0,s.k6)((()=>e[4]||(e[4]=[(0,s.eW)("Inicio")]))),_:1},8,["class"])]),(0,s.Lk)("div",null,[(0,s.bF)(n,{class:(0,m.C4)(["item-btn",{active:"/empleado/solicitudes"===a.$route.path}]),to:"/empleado/solicitudes"},{default:(0,s.k6)((()=>e[5]||(e[5]=[(0,s.eW)("Solicitudes")]))),_:1},8,["class"])]),(0,s.Lk)("div",null,[(0,s.bF)(n,{class:(0,m.C4)(["item-btn",{active:"/empleado/beneficiarios"===a.$route.path}]),to:"/empleado/beneficiarios"},{default:(0,s.k6)((()=>e[6]||(e[6]=[(0,s.eW)("Beneficiarios")]))),_:1},8,["class"])]),(0,s.Lk)("div",null,[(0,s.bF)(n,{class:(0,m.C4)(["item-btn",{active:"/empleado/tarjetas"===a.$route.path}]),to:"/empleado/tarjetas"},{default:(0,s.k6)((()=>e[7]||(e[7]=[(0,s.eW)("Tarjetas")]))),_:1},8,["class"])]),(0,s.Lk)("div",null,[(0,s.bF)(n,{class:(0,m.C4)(["item-btn",{active:"/empleado/informes"===a.$route.path}]),to:"/empleado/informes"},{default:(0,s.k6)((()=>e[8]||(e[8]=[(0,s.eW)("Informes")]))),_:1},8,["class"])]),(0,s.Lk)("button",{class:"item-btn mt-4",onClick:e[2]||(e[2]=(...a)=>r.cerrarSesionModal&&r.cerrarSesionModal(...a))},"Cerrar Sesión")])])])}var Vo={data(){return{mostrarModal:!1}},methods:{cerrarSesionModal(){this.mostrarModal=!0},cerrarSesion(){this.mostrarModal=!1,localStorage.clear(),aa.emit("usuarioDeslogueado"),fn.push("/")}}};const Oo=(0,M.A)(Vo,[["render",Xo],["__scopeId","data-v-c195f890"]]);var $o=Oo,qo=o(1714),Jo={components:{SidebarEmpleadoComponent:$o},mounted(){"Notification"in window&&"default"===Notification.permission&&Notification.requestPermission().then((a=>{console.log("Permiso de notificación:",a)}));const a=(0,qo.io)("https://nazadoto.com:3500");a.on("nueva_solicitud",(a=>{console.log("Nueva solicitud:",a),this.mostrarNotificacion(a)}))},methods:{mostrarNotificacion(a){"Notification"in window&&"granted"===Notification.permission?new Notification("Nueva Solicitud",{body:`De: ${a.nombre} - ${a.dni}`,icon:"/recursos/icono-noti.png"}):console.log("Notificaciones no permitidas por el usuario")}}};const Wo=(0,M.A)(Jo,[["render",Do],["__scopeId","data-v-760bf96a"]]);var Ro=Wo;const Qo={class:"vista"},Bo={class:"container"},zo={class:"mt-2"},Go={class:"tarjetas-inicio"};function Ho(a,e,o,t,i,r){return(0,s.uX)(),(0,s.CE)("div",Qo,[(0,s.Lk)("div",Bo,[(0,s.Lk)("h3",zo,"Bienvenid@, "+(0,m.v_)(i.usuario.usuario?.toUpperCase()),1),e[8]||(e[8]=(0,s.Lk)("p",{class:"lead"},"Desde aquí podés acceder a las principales funciones de gestión del sistema.",-1)),(0,s.Lk)("div",Go,[(0,s.Lk)("div",{class:"card acceso",onClick:e[0]||(e[0]=e=>a.$router.push("/empleado/solicitudes"))},e[4]||(e[4]=[(0,s.Lk)("h5",null,"Gestión de Solicitudes",-1),(0,s.Lk)("p",null,"Evaluar, aprobar o rechazar solicitudes.",-1)])),(0,s.Lk)("div",{class:"card acceso",onClick:e[1]||(e[1]=e=>a.$router.push("/empleado/beneficiarios"))},e[5]||(e[5]=[(0,s.Lk)("h5",null,"Gestión de Beneficiarios",-1),(0,s.Lk)("p",null,"Agregar, modificar o buscar beneficiarios registrados.",-1)])),(0,s.Lk)("div",{class:"card acceso",onClick:e[2]||(e[2]=e=>a.$router.push("/empleado/tarjetas"))},e[6]||(e[6]=[(0,s.Lk)("h5",null,"Gestión de Tarjetas",-1),(0,s.Lk)("p",null,"Registrar y actualizar información de tarjetas sociales.",-1)])),(0,s.Lk)("div",{class:"card acceso",onClick:e[3]||(e[3]=e=>a.$router.push("/empleado/informes"))},e[7]||(e[7]=[(0,s.Lk)("h5",null,"Generar Informes",-1),(0,s.Lk)("p",null,"Obtener reportes de beneficiarios y tarjetas.",-1)]))])])])}var Ko={data(){return{usuario:""}},mounted(){this.usuario=JSON.parse(localStorage.getItem("user"))}};const Yo=(0,M.A)(Ko,[["render",Ho],["__scopeId","data-v-564e87c2"]]);var Zo=Yo;const at={class:"vista"},et={key:0,class:"pantalla-carga-vista text-center"},ot={key:1,class:"mensaje-container-fondo"},tt={class:"mensaje-container"},it={class:"mensaje"},st={key:2,class:"mensaje-container-fondo"},rt={class:"mensaje-container"},nt={class:"flex"},lt={class:"container"},ct={class:"fila"},dt={class:"w-5"},ut={class:"btns-comprobar"},mt=["disabled"],pt=["disabled"],ft={class:"fila"},ht={class:"w-100"},bt=["disabled"],kt={class:"fila"},vt={class:"w-5"},gt=["disabled"],Lt={class:"w-5"},jt={class:"input-group"},_t=["disabled"],yt={class:"input-group-text"},Ct=["disabled"],At={class:"fila"},Et={class:"w-3"},St=["disabled"],wt={class:"w-3"},It=["disabled"],Ft={class:"w-3"},Nt=["disabled"],Dt={class:"fila"},xt={class:"w-3"},Mt=["disabled"],Tt=["value"],Pt={class:"w-3"},Ut=["disabled"],Xt=["value"],Vt={class:"w-3"},Ot=["disabled"],$t=["value"],qt={class:"fila"},Jt={class:"w-5"},Wt=["disabled"],Rt={class:"w-5"},Qt=["disabled"],Bt={class:"fila"},zt={class:"w-5"},Gt=["disabled"],Ht={class:"w-5"},Kt=["disabled"],Yt={class:"fila"},Zt={key:0,class:"w-100"},ai={class:"historial"},ei={class:"fila mt-2"},oi={class:"w-5 ml-auto"},ti=["disabled"],ii={key:0,class:"vista-previa"},si={class:"archivo-preview"},ri={class:"archivo"},ni=["disabled"],li=["href"],ci=["src","alt"],di=["src"],ui=["title"],mi={class:"fila"},pi={class:"w-5"},fi=["for"],hi=["id","onUpdate:modelValue"],bi={class:"w-5"},ki=["for"],vi=["id","onUpdate:modelValue"],gi={class:"fila"},Li={class:"w-5"},ji=["for"],_i=["id","onUpdate:modelValue"],yi={class:"w-5"},Ci=["for"],Ai=["id","onUpdate:modelValue"],Ei={class:"w-5"},Si=["for"],wi=["id","onUpdate:modelValue"],Ii={class:"fila m-4"},Fi=["disabled"],Ni=["disabled"];function Di(a,e,o,t,r,n){const l=(0,s.g2)("TarjetaModal");return(0,s.uX)(),(0,s.CE)("div",at,[r.cargandoDatos?((0,s.uX)(),(0,s.CE)("div",et,e[28]||(e[28]=[(0,s.Lk)("div",{class:"logo-carga"},[(0,s.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,s.Lk)("div",{class:"texto-carga"},"Cargando...")],-1)]))):(0,s.Q3)("",!0),r.mensajePopup?((0,s.uX)(),(0,s.CE)("div",ot,[(0,s.Lk)("div",tt,[(0,s.Lk)("span",it,(0,m.v_)(r.mensaje),1),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[0]||(e[0]=a=>{this.mensajePopup=!1,this.mensaje=""})},"Ok")])])):(0,s.Q3)("",!0),r.quitarArchivoMsgPopup?((0,s.uX)(),(0,s.CE)("div",st,[(0,s.Lk)("div",rt,[e[29]||(e[29]=(0,s.Lk)("span",{class:"mensaje"},"¿Borrar archivo adjunto?",-1)),(0,s.Lk)("span",nt,[(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[1]||(e[1]=(...a)=>n.quitarArchivo&&n.quitarArchivo(...a))},"Si, borrar"),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[2]||(e[2]=a=>this.quitarArchivoMsgPopup=!1)},"No")])])])):(0,s.Q3)("",!0),(0,s.Lk)("div",lt,[e[53]||(e[53]=(0,s.Lk)("h3",{class:"mt-2"},"Datos de Beneficiario",-1)),(0,s.Lk)("form",{class:"formulario-beneficiario",onSubmit:e[27]||(e[27]=(0,i.D$)(((...a)=>n.cargarBeneficiario&&n.cargarBeneficiario(...a)),["prevent"]))},[(0,s.Lk)("div",ct,[(0,s.Lk)("div",dt,[e[30]||(e[30]=(0,s.Lk)("label",{for:"dni",class:"form-label"},"DNI",-1)),(0,s.bo)((0,s.Lk)("input",{id:"dni",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>r.form.dni=a),type:"number",required:"",onKeydown:e[4]||(e[4]=(0,i.jR)((0,i.D$)(((...a)=>n.comprobarPadron&&n.comprobarPadron(...a)),["prevent"]),["enter"]))},null,544),[[i.Jo,r.form.dni]])]),(0,s.Lk)("div",ut,[(0,s.Lk)("button",{type:"button",class:"btn-mensaje",onClick:e[5]||(e[5]=(...a)=>n.comprobarPadron&&n.comprobarPadron(...a)),disabled:""==r.form.dni},"Comprobar en padrón",8,mt),(0,s.Lk)("button",{type:"button",class:"btn-tarjeta orange",onClick:e[6]||(e[6]=(...a)=>n.verTarjeta&&n.verTarjeta(...a)),disabled:!r.tieneTarjeta},"Ver Tarjeta",8,pt),(0,s.bF)(l,{visible:r.modalVisible,form:r.tarjetaForm,onCerrar:e[7]||(e[7]=a=>r.modalVisible=!1)},null,8,["visible","form"])])]),(0,s.Lk)("div",ft,[(0,s.Lk)("div",ht,[(0,s.Lk)("button",{type:"button",class:"btn-tarjeta",disabled:!r.botonModificacion,onClick:e[8]||(e[8]=a=>{r.habilitarModificacion=!0,r.habilitarImprimir=!0})},"Modificar Datos",8,bt)])]),(0,s.Lk)("div",kt,[(0,s.Lk)("div",vt,[e[31]||(e[31]=(0,s.Lk)("label",{for:"nombre",class:"form-label"},"Nombre completo",-1)),(0,s.bo)((0,s.Lk)("input",{id:"nombre",class:"form-control","onUpdate:modelValue":e[9]||(e[9]=a=>r.form.nombre=a),type:"text",disabled:!r.habilitarModificacion},null,8,gt),[[i.Jo,r.form.nombre]])]),(0,s.Lk)("div",Lt,[e[32]||(e[32]=(0,s.Lk)("label",{for:"cuil",class:"form-label"},"CUIL",-1)),(0,s.Lk)("div",jt,[(0,s.bo)((0,s.Lk)("input",{class:"form-control text-center",maxlength:"2",type:"text","onUpdate:modelValue":e[10]||(e[10]=a=>r.cuilInicio=a),onInput:e[11]||(e[11]=(...a)=>n.updateCuil&&n.updateCuil(...a)),disabled:!r.habilitarModificacion,style:{"max-width":"3em"}},null,40,_t),[[i.Jo,r.cuilInicio]]),(0,s.Lk)("span",yt,(0,m.v_)(r.form.dni),1),(0,s.bo)((0,s.Lk)("input",{class:"form-control text-center",maxlength:"1",type:"text","onUpdate:modelValue":e[12]||(e[12]=a=>r.cuilFin=a),onInput:e[13]||(e[13]=(...a)=>n.updateCuil&&n.updateCuil(...a)),disabled:!r.habilitarModificacion,style:{"max-width":"3em"}},null,40,Ct),[[i.Jo,r.cuilFin]])])])]),(0,s.Lk)("div",At,[(0,s.Lk)("div",Et,[e[33]||(e[33]=(0,s.Lk)("label",{for:"fecha_nacimiento",class:"form-label"},"Fecha de Nacimiento",-1)),(0,s.bo)((0,s.Lk)("input",{id:"fecha_nacimiento",class:"form-control","onUpdate:modelValue":e[14]||(e[14]=a=>r.form.fecha_nacimiento=a),type:"date",disabled:!r.habilitarModificacion},null,8,St),[[i.Jo,r.form.fecha_nacimiento]])]),(0,s.Lk)("div",wt,[e[35]||(e[35]=(0,s.Lk)("label",{for:"sexo",class:"form-label"},"Sexo",-1)),(0,s.bo)((0,s.Lk)("select",{id:"sexo",class:"form-select","onUpdate:modelValue":e[15]||(e[15]=a=>r.form.sexo=a),disabled:!r.habilitarModificacion},e[34]||(e[34]=[(0,s.Lk)("option",{disabled:"",value:"default"},"Seleccione",-1),(0,s.Lk)("option",{value:"F"},"Femenino",-1),(0,s.Lk)("option",{value:"M"},"Masculino",-1)]),8,It),[[i.u1,r.form.sexo]])]),(0,s.Lk)("div",Ft,[e[36]||(e[36]=(0,s.Lk)("label",{for:"cant_parientes",class:"form-label"},"Cant. Parientes (hijos)",-1)),(0,s.bo)((0,s.Lk)("input",{id:"cant_parientes",class:"form-control","onUpdate:modelValue":e[16]||(e[16]=a=>r.form.cant_parientes=a),type:"number",disabled:!r.habilitarModificacion},null,8,Nt),[[i.Jo,r.form.cant_parientes]])])]),(0,s.Lk)("div",Dt,[(0,s.Lk)("div",xt,[e[38]||(e[38]=(0,s.Lk)("label",{for:"cod_dpto",class:"form-label"},"Departamento",-1)),(0,s.bo)((0,s.Lk)("select",{id:"cod_dpto",class:"form-select","onUpdate:modelValue":e[17]||(e[17]=a=>r.form.cod_dpto=a),disabled:!r.habilitarModificacion},[e[37]||(e[37]=(0,s.Lk)("option",{disabled:"",value:"default"},"Seleccione",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.departamentos,(a=>((0,s.uX)(),(0,s.CE)("option",{key:a.cod_dpto,value:a.cod_dpto},(0,m.v_)(a.descripcion),9,Tt)))),128))],8,Mt),[[i.u1,r.form.cod_dpto]])]),(0,s.Lk)("div",Pt,[e[40]||(e[40]=(0,s.Lk)("label",{for:"cod_localidad",class:"form-label"},"Localidad",-1)),(0,s.bo)((0,s.Lk)("select",{id:"cod_localidad",class:"form-select","onUpdate:modelValue":e[18]||(e[18]=a=>r.form.cod_localidad=a),disabled:!r.habilitarModificacion},[e[39]||(e[39]=(0,s.Lk)("option",{disabled:"",value:"default"},"Seleccione",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.localidades,(a=>((0,s.uX)(),(0,s.CE)("option",{key:a.cod_localidad,value:a.cod_localidad},(0,m.v_)(a.descripcion),9,Xt)))),128))],8,Ut),[[i.u1,r.form.cod_localidad]])]),(0,s.Lk)("div",Vt,[e[42]||(e[42]=(0,s.Lk)("label",{for:"cod_barrio",class:"form-label"},"Barrio",-1)),(0,s.bo)((0,s.Lk)("select",{id:"cod_barrio",class:"form-select","onUpdate:modelValue":e[19]||(e[19]=a=>r.form.cod_barrio=a),disabled:!r.habilitarModificacion},[e[41]||(e[41]=(0,s.Lk)("option",{disabled:"",value:"default"},"Seleccione",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.barrios,(a=>((0,s.uX)(),(0,s.CE)("option",{key:a.cod_barrio,value:a.cod_barrio},(0,m.v_)(a.descripcion),9,$t)))),128))],8,Ot),[[i.u1,r.form.cod_barrio]])])]),(0,s.Lk)("div",qt,[(0,s.Lk)("div",Jt,[e[43]||(e[43]=(0,s.Lk)("label",{for:"domicilio",class:"form-label"},"Domicilio",-1)),(0,s.bo)((0,s.Lk)("input",{id:"domicilio",class:"form-control","onUpdate:modelValue":e[20]||(e[20]=a=>r.form.domicilio=a),type:"text",disabled:!r.habilitarModificacion},null,8,Wt),[[i.Jo,r.form.domicilio]])]),(0,s.Lk)("div",Rt,[e[45]||(e[45]=(0,s.Lk)("label",{for:"estado",class:"form-label"},"Estado",-1)),(0,s.bo)((0,s.Lk)("select",{id:"estado",class:"form-select","onUpdate:modelValue":e[21]||(e[21]=a=>r.form.estado=a),disabled:!r.habilitarModificacion},e[44]||(e[44]=[(0,s.Lk)("option",{disabled:"",value:"default"},"Seleccione",-1),(0,s.Lk)("option",{value:null},"Sin Tarjeta",-1),(0,s.Lk)("option",{value:"SOLICITADA"},"Solicitada",-1),(0,s.Lk)("option",{value:"PENDIENTE"},"Pendiente",-1),(0,s.Lk)("option",{value:"ENTREGADA"},"Entregada",-1),(0,s.Lk)("option",{value:"BAJA"},"Baja",-1)]),8,Qt),[[i.u1,r.form.estado]])])]),(0,s.Lk)("div",Bt,[(0,s.Lk)("div",zt,[e[46]||(e[46]=(0,s.Lk)("label",{for:"observaciones",class:"form-label"},"Agregar Observación",-1)),(0,s.bo)((0,s.Lk)("input",{id:"observaciones",class:"form-control","onUpdate:modelValue":e[22]||(e[22]=a=>r.form.observaciones=a),type:"text",disabled:!r.habilitarModificacion},null,8,Gt),[[i.Jo,r.form.observaciones]])]),(0,s.Lk)("div",Ht,[e[47]||(e[47]=(0,s.Lk)("label",{for:"importe_acreditado",class:"form-label"},"Importe Acreditado",-1)),(0,s.bo)((0,s.Lk)("input",{id:"importe_acreditado",class:"form-control","onUpdate:modelValue":e[23]||(e[23]=a=>r.form.importe_acreditado=a),type:"number",step:"0.01",disabled:!r.habilitarModificacion},null,8,Kt),[[i.Jo,r.form.importe_acreditado]])])]),(0,s.Lk)("div",Yt,[r.form.historias.length>0?((0,s.uX)(),(0,s.CE)("div",Zt,[e[48]||(e[48]=(0,s.Lk)("label",{for:"historial",class:"form-label"},"Historial",-1)),(0,s.Lk)("div",ai,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.form.historias,((a,e)=>((0,s.uX)(),(0,s.CE)("span",{class:"w-100 block",key:e},[(0,s.Lk)("strong",null,(0,m.v_)(a.fecha),1),(0,s.eW)(" "+(0,m.v_)(a.observaciones),1)])))),128))])])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",ei,[(0,s.Lk)("div",oi,[e[49]||(e[49]=(0,s.Lk)("label",{for:"archivo",class:"btn-archivo"},[(0,s.Lk)("img",{class:"pdf-logo",src:"/recursos/logo-pdf.png",alt:""}),(0,s.eW)(" Adjuntar archivo")],-1)),(0,s.Lk)("input",{class:"form-control",type:"file",name:"archivo",id:"archivo",accept:".pdf, .xls, .doc, .docx",hidden:"",onChange:e[24]||(e[24]=(...a)=>n.manejarDocumento&&n.manejarDocumento(...a)),disabled:!r.habilitarModificacion},null,40,ti)])]),null!=r.archivo?((0,s.uX)(),(0,s.CE)("div",ii,[(0,s.Lk)("div",si,[(0,s.Lk)("a",ri,[(0,s.Lk)("button",{type:"button",class:"btn-quitar",onClick:e[25]||(e[25]=(...a)=>n.quitarArchivoMsg&&n.quitarArchivoMsg(...a)),disabled:!r.habilitarModificacion},"×",8,ni),(0,s.Lk)("a",{class:"to-hidden",href:`https://nazadoto.com:3500/uploads/beneficiario/${r.form.dni}/${r.archivo.nombre}`,target:"_blank"},["imagen"===r.archivo.tipo?((0,s.uX)(),(0,s.CE)("img",{key:0,src:r.archivo.vistaPrevia,alt:r.archivo.nombre,class:"imagen-preview"},null,8,ci)):(0,s.Q3)("",!0),"documento"===r.archivo.tipo?((0,s.uX)(),(0,s.CE)("img",{key:1,src:r.archivo.vistaPrevia,alt:"Documento",class:"documento-preview"},null,8,di)):(0,s.Q3)("",!0),(0,s.Lk)("div",{class:"desc-archivo",title:r.archivo.nombre},(0,m.v_)(r.archivo.nombre),9,ui)],8,li)])])])):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.parientesArray,((a,o)=>((0,s.uX)(),(0,s.CE)("span",{key:o},[e[52]||(e[52]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("h4",null,"Pariente "+(0,m.v_)(o+1),1),(0,s.Lk)("div",mi,[(0,s.Lk)("div",pi,[(0,s.Lk)("label",{for:"pariente"+o+"1dni"},"DNI",8,fi),(0,s.bo)((0,s.Lk)("input",{id:"pariente"+o+"1dni",type:"number",class:"form-control","onUpdate:modelValue":a=>r.parientesArray[o].dni=a},null,8,hi),[[i.Jo,r.parientesArray[o].dni]])]),(0,s.Lk)("div",bi,[(0,s.Lk)("label",{for:"pariente"+o+"1nom"},"Nombre Completo",8,ki),(0,s.bo)((0,s.Lk)("input",{id:"pariente"+o+"1nom",type:"text",class:"form-control","onUpdate:modelValue":a=>r.parientesArray[o].nombre=a},null,8,vi),[[i.Jo,r.parientesArray[o].nombre]])])]),(0,s.Lk)("div",gi,[(0,s.Lk)("div",Li,[(0,s.Lk)("label",{for:"pariente"+o+"1fecha_nacimiento",class:"form-label"},"Fecha de Nacimiento",8,ji),(0,s.bo)((0,s.Lk)("input",{id:"pariente"+o+"1fecha_nacimiento",class:"form-control","onUpdate:modelValue":a=>r.parientesArray[o].fecha_nacimiento=a,type:"date"},null,8,_i),[[i.Jo,r.parientesArray[o].fecha_nacimiento]])]),(0,s.Lk)("div",yi,[(0,s.Lk)("label",{for:"pariente"+o+"1tipo",class:"form-label"},"Tipo",8,Ci),(0,s.bo)((0,s.Lk)("select",{id:"pariente"+o+"1tipo",class:"form-select","onUpdate:modelValue":a=>r.parientesArray[o].tipo=a},e[50]||(e[50]=[(0,s.Lk)("option",{disabled:"",value:"default"},"Seleccione",-1),(0,s.Lk)("option",{value:"hijo"},"Hijo",-1),(0,s.Lk)("option",{value:"conyugue"},"Cónyugue",-1),(0,s.Lk)("option",{value:"otro"},"Otro",-1)]),8,Ai),[[i.u1,r.parientesArray[o].tipo]])]),(0,s.Lk)("div",Ei,[(0,s.Lk)("label",{for:"pariente"+o+"1sexo",class:"form-label"},"Sexo",8,Si),(0,s.bo)((0,s.Lk)("select",{id:"pariente"+o+"1sexo",class:"form-select","onUpdate:modelValue":a=>r.parientesArray[o].sexo=a},e[51]||(e[51]=[(0,s.Lk)("option",{disabled:"",value:"default"},"Seleccione",-1),(0,s.Lk)("option",{value:"F"},"Femenino",-1),(0,s.Lk)("option",{value:"M"},"Masculino",-1)]),8,wi),[[i.u1,r.parientesArray[o].sexo]])])])])))),128)),(0,s.Lk)("div",Ii,[(0,s.Lk)("button",{type:"button",class:"btn-mensaje btn-imprimir",disabled:!r.habilitarImprimir,onClick:e[26]||(e[26]=(...a)=>n.imprimirFichaPDF&&n.imprimirFichaPDF(...a))},"Imprimir",8,Fi),(0,s.Lk)("button",{type:"submit",class:"btn-mensaje",disabled:!r.habilitarModificacion},"Guardar",8,Ni)])],32)])])}const xi={key:0,class:"modal-overlay"},Mi={class:"modal-content"},Ti={class:"formulario-beneficiario"},Pi={class:"fila"},Ui={class:"w-5"},Xi=["value"],Vi={class:"w-5"},Oi=["value"],$i={class:"fila"},qi={class:"w-5"},Ji=["value"],Wi={class:"w-5"},Ri=["value"],Qi={class:"fila"},Bi={class:"w-5"},zi=["value"],Gi={class:"w-5"},Hi=["value"];function Ki(a,e,o,t,i,r){return o.visible?((0,s.uX)(),(0,s.CE)("div",xi,[(0,s.Lk)("div",Mi,[(0,s.Lk)("button",{class:"btn-cerrar",onClick:e[0]||(e[0]=e=>a.$emit("cerrar"))},"✕"),e[7]||(e[7]=(0,s.Lk)("h3",null,"Datos de Tarjeta Social",-1)),(0,s.Lk)("form",Ti,[(0,s.Lk)("div",Pi,[(0,s.Lk)("div",Ui,[e[1]||(e[1]=(0,s.Lk)("label",null,"DNI",-1)),(0,s.Lk)("input",{class:"form-control",value:o.form.dni,disabled:""},null,8,Xi)]),(0,s.Lk)("div",Vi,[e[2]||(e[2]=(0,s.Lk)("label",null,"Número de Cuenta",-1)),(0,s.Lk)("input",{class:"form-control",value:o.form.num_cuenta,disabled:""},null,8,Oi)])]),(0,s.Lk)("div",$i,[(0,s.Lk)("div",qi,[e[3]||(e[3]=(0,s.Lk)("label",null,"Número de Tarjeta",-1)),(0,s.Lk)("input",{class:"form-control",value:o.form.num_tarjeta,disabled:""},null,8,Ji)]),(0,s.Lk)("div",Wi,[e[4]||(e[4]=(0,s.Lk)("label",null,"Fecha de Registro",-1)),(0,s.Lk)("input",{class:"form-control",value:o.form.fecha_registro,disabled:""},null,8,Ri)])]),(0,s.Lk)("div",Qi,[(0,s.Lk)("div",Bi,[e[5]||(e[5]=(0,s.Lk)("label",null,"Estado",-1)),(0,s.Lk)("input",{class:"form-control",value:o.form.estado,disabled:""},null,8,zi)]),(0,s.Lk)("div",Gi,[e[6]||(e[6]=(0,s.Lk)("label",null,"Importe Acreditado",-1)),(0,s.Lk)("input",{class:"form-control",value:o.form.importe_acreditado,disabled:""},null,8,Hi)])])])])])):(0,s.Q3)("",!0)}var Yi={props:{visible:Boolean,form:Object}};const Zi=(0,M.A)(Yi,[["render",Ki],["__scopeId","data-v-3f8ace48"]]);var as=Zi,es={components:{TarjetaModal:as},data(){return{cuilInicio:"",cuilFin:"",form:{dni:"",nombre:"",cuil:"",fecha_nacimiento:"",sexo:"default",cod_dpto:"default",cod_localidad:"default",cod_barrio:"default",domicilio:"",fecha_registro:"",hora_registro:"",estado:"default",fecha_modificacion:"",hora_modificacion:"",observaciones:"",cant_parientes:"",importe_acreditado:"",historias:[]},quitarArchivoMsgPopup:!1,botonModificacion:!1,departamentos:[],localidades:[],barrios:[],parientesArray:[],archivo:null,habilitarModificacion:!1,habilitarImprimir:!1,tieneTarjeta:!1,cargandoDatos:!1,mensajePopup:!1,mensaje:"",tarjetaForm:{dni:"",num_cuenta:"",num_tarjeta:"",fecha_registro:"",estado:"",importe_acreditado:""},modalVisible:!1}},watch:{"form.cod_dpto"(a){this.cargarLocalidades(a),this.form.cod_localidad="",this.form.cod_barrio="",this.barrios=[]},"form.cod_localidad"(a){this.cargarBarrios(a),this.form.cod_barrio=""},"form.cant_parientes"(a){this.actualizarParientes(a)}},async mounted(){await this.cargarDepartamentos()},methods:{updateCuil(){const a=this.cuilInicio.padStart(2,"0").slice(0,2),e=this.cuilFin.slice(0,1),o=this.form.dni;this.form.cuil=`${a}${o}${e}`},capitalize(a){return a.charAt(0).toUpperCase()+a.slice(1)},async imprimirFichaPDF(){const a=new Ce.Ay,e=8;let o=20;const t=(t,i)=>{a.setFont("Helvetica","bold"),a.text(`${t}:`,20,o),a.setFont("Helvetica","normal"),a.text(`${i||"-"}`,80,o),a.setFontSize(11),o+=e},i=(e,o,t=11)=>{a.setFontSize(t),a.setFont("Helvetica","bold");const i=a.getStringUnitWidth(e)*t/a.internal.scaleFactor,s=(a.internal.pageSize.getWidth()-i)/2;a.text(e,s,o)},s=a=>fetch(a).then((a=>a.blob())).then((a=>new Promise((e=>{const o=new FileReader;o.onloadend=()=>e(o.result),o.readAsDataURL(a)})))),r=await s("/recursos/icono-mds-negro.png"),n=await s("/recursos/icono-gobierno.png");a.addImage(r,"PNG",30,10,60,15),a.addImage(n,"PNG",150,10,15,15),a.setFont("Helvetica","normal"),a.setFontSize(11),a.text("SANTIAGO DEL ESTERO",160,35,{align:"center"});const l=this.capitalize((new Date).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"}));a.text(l,160,40,{align:"center"}),o=50,i("BENEFICIARIO DE TARJETA SOCIAL",o),o+=2*e,t("DNI",this.form.dni),t("CUIL",this.form.cuil),t("Nombre",this.form.nombre),t("Fecha de Nacimiento",this.form.fecha_nacimiento),t("Sexo","F"===this.form.sexo?"Femenino":"Masculino"),t("Cantidad de Parientes",this.form.cant_parientes),t("Domicilio",this.form.domicilio),t("Departamento",this.obtenerDescripcion(this.departamentos,this.form.cod_dpto)),t("Localidad",this.obtenerDescripcion(this.localidades,this.form.cod_localidad)),t("Barrio",this.obtenerDescripcion(this.barrios,this.form.cod_barrio)),t("Estado",this.form.estado),t("Historial",this.form.observaciones||"-");for(const c of this.form.historias)t(c.fecha,c.observaciones);o+=e,this.parientesArray.length>0&&(a.setFont("Helvetica","bold"),a.text("-- Parientes --",20,o),o+=e,a.setFont("Helvetica","normal"),this.parientesArray.forEach(((t,i)=>{a.text(`${i+1}. DNI: ${t.dni||"-"} | Nombre: ${t.nombre||"-"}`,25,o),o+=e,a.text(`   Nacimiento: ${t.fecha_nacimiento||"-"} | Sexo: ${"F"===t.sexo?"Femenino":"M"===t.sexo?"Masculino":"-"}`,25,o),o+=e})),o+=e),t("Fecha de Registro",this.form.fecha_registro),t("Hora de Registro",this.form.hora_registro),t("Fecha de Modificación",this.form.fecha_modificacion),t("Hora de Modificación",this.form.hora_modificacion),a.save(`ficha_beneficiario_${this.form.dni}.pdf`)},obtenerDescripcion(a,e){const o=a.find((a=>a.cod_dpto===e||a.cod_localidad===e||a.cod_barrio===e));return o?o.descripcion:"-"},quitarArchivoMsg(){this.quitarArchivoMsgPopup=!0},manejarDocumento(a){const e=a.target.files[0];e&&(this.archivo={tipo:"documento",archivo:e,vistaPrevia:e.name.endsWith(".pdf")?"/recursos/logo-pdf.png":e.name.endsWith(".xls")?"/recursos/logo-xls.png":"/recursos/logo-docx.png",nombre:e.name})},async verTarjeta(){if(this.cargandoDatos=!0,this.form.dni)try{const{data:a}=await t.A.get("/tarjetas/getDatos",{params:{dni:this.form.dni}});a&&Object.keys(a).length>0?(this.tarjetaForm={...a},this.modalVisible=!0):this.mostrarMensaje("No se encontró una tarjeta asociada al DNI.")}catch(a){console.error(a),this.mostrarMensaje("Error al buscar la tarjeta.")}finally{this.cargandoDatos=!1}},async cargarDepartamentos(){try{const{data:a}=await t.A.get("/beneficiarios/departamentos");this.departamentos=a}catch(a){console.error("Error cargando departamentos",a)}},async cargarLocalidades(a){if(a)try{const{data:e}=await t.A.get("/beneficiarios/localidades",{params:{cod_dpto:a}});this.localidades=e}catch(e){console.error("Error cargando localidades",e)}},async cargarBarrios(a){if(a)try{const{data:e}=await t.A.get("/beneficiarios/barrios",{params:{cod_localidad:a}});this.barrios=e}catch(e){console.error("Error cargando barrios",e)}},mostrarMensaje(a){this.mensajePopup=!0,this.mensaje=a},actualizarParientes(a){const e=parseInt(a),o=[];for(let t=0;t<e;t++)o.push({dni:"",nombre:"",fecha_nacimiento:"",sexo:""});this.parientesArray=o},resetForm(){this.cuilInicio="",this.cuilFin="",this.form.nombre="",this.form.cuil="",this.form.fecha_nacimiento="",this.form.sexo="default",this.form.cod_dpto="default",this.form.cod_localidad="default",this.form.cod_barrio="default",this.form.domicilio="",this.form.fecha_registro="",this.form.hora_registro="",this.form.estado="default",this.form.fecha_modificacion="",this.form.hora_modificacion="",this.form.observaciones="",this.form.cant_parientes="",this.form.historias=[],this.form.importe_acreditado="",this.parientesArray=[],this.archivo=null,this.tieneTarjeta=!1,this.tarjetaForm={dni:"",num_cuenta:"",num_tarjeta:"",fecha_registro:"",estado:"",importe_acreditado:""}},async comprobarPadron(){this.cargandoDatos=!0,this.resetForm();try{const{data:a}=await t.A.get("/beneficiarios/getDatos",{params:{dni:this.form.dni}});if(a&&Object.keys(a).length>0){for(const e in a)e in this.form&&(this.form[e]=a[e],""!=this.form.cuil&&(this.cuilInicio=this.form.cuil.slice(0,2),this.cuilFin=this.form.cuil.slice(10)));a.archivo?this.archivo={tipo:a.archivo.endsWith(".pdf")||a.archivo.endsWith(".xls")||a.archivo.endsWith(".doc")||a.archivo.endsWith(".docx")?"documento":"imagen",nombre:a.archivo,vistaPrevia:a.archivo.endsWith(".pdf")?"/recursos/logo-pdf.png":a.archivo.endsWith(".xls")?"/recursos/logo-xls.png":a.archivo.endsWith(".doc")||a.archivo.endsWith(".docx")?"/recursos/logo-docx.png":`/uploads/${a.archivo}`,id:"archivo-servidor"}:this.archivo=null,null!=a.estado?this.tieneTarjeta=!0:this.tieneTarjeta=!1,a.cod_dpto&&(this.form.cod_dpto=a.cod_dpto,await this.cargarLocalidades(a.cod_dpto)),a.cod_localidad&&(this.form.cod_localidad=a.cod_localidad,await this.cargarBarrios(a.cod_localidad)),a.cod_barrio&&(this.form.cod_barrio=a.cod_barrio),this.mostrarMensaje("Datos cargados automáticamente.")}else this.mostrarMensaje("No se encontró el DNI en ninguna fuente.")}catch(a){console.error(a),this.mostrarMensaje("No se encontró el DNI en ninguna fuente.")}finally{this.botonModificacion=!0,this.cargandoDatos=!1,this.habilitarImprimir=!0}},async quitarArchivo(){this.quitarArchivoMsgPopup=!1,this.cargandoDatos=!0;try{await t.A.delete("/beneficiarios/quitarArchivo",{params:{dni:this.form.dni}}),this.archivo=null,this.form.archivo=null}catch(a){console.error(a),this.mostrarMensaje("Error al eliminar el archivo.")}finally{this.cargandoDatos=!1,this.mostrarMensaje("Archivo eliminado correctamente.")}},async cargarBeneficiario(){const a=new Date,e=a.toISOString().split("T")[0],o=a.toTimeString().split(" ")[0].slice(0,5);this.form.fecha_registro||(this.form.fecha_registro=e),this.form.hora_registro||(this.form.hora_registro=o),this.form.fecha_modificacion=e,this.form.hora_modificacion=o;const i=new FormData;i.append("beneficiario",JSON.stringify(this.form)),i.append("parientes",JSON.stringify(this.parientesArray)),i.append("archivo",null!=this.archivo?this.archivo.archivo:null);try{const a=await t.A.post("/beneficiarios/update",i,{headers:{"Content-Type":"multipart/form-data"}});a.data.success?this.mostrarMensaje("Beneficiario guardado correctamente."):this.mostrarMensaje("Error al guardar beneficiario.")}catch(s){console.error("Error al conectar con el servidor:",s),this.mostrarMensaje("Error de conexión.")}}}};const os=(0,M.A)(es,[["render",Di],["__scopeId","data-v-5e6436d5"]]);var ts=os;const is={class:"vista"},ss={key:0,class:"pantalla-carga-vista text-center"},rs={key:1,class:"mensaje-container-fondo"},ns={class:"mensaje-container"},ls={class:"mensaje"},cs={class:"container"},ds={class:"fila"},us={class:"w-5"},ms={class:"w-5 mt-auto"},ps={class:"fila"},fs={class:"w-100"},hs=["disabled"],bs={class:"fila"},ks={class:"w-5"},vs={class:"w-5"},gs={class:"fila"},Ls={class:"w-5"},js={class:"w-5"},_s={class:"fila"},ys={class:"w-5"},Cs=["disabled"],As={class:"w-5"},Es=["disabled"],Ss={class:"fila"},ws={class:"w-100"},Is=["disabled"],Fs={key:0,class:"w-100"},Ns={class:"historial"};function Ds(a,e,o,t,r,n){return(0,s.uX)(),(0,s.CE)("div",is,[r.cargandoDatos?((0,s.uX)(),(0,s.CE)("div",ss,e[13]||(e[13]=[(0,s.Lk)("div",{class:"logo-carga"},[(0,s.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,s.Lk)("div",{class:"texto-carga"},"Cargando...")],-1)]))):(0,s.Q3)("",!0),r.mensajePopup?((0,s.uX)(),(0,s.CE)("div",rs,[(0,s.Lk)("div",ns,[(0,s.Lk)("span",ls,(0,m.v_)(r.mensaje),1),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[0]||(e[0]=a=>{this.mensajePopup=!1,this.mensaje=""})},"Ok")])])):(0,s.Q3)("",!0),(0,s.Lk)("div",cs,[e[25]||(e[25]=(0,s.Lk)("h3",{class:"mt-2"},"Datos de Tarjeta Social",-1)),(0,s.Lk)("form",{class:"formulario-beneficiario",onSubmit:e[12]||(e[12]=(0,i.D$)(((...a)=>n.guardarTarjeta&&n.guardarTarjeta(...a)),["prevent"]))},[(0,s.Lk)("div",ds,[(0,s.Lk)("div",us,[e[14]||(e[14]=(0,s.Lk)("label",{for:"dni",class:"form-label"},"DNI",-1)),(0,s.bo)((0,s.Lk)("input",{id:"dni",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=a=>r.form.dni=a),type:"number",onKeydown:e[2]||(e[2]=(0,i.jR)((0,i.D$)(((...a)=>n.comprobarPadron&&n.comprobarPadron(...a)),["prevent"]),["enter"]))},null,544),[[i.Jo,r.form.dni]])]),(0,s.Lk)("div",ms,[(0,s.Lk)("button",{class:"btn-mensaje",type:"button",onClick:e[3]||(e[3]=(...a)=>n.comprobarPadron&&n.comprobarPadron(...a))},"Comprobar en padrón")])]),(0,s.Lk)("div",ps,[(0,s.Lk)("div",fs,[(0,s.Lk)("button",{type:"button",class:"btn-tarjeta",disabled:!a.botonModificacion,onClick:e[4]||(e[4]=e=>{r.habilitarModificacion=!0,a.habilitarImprimir=!0})},"Modificar Datos",8,hs)])]),(0,s.Lk)("div",bs,[(0,s.Lk)("div",ks,[e[15]||(e[15]=(0,s.Lk)("label",{for:"num_cuenta",class:"form-label"},"Número de Cuenta",-1)),(0,s.bo)((0,s.Lk)("input",{id:"num_cuenta",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=a=>r.form.num_cuenta=a),type:"text",disabled:!0},null,512),[[i.Jo,r.form.num_cuenta]])]),(0,s.Lk)("div",vs,[e[16]||(e[16]=(0,s.Lk)("label",{for:"num_tarjeta",class:"form-label"},"Número de Tarjeta",-1)),(0,s.bo)((0,s.Lk)("input",{id:"num_tarjeta",class:"form-control","onUpdate:modelValue":e[6]||(e[6]=a=>r.form.num_tarjeta=a),type:"text",disabled:!0},null,512),[[i.Jo,r.form.num_tarjeta]])])]),(0,s.Lk)("div",gs,[(0,s.Lk)("div",Ls,[e[17]||(e[17]=(0,s.Lk)("label",{for:"fecha_registro",class:"form-label"},"Fecha de Registro",-1)),(0,s.bo)((0,s.Lk)("input",{id:"fecha_registro",class:"form-control","onUpdate:modelValue":e[7]||(e[7]=a=>r.form.fecha_registro=a),type:"date",disabled:!0},null,512),[[i.Jo,r.form.fecha_registro]])]),(0,s.Lk)("div",js,[e[18]||(e[18]=(0,s.Lk)("label",{for:"fecha_modificacion",class:"form-label"},"Fecha de Modificación",-1)),(0,s.bo)((0,s.Lk)("input",{id:"fecha_modificacion",class:"form-control","onUpdate:modelValue":e[8]||(e[8]=a=>r.form.fecha_modificacion=a),type:"date",disabled:!0},null,512),[[i.Jo,r.form.fecha_modificacion]])])]),(0,s.Lk)("div",_s,[(0,s.Lk)("div",ys,[e[20]||(e[20]=(0,s.Lk)("label",{for:"estado",class:"form-label"},"Estado",-1)),(0,s.bo)((0,s.Lk)("select",{id:"estado",class:"form-select","onUpdate:modelValue":e[9]||(e[9]=a=>r.form.estado=a),disabled:!r.habilitarModificacion},e[19]||(e[19]=[(0,s.Fv)('<option disabled value="" data-v-07c2b06a>Seleccione</option><option value="SOLICITADA" data-v-07c2b06a>Solicitada</option><option value="PENDIENTE" data-v-07c2b06a>Pendiente</option><option value="ENTREGADA" data-v-07c2b06a>Entregada</option><option value="BAJA" data-v-07c2b06a>Baja</option>',5)]),8,Cs),[[i.u1,r.form.estado]])]),(0,s.Lk)("div",As,[e[21]||(e[21]=(0,s.Lk)("label",{for:"importe_acreditado",class:"form-label"},"Importe Acreditado",-1)),(0,s.bo)((0,s.Lk)("input",{id:"importe_acreditado",class:"form-control","onUpdate:modelValue":e[10]||(e[10]=a=>r.form.importe_acreditado=a),type:"number",step:"0.01",disabled:!r.habilitarModificacion},null,8,Es),[[i.Jo,r.form.importe_acreditado]])])]),(0,s.Lk)("div",Ss,[(0,s.Lk)("div",ws,[e[22]||(e[22]=(0,s.Lk)("label",{for:"observaciones",class:"form-label"},"Agregar Observación",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"observaciones",class:"form-control","onUpdate:modelValue":e[11]||(e[11]=a=>r.form.observaciones=a),disabled:!r.habilitarModificacion},null,8,Is),[[i.Jo,r.form.observaciones]])]),r.form.historias.length>0?((0,s.uX)(),(0,s.CE)("div",Fs,[e[23]||(e[23]=(0,s.Lk)("label",{for:"historial",class:"form-label"},"Historial",-1)),(0,s.Lk)("div",Ns,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.form.historias,((a,e)=>((0,s.uX)(),(0,s.CE)("span",{class:"w-100 block",key:e},[(0,s.Lk)("strong",null,(0,m.v_)(a.fecha),1),(0,s.eW)(" "+(0,m.v_)(a.observaciones),1)])))),128))])])):(0,s.Q3)("",!0)]),e[24]||(e[24]=(0,s.Lk)("div",{class:"fila"},[(0,s.Lk)("button",{type:"button",class:"btn-mensaje btn-imprimir"},"Imprimir"),(0,s.Lk)("button",{type:"submit",class:"btn-mensaje"},"Guardar")],-1))],32)])])}var xs={data(){return{form:{dni:"",num_cuenta:"",num_tarjeta:"",fecha_registro:"",estado:"",fecha_modificacion:"",importe_acreditado:"",observaciones:"",historias:[]},mensajePopup:!1,mensaje:"",cargandoDatos:!1,habilitarModificacion:!1}},methods:{async comprobarPadron(){this.cargandoDatos=!0;try{const{data:a}=await t.A.get("/tarjetas/getDatos",{params:{dni:this.form.dni}});if(a&&Object.keys(a).length>0){for(const e in a)e in this.form&&null!==a[e]&&void 0!==a[e]&&(this.form[e]=a[e]);this.mostrarMensaje("Datos encontrados y cargados.")}else this.mostrarMensaje("No se encontraron datos para ese DNI.")}catch(a){console.error(a),this.mostrarMensaje("Ocurrió un error al consultar el padrón.")}finally{this.botonModificacion=!0,this.cargandoDatos=!1,this.habilitarImprimir=!0}},mostrarMensaje(a){this.mensajePopup=!0,this.mensaje=a},async guardarTarjeta(){const a=new Date,e=a.toISOString().split("T")[0];this.form.fecha_registro||(this.form.fecha_registro=e),this.form.fecha_modificacion=e;try{const{data:a}=await t.A.post("/tarjetas/update",this.form);a.success?this.mostrarMensaje("Tarjeta guardada correctamente."):this.mostrarMensaje("No se pudo guardar la tarjeta.")}catch(o){console.error(o),this.mostrarMensaje("Error al guardar la tarjeta.")}}}};const Ms=(0,M.A)(xs,[["render",Ds],["__scopeId","data-v-07c2b06a"]]);var Ts=Ms;const Ps={class:"vista"},Us={class:"container"},Xs={class:"seccion"},Vs={class:"fila"},Os={class:"seccion"},$s={class:"fila"};function qs(a,e,o,t,i,r){return(0,s.uX)(),(0,s.CE)("div",Ps,[(0,s.Lk)("div",Us,[e[11]||(e[11]=(0,s.Lk)("h3",{class:"mt-2"},"Generar Informes",-1)),(0,s.Lk)("section",Xs,[e[9]||(e[9]=(0,s.Lk)("h4",{class:"subtitulo"},"Beneficiarios",-1)),(0,s.Lk)("div",Vs,[(0,s.Lk)("button",{class:"btn-opcion",onClick:e[0]||(e[0]=a=>r.generar("beneficiarios","todo"))},"Todo"),(0,s.Lk)("button",{class:"btn-opcion",onClick:e[1]||(e[1]=a=>r.generar("beneficiarios","capital"))},"Capital"),(0,s.Lk)("button",{class:"btn-opcion",onClick:e[2]||(e[2]=a=>r.generar("beneficiarios","banda"))},"Banda"),(0,s.Lk)("button",{class:"btn-opcion",onClick:e[3]||(e[3]=a=>r.generar("beneficiarios","interior"))},"Interior")])]),(0,s.Lk)("section",Os,[e[10]||(e[10]=(0,s.Lk)("h4",{class:"subtitulo"},"Tarjetas Sociales",-1)),(0,s.Lk)("div",$s,[(0,s.Lk)("button",{class:"btn-opcion",onClick:e[4]||(e[4]=a=>r.generar("tarjetas","todo"))},"Todo"),(0,s.Lk)("button",{class:"btn-opcion",onClick:e[5]||(e[5]=a=>r.generar("tarjetas","capital"))},"Capital"),(0,s.Lk)("button",{class:"btn-opcion",onClick:e[6]||(e[6]=a=>r.generar("tarjetas","banda"))},"Banda"),(0,s.Lk)("button",{class:"btn-opcion",onClick:e[7]||(e[7]=a=>r.generar("tarjetas","interior"))},"Interior"),(0,s.Lk)("button",{class:"btn-opcion",onClick:e[8]||(e[8]=a=>r.generar("tarjetas","ncaja"))},"N° Caja")])])])])}var Js={methods:{generar(a,e){console.log(`Generar PDF: ${a} - ${e}`)}}};const Ws=(0,M.A)(Js,[["render",qs],["__scopeId","data-v-18916563"]]);var Rs=Ws;const Qs={class:"vista"},Bs={key:0,class:"pantalla-carga-vista"},zs={key:1,class:"mensaje-container-fondo"},Gs={class:"mensaje-container"},Hs={class:"mensaje"},Ks={class:"container"},Ys=["href"],Zs=["href"],ar=["onClick"];function er(a,e,o,t,r,n){return(0,s.uX)(),(0,s.CE)("div",Qs,[r.cargandoDatos?((0,s.uX)(),(0,s.CE)("div",Bs,e[10]||(e[10]=[(0,s.Lk)("div",{class:"logo-carga"},[(0,s.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,s.Lk)("div",{class:"texto-carga"},"Cargando...")],-1)]))):(0,s.Q3)("",!0),r.mensajePopup?((0,s.uX)(),(0,s.CE)("div",zs,[(0,s.Lk)("div",Gs,[(0,s.Lk)("span",Hs,(0,m.v_)(r.mensaje),1),(0,s.Lk)("button",{class:"btn btn-primario",onClick:e[0]||(e[0]=a=>{r.mensajePopup=!1,r.mensaje=""})},"Ok")])])):(0,s.Q3)("",!0),r.form_solicitud?((0,s.uX)(),(0,s.CE)("div",{key:2,class:"form-solicitud-bg",onClick:e[7]||(e[7]=(...a)=>n.resetForm&&n.resetForm(...a))},[(0,s.Lk)("form",{onSubmit:e[5]||(e[5]=(0,i.D$)(((...a)=>n.responderSolicitud&&n.responderSolicitud(...a)),["prevent"])),onClick:e[6]||(e[6]=(0,i.D$)((()=>{}),["stop"])),class:"form-solicitud-container"},[e[12]||(e[12]=(0,s.Lk)("h3",{class:"titulo-form"},"Responder Solicitud",-1)),e[13]||(e[13]=(0,s.Lk)("label",{for:"id"},"ID",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"id","onUpdate:modelValue":e[1]||(e[1]=a=>r.form.id=a),disabled:"",class:"form-control"},null,512),[[i.Jo,r.form.id]]),e[14]||(e[14]=(0,s.Lk)("label",{for:"dni"},"DNI",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"dni","onUpdate:modelValue":e[2]||(e[2]=a=>r.form.dni=a),disabled:"",class:"form-control"},null,512),[[i.Jo,r.form.dni]]),e[15]||(e[15]=(0,s.Lk)("label",{for:"estado",class:"form-label"},"Estado",-1)),(0,s.bo)((0,s.Lk)("select",{id:"estado",class:"form-select","onUpdate:modelValue":e[3]||(e[3]=a=>r.form.estado=a)},e[11]||(e[11]=[(0,s.Fv)('<option disabled value="default" data-v-1796cb22>Seleccione</option><option value="SOLICITADA" data-v-1796cb22>Solicitada</option><option value="PENDIENTE" data-v-1796cb22>Pendiente</option><option value="ENTREGADA" data-v-1796cb22>Entregada</option><option value="BAJA" data-v-1796cb22>Baja</option>',5)]),512),[[i.u1,r.form.estado]]),e[16]||(e[16]=(0,s.Lk)("label",{for:"observacion",class:"form-label"},"Observación",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"observacion",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=a=>r.form.observacion=a)},null,512),[[i.Jo,r.form.observacion]]),e[17]||(e[17]=(0,s.Lk)("button",{class:"btn btn-primario",type:"submit"},"Guardar",-1))],32)])):(0,s.Q3)("",!0),(0,s.Lk)("div",Ks,[e[18]||(e[18]=(0,s.Lk)("h3",{class:"titulo-pagina"},"Gestionar Solicitudes",-1)),(0,s.bo)((0,s.Lk)("input",{class:"form-control buscador",type:"number",placeholder:"Buscar por ID o DNI","onUpdate:modelValue":e[8]||(e[8]=a=>r.buscar=a),onChange:e[9]||(e[9]=(...a)=>n.filtrarSolicitudes&&n.filtrarSolicitudes(...a))},null,544),[[i.Jo,r.buscar]]),e[19]||(e[19]=(0,s.Lk)("div",{class:"solicitud-encabezado"},[(0,s.Lk)("span",null,"ID"),(0,s.Lk)("span",null,"DNI"),(0,s.Lk)("span",null,"Fecha"),(0,s.Lk)("span",null,"Foto DNI"),(0,s.Lk)("span",null,"Historial Médico"),(0,s.Lk)("span",null,"Estado"),(0,s.Lk)("span",null,"Acción")],-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.solicitudesFiltradas,((a,e)=>((0,s.uX)(),(0,s.CE)("div",{class:"solicitud-item",key:e},[(0,s.Lk)("span",null,(0,m.v_)(a.id),1),(0,s.Lk)("span",null,(0,m.v_)(a.dni),1),(0,s.Lk)("span",null,(0,m.v_)(n.formatearFecha(a.fecha_solicitud)),1),(0,s.Lk)("a",{class:"btn btn-secundario",href:"https://nazadoto.com:3500/get/descargar?path="+a.path_dni}," Ver ",8,Ys),(0,s.Lk)("a",{class:"btn btn-secundario",href:"https://nazadoto.com:3500/get/descargar?path="+a.path_historial_medico}," Ver ",8,Zs),(0,s.Lk)("span",{class:(0,m.C4)(n.estadoClass(a.estado))},(0,m.v_)(a.estado),3),(0,s.Lk)("a",{class:"btn btn-primario",onClick:e=>n.responder(a)},"Responder",8,ar)])))),128))])])}var or={data(){return{cargandoDatos:!1,mensajePopup:!1,form_solicitud:!1,form:{id:"",dni:"",estado:"default",observacion:""},mensaje:"",solicitudes:[],buscar:""}},methods:{async responderSolicitud(){this.cargandoDatos=!0;try{await t.A.post("/tarjetas/actualizarSolicitud",{params:{form:this.form}}),this.resetForm(),this.fetchSolicitudes(),this.filtrarSolicitudes()}catch(a){console.log(a)}finally{this.cargandoDatos=!1}},resetForm(){this.form_solicitud=!1,this.form={id:"",dni:"",estado:"default",observacion:""}},responder(a){this.form_solicitud=!0,this.form.id=a.id,this.form.estado=a.estado,this.form.dni=a.dni},async fetchSolicitudes(){this.cargandoDatos=!0;try{const a=await t.A.get("/tarjetas/getSolicitudes");this.solicitudes=a.data[0]}catch(a){console.log(a)}finally{this.cargandoDatos=!1}},formatearFecha(a){return new Date(a).toLocaleDateString("es-AR",{day:"2-digit",month:"2-digit",year:"2-digit"})},filtrarSolicitudes(){const a=this.buscar.toString().toLowerCase();this.solicitudesFiltradas=this.solicitudes.filter((e=>e.id.toString().includes(a)||e.dni.toString().includes(a)))},estadoClass(a){return{"estado-pendiente":"PENDIENTE"===a,"estado-entregada":"ENTREGADA"===a,"estado-baja":"BAJA"===a,"estado-solicitada":"SOLICITADA"===a}}},async mounted(){await this.fetchSolicitudes()},computed:{solicitudesFiltradas(){if(!this.buscar)return this.solicitudes;const a=this.buscar.toString().toLowerCase();return this.solicitudes.filter((e=>e.id.toString().includes(a)||e.dni.toString().includes(a)))}}};const tr=(0,M.A)(or,[["render",er],["__scopeId","data-v-1796cb22"]]);var ir=tr;const sr={class:"flex-inline"},rr={key:0,class:"pantalla-carga text-center"};function nr(a,e,o,t,i,r){const n=(0,s.g2)("SidebarAdminComponent"),l=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",sr,[i.cargando?((0,s.uX)(),(0,s.CE)("div",rr,e[0]||(e[0]=[(0,s.Lk)("div",{class:"logo-carga"},[(0,s.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:"Logo"}),(0,s.Lk)("div",{class:"texto-carga c-black"},"Cargando...")],-1)]))):(0,s.Q3)("",!0),(0,s.bF)(n),(0,s.bF)(l,{class:"vista"})])}const lr={key:0,class:"mensaje-container-fondo"},cr={class:"mensaje-container"},dr={class:"modal-botones"},ur={class:"contenedor"},mr={class:"contenedor-botones"};function pr(a,e,o,t,i,r){const n=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",null,[i.mostrarModal?((0,s.uX)(),(0,s.CE)("div",lr,[(0,s.Lk)("div",cr,[e[3]||(e[3]=(0,s.Lk)("span",{class:"mensaje"},"¿Cerrar sesión?",-1)),(0,s.Lk)("div",dr,[(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[0]||(e[0]=a=>this.mostrarModal=!1)},"No"),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[1]||(e[1]=(...a)=>r.cerrarSesion&&r.cerrarSesion(...a))},"Si")])])])):(0,s.Q3)("",!0),(0,s.Lk)("div",ur,[(0,s.Lk)("div",mr,[e[7]||(e[7]=(0,s.Lk)("a",{href:"/admin",class:"sidebar-header"},[(0,s.Lk)("img",{src:"/recursos/logomds.png",class:"mv-auto img-logo",alt:""}),(0,s.Lk)("h4",{class:"white text-center"},[(0,s.eW)("Tarjetas"),(0,s.Lk)("br"),(0,s.eW)("Sociales")])],-1)),e[8]||(e[8]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",null,[(0,s.bF)(n,{class:(0,m.C4)(["item-btn",{active:"/admin"==a.$route.path}]),to:"/admin"},{default:(0,s.k6)((()=>e[4]||(e[4]=[(0,s.eW)("Inicio")]))),_:1},8,["class"])]),(0,s.Lk)("div",null,[(0,s.bF)(n,{class:(0,m.C4)(["item-btn",{active:"/admin/usuarios"===a.$route.path}]),to:"/admin/usuarios"},{default:(0,s.k6)((()=>e[5]||(e[5]=[(0,s.eW)("Usuarios")]))),_:1},8,["class"])]),(0,s.Lk)("div",null,[(0,s.bF)(n,{class:(0,m.C4)(["item-btn",{active:"/admin/noticias"===a.$route.path}]),to:"/admin/noticias"},{default:(0,s.k6)((()=>e[6]||(e[6]=[(0,s.eW)("Noticias")]))),_:1},8,["class"])]),(0,s.Lk)("button",{class:"item-btn mt-4",onClick:e[2]||(e[2]=(...a)=>r.cerrarSesionModal&&r.cerrarSesionModal(...a))},"Cerrar Sesión")])])])}var fr={data(){return{mostrarModal:!1}},methods:{cerrarSesionModal(){this.mostrarModal=!0},cerrarSesion(){this.mostrarModal=!1,localStorage.clear(),aa.emit("usuarioDeslogueado"),fn.push("/")}}};const hr=(0,M.A)(fr,[["render",pr],["__scopeId","data-v-e18311f6"]]);var br=hr,kr={components:{SidebarAdminComponent:br},data(){return{cargando:!1}}};const vr=(0,M.A)(kr,[["render",nr],["__scopeId","data-v-576b0938"]]);var gr=vr;const Lr={class:"vista"},jr={class:"container"},_r={class:"mt-2"},yr={class:"tarjetas-inicio"};function Cr(a,e,o,t,i,r){return(0,s.uX)(),(0,s.CE)("div",Lr,[(0,s.Lk)("div",jr,[(0,s.Lk)("h3",_r,"Bienvenid@, "+(0,m.v_)(i.usuario.usuario?.toUpperCase()),1),e[4]||(e[4]=(0,s.Lk)("p",{class:"lead"},"Desde aquí podés acceder a las principales funciones de gestión del sistema.",-1)),(0,s.Lk)("div",yr,[(0,s.Lk)("div",{class:"card acceso",onClick:e[0]||(e[0]=e=>a.$router.push("/admin/usuarios"))},e[2]||(e[2]=[(0,s.Lk)("h5",null,"Gestionar Usuarios",-1),(0,s.Lk)("p",null,"Ver y modificar la información de los usuarios.",-1)])),(0,s.Lk)("div",{class:"card acceso",onClick:e[1]||(e[1]=e=>a.$router.push("/admin/noticias"))},e[3]||(e[3]=[(0,s.Lk)("h5",null,"Gestionar Noticias",-1),(0,s.Lk)("p",null,"Subir y modificar noticias.",-1)]))])])])}var Ar={data(){return{usuario:""}},props:{tieneTarjeta:{type:String,default:null}},mounted(){this.usuario=JSON.parse(localStorage.getItem("user"))}};const Er=(0,M.A)(Ar,[["render",Cr],["__scopeId","data-v-96911f7a"]]);var Sr=Er;const wr={class:"vista"},Ir={key:0,class:"pantalla-carga text-center"},Fr={key:1,class:"mensaje-container-fondo"},Nr={class:"mensaje-container"},Dr={class:"mensaje"},xr={class:"container"},Mr={class:"tabla-usuarios"},Tr=["onUpdate:modelValue"],Pr=["onUpdate:modelValue"],Ur=["onUpdate:modelValue"],Xr=["onUpdate:modelValue"],Vr=["onClick"];function Or(a,e,o,t,r,n){return(0,s.uX)(),(0,s.CE)("div",wr,[r.cargando?((0,s.uX)(),(0,s.CE)("div",Ir,e[1]||(e[1]=[(0,s.Lk)("div",{class:"logo-carga"},[(0,s.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:"Logo"}),(0,s.Lk)("div",{class:"texto-carga"},"Cargando...")],-1)]))):(0,s.Q3)("",!0),r.mensajePopup?((0,s.uX)(),(0,s.CE)("div",Fr,[(0,s.Lk)("div",Nr,[(0,s.Lk)("span",Dr,(0,m.v_)(r.mensaje),1),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[0]||(e[0]=a=>{r.mensajePopup=!1,r.mensaje=""})}," Ok ")])])):(0,s.Q3)("",!0),(0,s.Lk)("div",xr,[e[4]||(e[4]=(0,s.Lk)("h3",{class:"mt-2"},"Gestión de Usuarios",-1)),(0,s.Lk)("table",Mr,[e[3]||(e[3]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"ID"),(0,s.Lk)("th",null,"Usuario"),(0,s.Lk)("th",null,"Correo"),(0,s.Lk)("th",null,"DNI"),(0,s.Lk)("th",null,"Rol"),(0,s.Lk)("th",null,"Fecha Registro"),(0,s.Lk)("th",null,"Acciones")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.usuarios,(a=>((0,s.uX)(),(0,s.CE)("tr",{key:a.id},[(0,s.Lk)("td",null,(0,m.v_)(a.id),1),(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e=>a.usuario=e,class:"input-tabla"},null,8,Tr),[[i.Jo,a.usuario]])]),(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e=>a.correo=e,class:"input-tabla"},null,8,Pr),[[i.Jo,a.correo]])]),(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e=>a.dni=e,class:"input-tabla"},null,8,Ur),[[i.Jo,a.dni]])]),(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":e=>a.rol=e,class:"input-tabla"},e[2]||(e[2]=[(0,s.Lk)("option",{value:"0"},"Beneficiario",-1),(0,s.Lk)("option",{value:"1"},"Empleado",-1),(0,s.Lk)("option",{value:"2"},"Administrador",-1)]),8,Xr),[[i.u1,a.rol]])]),(0,s.Lk)("td",null,(0,m.v_)(n.formatearFecha(a.fecha_registro)),1),(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"btn-guardar",onClick:e=>n.guardarUsuario(a)}," Guardar ",8,Vr)])])))),128))])])])])}var $r={data(){return{cargando:!1,mensajePopup:!1,mensaje:"",usuarios:[]}},methods:{formatearFecha(a){return new Date(a).toLocaleDateString("es-AR",{day:"2-digit",month:"2-digit",year:"2-digit"})},async fetchUsuarios(){this.cargando=!0;try{const a=await t.A.get("/get/usuarios");this.usuarios=a.data[0]}catch(a){this.mensaje="Error al cargar usuarios."+a,this.mensajePopup=!0}finally{this.cargando=!1}},async guardarUsuario(a){this.cargando=!0;try{await t.A.post("/beneficiarios/updateUsuario",{usuario:a}),this.mensaje="Usuario actualizado correctamente.",this.mensajePopup=!0}catch(e){this.mensaje="Error al actualizar usuario.",this.mensajePopup=!0}finally{this.cargando=!1}}},mounted(){this.fetchUsuarios()}};const qr=(0,M.A)($r,[["render",Or],["__scopeId","data-v-5bc688ec"]]);var Jr=qr;const Wr={class:"vista"},Rr={key:0,class:"pantalla-carga text-center"},Qr={key:1,class:"mensaje-container-fondo"},Br={class:"mensaje-container"},zr={class:"mensaje"},Gr={class:"container"},Hr={class:"tabla-usuarios"},Kr=["onUpdate:modelValue"],Yr=["onUpdate:modelValue"],Zr=["onChange"],an=["src"],en=["onClick"],on=["onClick"],tn={key:2,class:"modal-fondo"},sn={class:"modal-contenido"},rn={class:"mt-2"};function nn(a,e,o,t,r,n){return(0,s.uX)(),(0,s.CE)("div",Wr,[r.cargando?((0,s.uX)(),(0,s.CE)("div",Rr,e[7]||(e[7]=[(0,s.Lk)("div",{class:"logo-carga"},[(0,s.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:"Logo"}),(0,s.Lk)("div",{class:"texto-carga"},"Cargando...")],-1)]))):(0,s.Q3)("",!0),r.mensajePopup?((0,s.uX)(),(0,s.CE)("div",Qr,[(0,s.Lk)("div",Br,[(0,s.Lk)("span",zr,(0,m.v_)(r.mensaje),1),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[0]||(e[0]=a=>{r.mensajePopup=!1,r.mensaje=""})}," Ok ")])])):(0,s.Q3)("",!0),(0,s.Lk)("div",Gr,[e[9]||(e[9]=(0,s.Lk)("h3",{class:"mt-2"},"Gestión de Noticias",-1)),(0,s.Lk)("button",{class:"btn-agregar",onClick:e[1]||(e[1]=(...a)=>n.abrirAgregar&&n.abrirAgregar(...a))},"Agregar Noticia"),(0,s.Lk)("table",Hr,[e[8]||(e[8]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"ID"),(0,s.Lk)("th",null,"Título"),(0,s.Lk)("th",null,"Contenido"),(0,s.Lk)("th",null,"Imagen"),(0,s.Lk)("th",null,"Fecha"),(0,s.Lk)("th",null,"Acciones")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.noticias,(a=>((0,s.uX)(),(0,s.CE)("tr",{key:a.id},[(0,s.Lk)("td",null,(0,m.v_)(a.id),1),(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e=>a.titulo=e,class:"input-tabla"},null,8,Kr),[[i.Jo,a.titulo]])]),(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e=>a.contenido=e,class:"input-tabla"},null,8,Yr),[[i.Jo,a.contenido]])]),(0,s.Lk)("td",null,[(0,s.Lk)("input",{type:"file",onChange:e=>n.onFileChange(e,a)},null,40,Zr),a.imagen?((0,s.uX)(),(0,s.CE)("img",{key:0,src:a.imagen,width:"50",alt:"Imagen"},null,8,an)):(0,s.Q3)("",!0)]),(0,s.Lk)("td",null,(0,m.v_)(n.formatearFecha(a.fecha)),1),(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"btn-guardar",onClick:e=>n.editarNoticia(a)},"Guardar",8,en),(0,s.Lk)("button",{class:"btn-eliminar",onClick:e=>n.eliminarNoticia(a.id)},"Eliminar",8,on)])])))),128))])])]),r.mostrarAgregar?((0,s.uX)(),(0,s.CE)("div",tn,[(0,s.Lk)("div",sn,[e[10]||(e[10]=(0,s.Lk)("h4",null,"Agregar Noticia",-1)),(0,s.bo)((0,s.Lk)("input",{id:"titulo","onUpdate:modelValue":e[2]||(e[2]=a=>r.nuevaNoticia.titulo=a),placeholder:"Título",class:"input-tabla"},null,512),[[i.Jo,r.nuevaNoticia.titulo]]),(0,s.bo)((0,s.Lk)("textarea",{id:"contenido","onUpdate:modelValue":e[3]||(e[3]=a=>r.nuevaNoticia.contenido=a),placeholder:"Contenido",class:"input-tabla"},null,512),[[i.Jo,r.nuevaNoticia.contenido]]),(0,s.Lk)("input",{id:"imagen",type:"file",onChange:e[4]||(e[4]=a=>n.onFileChangeNueva(a)),accept:".jpg, .png, .jpeg"},null,32),(0,s.Lk)("div",rn,[(0,s.Lk)("button",{class:"btn-guardar",onClick:e[5]||(e[5]=(...a)=>n.agregarNoticia&&n.agregarNoticia(...a))},"Agregar"),(0,s.Lk)("button",{class:"btn",onClick:e[6]||(e[6]=(...a)=>n.cerrarAgregar&&n.cerrarAgregar(...a))},"Cancelar")])])])):(0,s.Q3)("",!0)])}var ln={data(){return{cargando:!1,mensajePopup:!1,mensaje:"",noticias:[],nuevaNoticia:{titulo:"",contenido:"",imagen:null},mostrarAgregar:!1}},methods:{formatearFecha(a){return new Date(a).toLocaleDateString("es-AR",{day:"2-digit",month:"2-digit",year:"2-digit"})},async fetchNoticias(){this.cargando=!0;try{const a=await t.A.get("/noticias/get");this.noticias=a.data[0]}catch(a){this.mensaje="Error al cargar noticias."+a,this.mensajePopup=!0}finally{this.cargando=!1}},onFileChange(a,e){e.imagenFile=a.target.files[0]},onFileChangeNueva(a){this.nuevaNoticia.imagenFile=a.target.files[0]},abrirAgregar(){this.mostrarAgregar=!0},cerrarAgregar(){this.mostrarAgregar=!1,this.nuevaNoticia={titulo:"",contenido:"",imagen:null}},async agregarNoticia(){try{const a=new FormData;a.append("titulo",this.nuevaNoticia.titulo),a.append("contenido",this.nuevaNoticia.contenido),this.nuevaNoticia.imagenFile&&a.append("imagen",this.nuevaNoticia.imagenFile),await t.A.post("/noticias/agregar",a,{headers:{"Content-Type":"multipart/form-data"}}),this.mensaje="Noticia agregada correctamente.",this.mensajePopup=!0,this.cerrarAgregar(),this.fetchNoticias()}catch(a){this.mensaje="Error al agregar noticia."+a,this.mensajePopup=!0}},async editarNoticia(a){try{const e=new FormData;e.append("id",a.id),e.append("titulo",a.titulo),e.append("contenido",a.contenido),a.imagenFile&&e.append("imagen",a.imagenFile),await t.A.post("/noticias/editar",e,{headers:{"Content-Type":"multipart/form-data"}}),this.mensaje="Noticia actualizada correctamente.",this.mensajePopup=!0,this.fetchNoticias()}catch(e){this.mensaje="Error al editar noticia."+e,this.mensajePopup=!0}},async eliminarNoticia(a){try{await t.A.post("/noticias/eliminar",{id:a}),this.mensaje="Noticia eliminada correctamente.",this.mensajePopup=!0,this.fetchNoticias()}catch(e){this.mensaje="Error al eliminar noticia."+e,this.mensajePopup=!0}}},mounted(){this.fetchNoticias()}};const cn=(0,M.A)(ln,[["render",nn],["__scopeId","data-v-baa639b4"]]);var dn=cn;function un(){const a=JSON.parse(localStorage.getItem("user"));return a}const mn=[{path:"/",component:V,meta:{requiresAuth:!1}},{path:"/login",component:ta},{path:"/registrar",component:_a,meta:{requiresAuth:!1}},{path:"/requisitos",component:wa,meta:{requiresAuth:!1}},{path:"/admin",component:gr,meta:{requiresAuth:!0,role:2},children:[{path:"",component:Sr,meta:{requiresAuth:!0,role:2}},{path:"usuarios",component:Jr,meta:{requiresAuth:!0,role:2}},{path:"noticias",component:dn,meta:{requiresAuth:!0,role:2}}]},{path:"/empleado",component:Ro,meta:{requiresAuth:!0,role:1},children:[{path:"",component:Zo,meta:{requiresAuth:!0,role:1}},{path:"beneficiarios",component:ts,meta:{requiresAuth:!0,role:1}},{path:"tarjetas",component:Ts,meta:{requiresAuth:!0,role:1}},{path:"solicitudes",component:ir,meta:{requiresAuth:!0,role:1}},{path:"informes",component:Rs,meta:{requiresAuth:!0,role:1}}]},{path:"/beneficiario",component:Ra,meta:{requiresAuth:!0,role:0},children:[{path:"",component:Za,meta:{requiresAuth:!0,role:0}},{path:"solicitud",component:Fo,meta:{requiresAuth:!0,role:0}},{path:"tarjeta",component:Se,meta:{requiresAuth:!0,role:0}}]},{path:"/:catchAll(.*)",redirect:"/"}],pn=(0,u.aE)({history:(0,u.LA)(),routes:mn,linkActiveClass:"active",linkExactActiveClass:"active"});pn.beforeEach(((a,e,o)=>{const t=un();if("/login"===a.path&&t)switch(t.rol){case 0:return o("/beneficiario");case 1:return o("/empleado");case 2:return o("/admin");default:return o()}if(a.meta.requiresAuth){if(!t)return o("/login");if(void 0!==a.meta.role&&a.meta.role!==t.rol)return o("/login")}return o()}));var fn=pn,hn={data(){return{usuario:null,logueado:!1}},mounted(){this.obtenerUsuario(),aa.on("usuarioLogueado",this.obtenerUsuario),aa.on("usuarioDeslogueado",this.obtenerUsuario)},unmounted(){aa.off("usuarioLogueado",this.obtenerUsuario),aa.off("usuarioDeslogueado",this.obtenerUsuario)},methods:{obtenerUsuario(){this.usuario=JSON.parse(localStorage.getItem("user")),this.logueado=null!=this.usuario},redireccionarInicio(){switch(console.log(this.usuario),this.usuario.rol){case 0:fn.push("/beneficiario");break;case 1:fn.push("/empleado");break;case 2:fn.push("/admin");break}}}};const bn=(0,M.A)(hn,[["render",d],["__scopeId","data-v-2daea626"]]);var kn=bn,vn={name:"App",components:{NavbarPublicoComponent:kn}};const gn=(0,M.A)(vn,[["render",n]]);var Ln=gn;const jn="prod";t.A.defaults.baseURL="dev"==jn?"http://192.168.1.182:3500":"https://nazadoto.com:3500";const _n=(0,i.Ef)(Ln);_n.use(fn),_n.mount("#app")}},e={};function o(t){var i=e[t];if(void 0!==i)return i.exports;var s=e[t]={exports:{}};return a[t].call(s.exports,s,s.exports,o),s.exports}o.m=a,function(){var a=[];o.O=function(e,t,i,s){if(!t){var r=1/0;for(d=0;d<a.length;d++){t=a[d][0],i=a[d][1],s=a[d][2];for(var n=!0,l=0;l<t.length;l++)(!1&s||r>=s)&&Object.keys(o.O).every((function(a){return o.O[a](t[l])}))?t.splice(l--,1):(n=!1,s<r&&(r=s));if(n){a.splice(d--,1);var c=i();void 0!==c&&(e=c)}}return e}s=s||0;for(var d=a.length;d>0&&a[d-1][2]>s;d--)a[d]=a[d-1];a[d]=[t,i,s]}}(),function(){o.n=function(a){var e=a&&a.__esModule?function(){return a["default"]}:function(){return a};return o.d(e,{a:e}),e}}(),function(){var a,e=Object.getPrototypeOf?function(a){return Object.getPrototypeOf(a)}:function(a){return a.__proto__};o.t=function(t,i){if(1&i&&(t=this(t)),8&i)return t;if("object"===typeof t&&t){if(4&i&&t.__esModule)return t;if(16&i&&"function"===typeof t.then)return t}var s=Object.create(null);o.r(s);var r={};a=a||[null,e({}),e([]),e(e)];for(var n=2&i&&t;"object"==typeof n&&!~a.indexOf(n);n=e(n))Object.getOwnPropertyNames(n).forEach((function(a){r[a]=function(){return t[a]}}));return r["default"]=function(){return t},o.d(s,r),s}}(),function(){o.d=function(a,e){for(var t in e)o.o(e,t)&&!o.o(a,t)&&Object.defineProperty(a,t,{enumerable:!0,get:e[t]})}}(),function(){o.f={},o.e=function(a){return Promise.all(Object.keys(o.f).reduce((function(e,t){return o.f[t](a,e),e}),[]))}}(),function(){o.u=function(a){return"js/"+a+"."+{125:"89219218",353:"3f087b68",427:"d5d9d70d"}[a]+".js"}}(),function(){o.miniCssF=function(a){}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(a){if("object"===typeof window)return window}}()}(),function(){o.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)}}(),function(){var a={},e="sgts-web:";o.l=function(t,i,s,r){if(a[t])a[t].push(i);else{var n,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==t||u.getAttribute("data-webpack")==e+s){n=u;break}}n||(l=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,o.nc&&n.setAttribute("nonce",o.nc),n.setAttribute("data-webpack",e+s),n.src=t),a[t]=[i];var m=function(e,o){n.onerror=n.onload=null,clearTimeout(p);var i=a[t];if(delete a[t],n.parentNode&&n.parentNode.removeChild(n),i&&i.forEach((function(a){return a(o)})),e)return e(o)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=m.bind(null,n.onerror),n.onload=m.bind(null,n.onload),l&&document.head.appendChild(n)}}}(),function(){o.r=function(a){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})}}(),function(){o.p="/"}(),function(){var a={524:0};o.f.j=function(e,t){var i=o.o(a,e)?a[e]:void 0;if(0!==i)if(i)t.push(i[2]);else{var s=new Promise((function(o,t){i=a[e]=[o,t]}));t.push(i[2]=s);var r=o.p+o.u(e),n=new Error,l=function(t){if(o.o(a,e)&&(i=a[e],0!==i&&(a[e]=void 0),i)){var s=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;n.message="Loading chunk "+e+" failed.\n("+s+": "+r+")",n.name="ChunkLoadError",n.type=s,n.request=r,i[1](n)}};o.l(r,l,"chunk-"+e,e)}},o.O.j=function(e){return 0===a[e]};var e=function(e,t){var i,s,r=t[0],n=t[1],l=t[2],c=0;if(r.some((function(e){return 0!==a[e]}))){for(i in n)o.o(n,i)&&(o.m[i]=n[i]);if(l)var d=l(o)}for(e&&e(t);c<r.length;c++)s=r[c],o.o(a,s)&&a[s]&&a[s][0](),a[s]=0;return o.O(d)},t=self["webpackChunksgts_web"]=self["webpackChunksgts_web"]||[];t.forEach(e.bind(null,0)),t.push=e.bind(null,t.push.bind(t))}();var t=o.O(void 0,[504],(function(){return o(7282)}));t=o.O(t)})();
//# sourceMappingURL=app.a7fbf551.js.map