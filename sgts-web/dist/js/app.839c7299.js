(function(){"use strict";var a={5717:function(a,e,o){var t=o(4373),i=o(5130),s=o(6768);const r={class:"body"};function n(a,e,o,t,i,n){const l=(0,s.g2)("NavbarPublicoComponent"),c=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",r,["/"===a.$route.path||"/login"===a.$route.path||"/contacto"===a.$route.path||"/registrar"===a.$route.path||"/requisitos"===a.$route.path||"/noticias"===a.$route.path||/^\/noticia(\/.*)?$/.test(a.$route.path)?((0,s.uX)(),(0,s.Wv)(l,{key:0})):(0,s.Q3)("",!0),(0,s.bF)(c)])}o(8077);const l={class:"barra-navegacion"},c={class:"ancho-pag fondo-nav c-white"};function d(a,e,o,t,i,r){const n=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("nav",l,[(0,s.Lk)("div",c,[e[2]||(e[2]=(0,s.Lk)("a",{href:"/",class:"flex"},[(0,s.Lk)("img",{src:"/recursos/logomds.png",class:"mv-auto img-logo",alt:""}),(0,s.Lk)("h1",{class:"mb-0 p-3 titulo-navbar"},"Tarjetas Sociales")],-1)),i.logueado?"/"==a.$route.path?((0,s.uX)(),(0,s.CE)("button",{key:1,class:"btn btn-ingresar",onClick:e[0]||(e[0]=(...a)=>r.redireccionarInicio&&r.redireccionarInicio(...a))},"Inicio")):(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(n,{key:0,class:"btn-ingresar",to:"/login"},{default:(0,s.k6)((()=>e[1]||(e[1]=[(0,s.eW)("Iniciar sesión")]))),_:1}))])])])}o(4114);var u=o(1387),m=o(4232),p=o.p+"img/ministerio-banner.b61e6216.jpg";const h={class:"ancho-pag"},f={key:0,class:"noticias"},b={class:"noticia-destacada"},k=["src"],v={class:"noticia-titulo destacada"},L={key:0,class:"flex-column"},g={class:"noticias-scroll"},j=["src"],_={class:"noticia-titulo"},C={class:"ancho-pag bg-dark mt-4"},y={class:"ts-descripcion"},A={class:"ct-botones"},E={class:"flex-botones"};function w(a,e,o,t,i,r){const n=(0,s.g2)("router-link"),l=(0,s.g2)("PieComponent");return(0,s.uX)(),(0,s.CE)("div",null,[e[3]||(e[3]=(0,s.Lk)("div",{class:"banner"},[(0,s.Lk)("img",{class:"img-banner",src:p,alt:""})],-1)),(0,s.Lk)("div",h,[i.noticias.length>0?((0,s.uX)(),(0,s.CE)("section",f,[(0,s.Lk)("div",b,[i.noticias.length>0?((0,s.uX)(),(0,s.Wv)(n,{key:0,to:"/noticia/"+i.noticias[0].id},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{class:"noticia-imagen-destacada",src:"https://nazadoto.com:3500"+i.noticias[0].imagen,alt:""},null,8,k),(0,s.Lk)("div",v,(0,m.v_)(i.noticias[0].titulo),1)])),_:1},8,["to"])):(0,s.Q3)("",!0)]),i.noticias.length>1?((0,s.uX)(),(0,s.CE)("div",L,[(0,s.Lk)("div",g,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.noticias.slice(1),(a=>((0,s.uX)(),(0,s.Wv)(n,{to:"/noticia/"+a.id,key:a.id,class:"noticia-cuadrada"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{class:"noticia-imagen",src:"https://nazadoto.com:3500"+a.imagen,alt:""},null,8,j),(0,s.Lk)("div",_,(0,m.v_)(a.titulo),1)])),_:2},1032,["to"])))),128))])])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",C,[(0,s.Lk)("div",y,[e[1]||(e[1]=(0,s.Lk)("h3",null,[(0,s.Lk)("strong",null,"Sobre el programa...")],-1)),e[2]||(e[2]=(0,s.eW)(" El programa provincial de Tarjetas Sociales está diseñado para asistir a personas en situación de vulnerabilidad estructural, quienes no cuentan con ingresos por trabajo activo, jubilación, pensión ni reciben la Tarjeta Alimentar Nacional. Este programa proporciona fondos destinados exclusivamente a la compra de alimentos de primera necesidad. ")),(0,s.Lk)("div",A,[(0,s.Lk)("div",E,[(0,s.bF)(n,{class:"white btn-css",to:"/requisitos"},{default:(0,s.k6)((()=>e[0]||(e[0]=[(0,s.eW)("VER REQUISITOS")]))),_:1})])])])]),(0,s.bF)(l)])}var S=o.p+"img/logo-gobierno.8a72dd30.png";const N={class:"footer"},I={class:"ancho-pag container-footer"},F={class:"footer-content"};function D(a,e,o,t,i,r){const n=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("footer",N,[(0,s.Lk)("div",I,[e[2]||(e[2]=(0,s.Fv)('<div class="footer-header" data-v-ce69fde2><img class="img-footer" src="'+S+'" alt="" data-v-ce69fde2></div><div class="footer-content" data-v-ce69fde2><a class="link-pie" href="http://mdssde.gob.ar" target="__blank" data-v-ce69fde2>PÁGINA MINISTERIO</a><a href="https://www.facebook.com/profile.php?id=61552046130284" class="link-pie" data-v-ce69fde2>FACEBOOK</a></div>',2)),(0,s.Lk)("div",F,[(0,s.bF)(n,{class:"link-pie",to:"/contacto"},{default:(0,s.k6)((()=>e[0]||(e[0]=[(0,s.eW)("CONTACTO")]))),_:1}),e[1]||(e[1]=(0,s.Lk)("a",{href:"https://maps.app.goo.gl/XADPbVnJhzR3pyNd7",class:"link-pie",target:"__blank"},"DIRECCIÓN: SÁENZ PEÑA N° 340",-1))])])])}var x={},U=o(1241);const M=(0,U.A)(x,[["render",D],["__scopeId","data-v-ce69fde2"]]);var X=M,T={components:{PieComponent:X},data(){return{noticias:[]}},methods:{async fetchNoticias(){try{const a=await t.A.get("/noticias/get");this.noticias=a.data[0]}catch(a){console.log("No se pudo obtener las noticias. ",a)}}},mounted(){this.fetchNoticias()}};const P=(0,U.A)(T,[["render",w],["__scopeId","data-v-01d7d320"]]);var V=P;const $={key:0,class:"pantalla-carga text-center"},J={key:1,class:"mensaje-container-fondo"},O={class:"mensaje-container"},q={class:"mensaje"},W={class:"total text-center"},R={class:"form-container"},Q={class:"row"},B={class:"col-md-12"},H={class:"row"},z={class:"col-md-12"},G={class:"col-md-12 mt-4"};function K(a,e,o,t,r,n){const l=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",null,[r.cargando?((0,s.uX)(),(0,s.CE)("div",$,e[5]||(e[5]=[(0,s.Lk)("div",{class:"logo-carga"},[(0,s.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,s.Lk)("div",{class:"texto-carga"},"Ingresando")],-1)]))):(0,s.Q3)("",!0),r.mensajePopup?((0,s.uX)(),(0,s.CE)("div",J,[(0,s.Lk)("div",O,[(0,s.Lk)("span",q,(0,m.v_)(r.mensaje),1),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[0]||(e[0]=a=>{this.mensajePopup=!1,this.mensaje=""})},"Ok")])])):(0,s.Q3)("",!0),(0,s.Lk)("div",W,[(0,s.Lk)("form",{class:"flex-container",onSubmit:e[4]||(e[4]=(0,i.D$)(((...a)=>n.login&&n.login(...a)),["prevent"]))},[e[9]||(e[9]=(0,s.Lk)("h2",{class:"titulo mt-4"},"Iniciar Sesión",-1)),(0,s.Lk)("div",R,[(0,s.Lk)("div",Q,[(0,s.Lk)("div",B,[e[6]||(e[6]=(0,s.Lk)("label",{class:"form-label",for:"usuario"},"Usuario",-1)),(0,s.bo)((0,s.Lk)("input",{class:"form-control",type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>r.usuario.usuario=a),required:"",onInput:e[2]||(e[2]=(...a)=>n.restrictInput&&n.restrictInput(...a))},null,544),[[i.Jo,r.usuario.usuario]])])]),(0,s.Lk)("div",H,[(0,s.Lk)("div",z,[e[7]||(e[7]=(0,s.Lk)("label",{class:"form-label",for:"contraseña"},"Contraseña",-1)),(0,s.bo)((0,s.Lk)("input",{class:"form-control",type:"password","onUpdate:modelValue":e[3]||(e[3]=a=>r.usuario.contraseña=a),required:""},null,512),[[i.Jo,r.usuario.contraseña]])])])]),e[10]||(e[10]=(0,s.Lk)("div",{class:"btn-container"},[(0,s.Lk)("button",{type:"submit",class:"btn btn-entrar"},"Entrar")],-1)),(0,s.Lk)("div",G,[(0,s.bF)(l,{to:"/registrar"},{default:(0,s.k6)((()=>e[8]||(e[8]=[(0,s.eW)("Crear cuenta")]))),_:1})])],32)])])}var Y=o(595);const Z=(0,Y.A)();var aa=Z,ea={data(){return{mensajePopup:!1,mensaje:"",usuario:{usuario:"","contraseña":"",rol:""},cargando:!1}},methods:{restrictInput(a){const e=a.target.value,o=/[\s!@#$%^&*()_+=[\]{};':"\\|,<>?`´¨~¡/°¬¿]/g;o.test(e)&&(this.usuario.usuario=this.usuario.usuario.substring(0,this.usuario.usuario.length-1))},async login(){let a;this.cargando=!0;try{a=await t.A.post("/auth/login",this.usuario);const e={usuario:this.usuario.usuario,dni:a.data.dni,rol:a.data.rol};switch(localStorage.setItem("user",JSON.stringify(e)),aa.emit("usuarioLogueado"),e.rol){case 0:vl.push("/beneficiario");break;case 1:vl.push("/empleado");break;case 2:vl.push("/admin");break}}catch(e){this.mostrarMensaje(e.response?.data?.message||"Error al iniciar sesión")}finally{this.cargando=!1}},mostrarMensaje(a){this.mensaje=a,this.mensajePopup=!0}}};const oa=(0,U.A)(ea,[["render",K],["__scopeId","data-v-0975c95d"]]);var ta=oa;const ia={key:0,class:"pantalla-carga text-center"},sa={key:1,class:"mensaje-container-fondo"},ra={class:"mensaje-container"},na={class:"mensaje"},la={class:"total text-center"},ca={class:"form-container"},da={class:"row"},ua={class:"col-md-6"},ma={class:"col-md-6"},pa={class:"row"},ha={class:"col-md-6"},fa={class:"row"},ba={class:"col-md-6"},ka={class:"col-md-6"},va={class:"col-md-12 mt-4"};function La(a,e,o,t,r,n){const l=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",null,[r.cargando?((0,s.uX)(),(0,s.CE)("div",ia,e[8]||(e[8]=[(0,s.Lk)("div",{class:"logo-carga"},[(0,s.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:"Logo"}),(0,s.Lk)("div",{class:"texto-carga"},"Registrando...")],-1)]))):(0,s.Q3)("",!0),r.mensajePopup?((0,s.uX)(),(0,s.CE)("div",sa,[(0,s.Lk)("div",ra,[(0,s.Lk)("span",na,(0,m.v_)(r.mensaje),1),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[0]||(e[0]=a=>{this.mensajePopup=!1,this.mensaje=""})},"Ok")])])):(0,s.Q3)("",!0),(0,s.Lk)("div",la,[(0,s.Lk)("form",{onSubmit:e[7]||(e[7]=(0,i.D$)(((...a)=>n.registrar&&n.registrar(...a)),["prevent"])),class:"flex-container"},[e[15]||(e[15]=(0,s.Lk)("h2",{class:"titulo mt-4"},"Registro de Usuario",-1)),(0,s.Lk)("div",ca,[(0,s.Lk)("div",da,[(0,s.Lk)("div",ua,[e[9]||(e[9]=(0,s.Lk)("label",{class:"form-label",for:"usuario"},"Nombre de Usuario",-1)),(0,s.bo)((0,s.Lk)("input",{class:"form-control",id:"usuario",type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>r.usuario.usuario=a),required:"",onInput:e[2]||(e[2]=(...a)=>n.restrictInput&&n.restrictInput(...a))},null,544),[[i.Jo,r.usuario.usuario]])]),(0,s.Lk)("div",ma,[e[10]||(e[10]=(0,s.Lk)("label",{class:"form-label",for:"correo"},"Correo",-1)),(0,s.bo)((0,s.Lk)("input",{class:"form-control",id:"correo",type:"email","onUpdate:modelValue":e[3]||(e[3]=a=>r.usuario.correo=a)},null,512),[[i.Jo,r.usuario.correo]])])]),(0,s.Lk)("div",pa,[(0,s.Lk)("div",ha,[e[11]||(e[11]=(0,s.Lk)("label",{for:"dni",class:"form-label"},"DNI",-1)),(0,s.bo)((0,s.Lk)("input",{class:"form-control",id:"dni",type:"number","onUpdate:modelValue":e[4]||(e[4]=a=>r.usuario.dni=a)},null,512),[[i.Jo,r.usuario.dni]])])]),(0,s.Lk)("div",fa,[(0,s.Lk)("div",ba,[e[12]||(e[12]=(0,s.Lk)("label",{class:"form-label",for:"contraseña"},"Contraseña",-1)),(0,s.bo)((0,s.Lk)("input",{class:"form-control",id:"contraseña",type:"password","onUpdate:modelValue":e[5]||(e[5]=a=>r.usuario.contraseña=a),required:""},null,512),[[i.Jo,r.usuario.contraseña]])]),(0,s.Lk)("div",ka,[e[13]||(e[13]=(0,s.Lk)("label",{class:"form-label",for:"contraseña2"},"Repetir Contraseña",-1)),(0,s.bo)((0,s.Lk)("input",{class:"form-control",id:"contraseña2",type:"password","onUpdate:modelValue":e[6]||(e[6]=a=>r.contraseña_repetida=a),required:""},null,512),[[i.Jo,r.contraseña_repetida]])])])]),e[16]||(e[16]=(0,s.Lk)("div",{class:"btn-container"},[(0,s.Lk)("button",{type:"submit",class:"btn-mensaje"},"Registrar")],-1)),(0,s.Lk)("div",va,[(0,s.bF)(l,{to:"/login"},{default:(0,s.k6)((()=>e[14]||(e[14]=[(0,s.eW)("¿Ya tenés cuenta? Ingresá")]))),_:1})])],32)])])}var ga={data(){return{mensajePopup:!1,mensaje:"","contraseña_repetida":"",usuario:{correo:"",usuario:"","contraseña":"",dni:""},cargando:!1}},methods:{restrictInput(a){const e=a.target.value,o=/[\s!@#$%^&*()_+=[\]{};':"\\|,<>?`´¨~¡/°¬¿]/g;o.test(e)&&(this.usuario.usuario=this.usuario.usuario.substring(0,this.usuario.usuario.length-1))},async registrar(){if(this.usuario.contraseña==this.contraseña_repetida){this.cargando=!0;try{await t.A.post("/auth/register",this.usuario),vl.push("/login")}catch(a){this.mostrarMensaje(a.response.data.message)}finally{this.cargando=!1}}else this.mostrarMensaje("Las contraseñas no coinciden.")},mostrarMensaje(a){this.mensaje=a,this.mensajePopup=!0}}};const ja=(0,U.A)(ga,[["render",La],["__scopeId","data-v-6e2c1a0e"]]);var _a=ja;const Ca={class:"ancho-pag mt-4"},ya={class:"text-center"};function Aa(a,e,o,t,i,r){const n=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("div",Ca,[e[1]||(e[1]=(0,s.Fv)('<h3 class="text-center"><strong>Requisitos</strong></h3><p>Aquellas personas que busquen adherirse al programa de Tarjetas Sociales deberán:</p><ul><li>No contar con ingresos por trabajo activo.</li><li>No contar con ingresos por jubilación.</li><li>No contar con ingresos por pensión.</li><li>No contar con la Tarjeta Alimentar Nacional.</li></ul><p>Luego de cumplir con esos requerimientos, deberán contar con:</p><ol><li>Fotografía legible del DNI (anverso y reverso).</li><li>Fotografía o PDF del Historial médico.</li></ol>',5)),(0,s.Lk)("div",ya,[(0,s.bF)(n,{class:"btn-css c-black",to:"/registrar"},{default:(0,s.k6)((()=>e[0]||(e[0]=[(0,s.Lk)("strong",null,"SOLICITAR TARJETA",-1)]))),_:1})])])])}var Ea={components:{}};const wa=(0,U.A)(Ea,[["render",Aa]]);var Sa=wa;const Na={class:"flex-inline"},Ia={key:0,class:"pantalla-carga text-center"};function Fa(a,e,o,t,i,r){const n=(0,s.g2)("SidebarBeneficiarioComponent"),l=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",Na,[i.cargando?((0,s.uX)(),(0,s.CE)("div",Ia,e[0]||(e[0]=[(0,s.Lk)("div",{class:"logo-carga"},[(0,s.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:"Logo"}),(0,s.Lk)("div",{class:"texto-carga c-black"},"Cargando...")],-1)]))):(0,s.Q3)("",!0),(0,s.bF)(n,{"tiene-tarjeta":i.tieneTarjeta},null,8,["tiene-tarjeta"]),(0,s.bF)(l,{class:"vista","tiene-tarjeta":i.tieneTarjeta},null,8,["tiene-tarjeta"])])}const Da={key:0,class:"mensaje-container-fondo"},xa={class:"mensaje-container"},Ua={class:"modal-botones"},Ma={class:"contenedor"},Xa={class:"contenedor-botones"},Ta={key:0},Pa={key:1};function Va(a,e,o,t,i,r){const n=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",null,[i.mostrarModal?((0,s.uX)(),(0,s.CE)("div",Da,[(0,s.Lk)("div",xa,[e[3]||(e[3]=(0,s.Lk)("span",{class:"mensaje"},"¿Cerrar sesión?",-1)),(0,s.Lk)("div",Ua,[(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[0]||(e[0]=a=>this.mostrarModal=!1)},"No"),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[1]||(e[1]=(...a)=>r.cerrarSesion&&r.cerrarSesion(...a))},"Si")])])])):(0,s.Q3)("",!0),(0,s.Lk)("div",Ma,[(0,s.Lk)("div",Xa,[e[7]||(e[7]=(0,s.Lk)("a",{href:"/beneficiario",class:"sidebar-header"},[(0,s.Lk)("img",{src:"/recursos/logomds.png",class:"mv-auto img-logo",alt:""}),(0,s.Lk)("h4",{class:"white text-center"},[(0,s.eW)("Tarjetas"),(0,s.Lk)("br"),(0,s.eW)("Sociales")])],-1)),e[8]||(e[8]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",null,[(0,s.bF)(n,{class:(0,m.C4)(["item-btn",{active:"/beneficiario"==a.$route.path}]),to:"/beneficiario"},{default:(0,s.k6)((()=>e[4]||(e[4]=[(0,s.eW)("Inicio")]))),_:1},8,["class"])]),o.tieneTarjeta&&"PENDIENTE"!=o.tieneTarjeta?((0,s.uX)(),(0,s.CE)("div",Ta,[(0,s.bF)(n,{class:(0,m.C4)(["item-btn",{active:"/beneficiario/tarjeta"===a.$route.path}]),to:"/beneficiario/tarjeta"},{default:(0,s.k6)((()=>e[5]||(e[5]=[(0,s.eW)("Mi Tarjeta")]))),_:1},8,["class"])])):((0,s.uX)(),(0,s.CE)("div",Pa,[(0,s.bF)(n,{class:(0,m.C4)(["item-btn",{active:"/beneficiario/solicitud"===a.$route.path}]),to:"/beneficiario/solicitud"},{default:(0,s.k6)((()=>e[6]||(e[6]=[(0,s.eW)("Solicitud")]))),_:1},8,["class"])])),(0,s.Lk)("button",{class:"item-btn mt-4",onClick:e[2]||(e[2]=(...a)=>r.cerrarSesionModal&&r.cerrarSesionModal(...a))},"Cerrar Sesión")])])])}var $a={data(){return{mostrarModal:!1}},props:{tieneTarjeta:{type:String,default:null}},methods:{cerrarSesionModal(){this.mostrarModal=!0},cerrarSesion(){this.mostrarModal=!1,localStorage.clear(),aa.emit("usuarioDeslogueado"),vl.push("/")}}};const Ja=(0,U.A)($a,[["render",Va],["__scopeId","data-v-6f74a054"]]);var Oa=Ja,qa={components:{SidebarBeneficiarioComponent:Oa},data(){return{cargando:!1,tieneTarjeta:null}},methods:{async verificarTarjeta(){this.cargando=!0;const a=JSON.parse(localStorage.getItem("user")).dni;try{const e=await t.A.get("/beneficiarios/verificarTarjeta",{params:{dni:a}});this.tieneTarjeta=e.data.estado,localStorage.setItem("tieneTarjeta",this.tieneTarjeta)}catch(e){console.log("No tiene tarjeta.")}finally{this.cargando=!1}}},mounted(){this.verificarTarjeta()}};const Wa=(0,U.A)(qa,[["render",Fa],["__scopeId","data-v-535652f4"]]);var Ra=Wa;const Qa={class:"vista"},Ba={class:"container"},Ha={class:"inline-flex"},za={class:"mt-2"},Ga={class:"tarjetas-inicio"},Ka={key:0,class:"modal-fondo"},Ya={class:"modal-contenido"},Za={key:0,class:"error"},ae={class:"modal-actions"};function ee(a,e,o,t,r,n){return(0,s.uX)(),(0,s.CE)("div",Qa,[(0,s.Lk)("div",Ba,[(0,s.Lk)("span",Ha,[(0,s.Lk)("h3",za,"Bienvenid@, "+(0,m.v_)(r.usuario.usuario?.toUpperCase()),1),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[0]||(e[0]=a=>r.abrirModal=!0)},"Cambiar contraseña")]),e[11]||(e[11]=(0,s.Lk)("p",{class:"lead"},"Desde aquí podés acceder a las principales funciones de gestión del sistema.",-1)),(0,s.Lk)("div",Ga,[o.tieneTarjeta&&"PENDIENTE"!=o.tieneTarjeta?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"card acceso",onClick:e[1]||(e[1]=e=>a.$router.push("/beneficiario/tarjeta"))},e[8]||(e[8]=[(0,s.Lk)("h5",null,"Mi Tarjeta",-1),(0,s.Lk)("p",null,"Ver información sobre mi Tarjeta Social.",-1)]))):((0,s.uX)(),(0,s.CE)("div",{key:1,class:"card acceso",onClick:e[2]||(e[2]=e=>a.$router.push("/beneficiario/solicitud"))},e[9]||(e[9]=[(0,s.Lk)("h5",null,"Solicitud",-1),(0,s.Lk)("p",null,"Solicitar o ver el estado de la solicitud de Tarjeta Social.",-1)])))]),r.abrirModal?((0,s.uX)(),(0,s.CE)("div",Ka,[(0,s.Lk)("div",Ya,[e[10]||(e[10]=(0,s.Lk)("h3",null,"Cambiar contraseña",-1)),(0,s.bo)((0,s.Lk)("input",{class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>r.form.contraseñaActual=a),type:"password",placeholder:"Contraseña actual"},null,512),[[i.Jo,r.form.contraseñaActual]]),(0,s.bo)((0,s.Lk)("input",{class:"form-control","onUpdate:modelValue":e[4]||(e[4]=a=>r.form.contraseñaNueva=a),type:"password",placeholder:"Nueva contraseña"},null,512),[[i.Jo,r.form.contraseñaNueva]]),(0,s.bo)((0,s.Lk)("input",{class:"form-control","onUpdate:modelValue":e[5]||(e[5]=a=>r.form.repetirContraseña=a),type:"password",placeholder:"Repetir nueva contraseña"},null,512),[[i.Jo,r.form.repetirContraseña]]),r.error?((0,s.uX)(),(0,s.CE)("p",Za,(0,m.v_)(r.error),1)):(0,s.Q3)("",!0),(0,s.Lk)("div",ae,[(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[6]||(e[6]=(...a)=>n.cambiarContraseña&&n.cambiarContraseña(...a))},"Guardar"),(0,s.Lk)("button",{class:"btn",onClick:e[7]||(e[7]=a=>r.abrirModal=!1)},"Cancelar")])])])):(0,s.Q3)("",!0)])])}var oe={data(){return{usuario:"",abrirModal:!1,error:"",form:{"contraseñaActual":"","contraseñaNueva":"","repetirContraseña":""}}},props:{tieneTarjeta:{type:String,default:null}},methods:{async"cambiarContraseña"(){if(this.error="",this.form.contraseñaNueva===this.form.repetirContraseña)try{await t.A.post("/auth/cambiarContrasena",{usuario:this.usuario.usuario,"contraseñaActual":this.form.contraseñaActual,"contraseñaNueva":this.form.contraseñaNueva}),alert("Contraseña cambiada correctamente."),this.abrirModal=!1,this.form={"contraseñaActual":"","contraseñaNueva":"","repetirContraseña":""}}catch(a){this.error=a.response?.data?.message||"Error al cambiar la contraseña."}else this.error="Las contraseñas nuevas no coinciden."}},mounted(){this.usuario=JSON.parse(localStorage.getItem("user"))}};const te=(0,U.A)(oe,[["render",ee],["__scopeId","data-v-79fba4c0"]]);var ie=te;const se={class:"vista"},re={key:0,class:"pantalla-carga text-center"},ne={key:1,class:"mensaje-container-fondo"},le={class:"mensaje-container"},ce={class:"mensaje"},de={class:"container",id:"datosTarjeta"},ue={class:"tarjeta-grid"},me={class:"dato"},pe={class:"valor"},he={class:"dato"},fe={class:"valor"},be={class:"dato"},ke={class:"valor"},ve={class:"dato"},Le={class:"valor"},ge={class:"dato"},je={class:"valor"},_e={class:"dato"},Ce={class:"dato"},ye={class:"valor"},Ae={key:0,class:"historial-container"},Ee={class:"historial"},we={class:"acciones"};function Se(a,e,o,t,i,r){return(0,s.uX)(),(0,s.CE)("div",se,[i.cargando?((0,s.uX)(),(0,s.CE)("div",re,e[2]||(e[2]=[(0,s.Lk)("div",{class:"logo-carga"},[(0,s.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:"Logo"}),(0,s.Lk)("div",{class:"texto-carga"},"Cargando...")],-1)]))):(0,s.Q3)("",!0),i.mensajePopup?((0,s.uX)(),(0,s.CE)("div",ne,[(0,s.Lk)("div",le,[(0,s.Lk)("span",ce,(0,m.v_)(i.mensaje),1),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[0]||(e[0]=a=>{this.mensajePopup=!1,this.mensaje=""})}," Ok ")])])):(0,s.Q3)("",!0),(0,s.Lk)("div",de,[e[11]||(e[11]=(0,s.Lk)("h3",{class:"mt-2"},"Datos de Tarjeta Social",-1)),(0,s.Lk)("div",ue,[(0,s.Lk)("div",me,[e[3]||(e[3]=(0,s.Lk)("span",{class:"label"},"DNI",-1)),(0,s.Lk)("span",pe,(0,m.v_)(i.tarjeta.dni),1)]),(0,s.Lk)("div",he,[e[4]||(e[4]=(0,s.Lk)("span",{class:"label"},"Número de Cuenta",-1)),(0,s.Lk)("span",fe,(0,m.v_)(i.tarjeta.num_cuenta||"####-####-####-####"),1)]),(0,s.Lk)("div",be,[e[5]||(e[5]=(0,s.Lk)("span",{class:"label"},"Número de Tarjeta",-1)),(0,s.Lk)("span",ke,(0,m.v_)(i.tarjeta.num_tarjeta||"####-####-####-####"),1)]),(0,s.Lk)("div",ve,[e[6]||(e[6]=(0,s.Lk)("span",{class:"label"},"Fecha de Registro",-1)),(0,s.Lk)("span",Le,(0,m.v_)(i.tarjeta.fecha_registro),1)]),(0,s.Lk)("div",ge,[e[7]||(e[7]=(0,s.Lk)("span",{class:"label"},"Fecha de Modificación",-1)),(0,s.Lk)("span",je,(0,m.v_)(i.tarjeta.fecha_modificacion),1)]),(0,s.Lk)("div",_e,[e[8]||(e[8]=(0,s.Lk)("span",{class:"label"},"Estado",-1)),(0,s.Lk)("span",{class:(0,m.C4)(["valor estado","estado-"+i.tarjeta.estado.toLowerCase()])},(0,m.v_)(i.tarjeta.estado),3)]),(0,s.Lk)("div",Ce,[e[9]||(e[9]=(0,s.Lk)("span",{class:"label"},"Importe Acreditado",-1)),(0,s.Lk)("span",ye,(0,m.v_)(i.tarjeta.importe_acreditado?"$"+i.tarjeta.importe_acreditado:"####"),1)])]),i.tarjeta.historias.length>0?((0,s.uX)(),(0,s.CE)("div",Ae,[e[10]||(e[10]=(0,s.Lk)("h3",{class:"subtitulo"},"Historial",-1)),(0,s.Lk)("div",Ee,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.tarjeta.historias,((a,e)=>((0,s.uX)(),(0,s.CE)("div",{key:e,class:"historia-item"},[(0,s.Lk)("strong",null,(0,m.v_)(a.fecha+" - "),1),(0,s.Lk)("span",null,(0,m.v_)(a.observaciones),1)])))),128))])])):(0,s.Q3)("",!0),(0,s.Lk)("div",we,[(0,s.Lk)("button",{type:"button",class:"btn-imprimir",onClick:e[1]||(e[1]=(...a)=>r.imprimir&&r.imprimir(...a))},"Imprimir")])])])}var Ne=o(1749),Ie={data(){return{cargando:!1,mensajePopup:!1,mensaje:"",tarjeta:{dni:"",num_cuenta:"",num_tarjeta:"",fecha_registro:"",estado:"",fecha_modificacion:"",importe_acreditado:"",observaciones:"",historias:[]}}},methods:{async fetchTarjeta(){this.cargando=!0;try{const a=await t.A.get("tarjetas/getDatos",{params:{dni:JSON.parse(localStorage.getItem("user")).dni}});this.tarjeta=a.data}finally{this.cargando=!1}},async imprimir(){const a=new Ne.Ay,e=8;let o=20;const t=(t,i)=>{a.setFont("Helvetica","bold"),a.text(`${t}:`,20,o),a.setFont("Helvetica","normal"),a.text(`${i||"-"}`,80,o),a.setFontSize(11),o+=e},i=(e,o,t=11)=>{a.setFontSize(t),a.setFont("Helvetica","bold");const i=a.getStringUnitWidth(e)*t/a.internal.scaleFactor,s=(a.internal.pageSize.getWidth()-i)/2;a.text(e,s,o)},s=a=>fetch(a).then((a=>a.blob())).then((a=>new Promise((e=>{const o=new FileReader;o.onloadend=()=>e(o.result),o.readAsDataURL(a)})))),r=await s("/recursos/icono-mds-negro.png"),n=await s("/recursos/icono-gobierno.png");a.addImage(r,"PNG",30,10,60,15),a.addImage(n,"PNG",150,10,15,15),a.setFont("Helvetica","normal"),a.setFontSize(11),a.text("SANTIAGO DEL ESTERO",160,35,{align:"center"});const l=this.capitalize((new Date).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"}));a.text(l,160,40,{align:"center"}),o=50,i("DATOS DE TARJETA SOCIAL",o),o+=2*e,t("DNI",this.tarjeta.dni),t("Número de Cuenta",this.tarjeta.num_cuenta||"####-####-####-####"),t("Número de Tarjeta",this.tarjeta.num_tarjeta||"####-####-####-####"),t("Fecha de Registro",this.tarjeta.fecha_registro),t("Fecha de Modificación",this.tarjeta.fecha_modificacion),t("Estado",this.tarjeta.estado),t("Importe Acreditado",this.tarjeta.importe_acreditado?"$"+this.tarjeta.importe_acreditado:"####"),o+=e,this.tarjeta.historias&&this.tarjeta.historias.length>0&&(a.setFont("Helvetica","bold"),a.text("-- Historial --",20,o),o+=e,a.setFont("Helvetica","normal"),this.tarjeta.historias.forEach((t=>{a.text(`${t.fecha}: ${t.observaciones}`,25,o),o+=e,o>270&&(a.addPage(),o=20)})),o+=e),a.save(`tarjeta_social_${this.tarjeta.dni}.pdf`)},capitalize(a){return a.charAt(0).toUpperCase()+a.slice(1)}},mounted(){this.fetchTarjeta()}};const Fe=(0,U.A)(Ie,[["render",Se],["__scopeId","data-v-e10e99da"]]);var De=Fe;const xe={class:"vista"},Ue={key:0,class:"pantalla-carga text-center"},Me={key:1,class:"mensaje-container-fondo"},Xe={class:"mensaje-container"},Te={class:"mensaje"},Pe={key:2,class:"container"},Ve={class:"fila"},$e={class:"w-5"},Je={class:"flex-cuil"},Oe={class:"input-group-text cuil-medio"},qe={class:"w-5"},We={class:"fila"},Re={class:"w-5"},Qe={class:"w-5"},Be={class:"fila"},He={class:"w-5"},ze={class:"w-5"},Ge={class:"fila"},Ke={class:"w-5"},Ye=["value"],Ze={class:"w-5"},ao=["disabled"],eo=["value"],oo={class:"fila"},to={class:"w-5"},io=["disabled"],so=["value"],ro={class:"w-5"},no={class:"fila"},lo={class:"w-5"},co=["for"],uo=["name","onUpdate:modelValue"],mo={class:"w-5"},po=["for"],ho=["name","onUpdate:modelValue"],fo={class:"fila"},bo={class:"w-5"},ko=["for"],vo=["name","onUpdate:modelValue"],Lo={class:"w-5"},go=["for"],jo=["name","onUpdate:modelValue"],_o={key:3,class:"container"},Co={class:"solicitud-detalle"},yo={class:"solicitud-info"},Ao={class:"info-item"},Eo={class:"value"},wo={class:"info-item"},So={class:"value"},No={class:"info-item"},Io={class:"value"},Fo={key:0,class:"historial"};function Do(a,e,o,t,r,n){return(0,s.uX)(),(0,s.CE)("div",xe,[r.cargando?((0,s.uX)(),(0,s.CE)("div",Ue,e[17]||(e[17]=[(0,s.Lk)("div",{class:"logo-carga"},[(0,s.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:"Logo"}),(0,s.Lk)("div",{class:"texto-carga"},"Cargando")],-1)]))):(0,s.Q3)("",!0),r.mensajePopup?((0,s.uX)(),(0,s.CE)("div",Me,[(0,s.Lk)("div",Xe,[(0,s.Lk)("span",Te,(0,m.v_)(a.mensaje),1),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[0]||(e[0]=a=>{this.mensajePopup=!1,this.mensaje=""})},"Ok")])])):(0,s.Q3)("",!0),"PENDIENTE"!=o.tieneTarjeta?((0,s.uX)(),(0,s.CE)("div",Pe,[e[35]||(e[35]=(0,s.Lk)("h3",{class:"mt-2"},"Solicitar Tarjeta",-1)),(0,s.Lk)("form",{onSubmit:e[16]||(e[16]=(0,i.D$)(((...a)=>n.solicitar&&n.solicitar(...a)),["prevent"])),class:"formulario-beneficiario"},[(0,s.Lk)("div",Ve,[(0,s.Lk)("div",$e,[e[18]||(e[18]=(0,s.Lk)("label",{for:"cuil",class:"form-label"},"CUIL",-1)),(0,s.Lk)("div",Je,[(0,s.bo)((0,s.Lk)("input",{class:"form-control text-center cuil-lado",maxlength:"2",type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>r.cuilInicio=a),onInput:e[2]||(e[2]=(...a)=>n.updateCuil&&n.updateCuil(...a)),style:{"max-width":"3em"},required:""},null,544),[[i.Jo,r.cuilInicio]]),(0,s.Lk)("span",Oe,(0,m.v_)(r.usuario.dni),1),(0,s.bo)((0,s.Lk)("input",{class:"form-control text-center cuil-lado",maxlength:"1",type:"text","onUpdate:modelValue":e[3]||(e[3]=a=>r.cuilFin=a),onInput:e[4]||(e[4]=(...a)=>n.updateCuil&&n.updateCuil(...a)),style:{"max-width":"3em"},required:""},null,544),[[i.Jo,r.cuilFin]])])]),(0,s.Lk)("div",qe,[e[19]||(e[19]=(0,s.Lk)("label",{for:"nombre",class:"form-label"},"Nombre completo",-1)),(0,s.bo)((0,s.Lk)("input",{id:"nombre",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=a=>r.usuario.nombre=a),type:"text"},null,512),[[i.Jo,r.usuario.nombre]])])]),(0,s.Lk)("div",We,[(0,s.Lk)("div",Re,[e[20]||(e[20]=(0,s.Lk)("label",{class:"form-label",for:"telefono"},"Teléfono",-1)),(0,s.bo)((0,s.Lk)("input",{class:"form-control",type:"number","onUpdate:modelValue":e[6]||(e[6]=a=>r.usuario.telefono=a),required:""},null,512),[[i.Jo,r.usuario.telefono]])]),(0,s.Lk)("div",Qe,[e[22]||(e[22]=(0,s.Lk)("label",{for:"sexo",class:"form-label"},"Sexo",-1)),(0,s.bo)((0,s.Lk)("select",{id:"sexo",class:"form-select","onUpdate:modelValue":e[7]||(e[7]=a=>r.usuario.sexo=a)},e[21]||(e[21]=[(0,s.Lk)("option",{disabled:"",value:"default"},"Seleccione",-1),(0,s.Lk)("option",{value:"F"},"Femenino",-1),(0,s.Lk)("option",{value:"M"},"Masculino",-1)]),512),[[i.u1,r.usuario.sexo]])])]),(0,s.Lk)("div",Be,[(0,s.Lk)("div",He,[e[23]||(e[23]=(0,s.Lk)("label",{class:"form-label",for:"fecha_nacimiento"},"Fecha de Nacimiento",-1)),(0,s.bo)((0,s.Lk)("input",{class:"form-control",type:"date","onUpdate:modelValue":e[8]||(e[8]=a=>r.usuario.fecha_nacimiento=a),required:""},null,512),[[i.Jo,r.usuario.fecha_nacimiento]])]),(0,s.Lk)("div",ze,[e[24]||(e[24]=(0,s.Lk)("label",{class:"form-label",for:"cant_parientes"},"Cantidad de parientes",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number",class:"form-control","onUpdate:modelValue":e[9]||(e[9]=a=>r.usuario.cant_parientes=a),required:""},null,512),[[i.Jo,r.usuario.cant_parientes]])])]),e[33]||(e[33]=(0,s.Fv)('<div class="fila" data-v-f7d90e70><div class="w-5" data-v-f7d90e70><label for="archivo-dni" class="form-label" data-v-f7d90e70>Foto/PDF del DNI</label><input class="form-control" name="archivo-dni" type="file" accept=".jpeg, .png, .pdf" required data-v-f7d90e70></div><div class="w-5" data-v-f7d90e70><label for="archivo-historial-medico" class="form-label" data-v-f7d90e70>Foto/PDF del Historial Médico</label><input class="form-control" name="archivo-historial-medico" type="file" accept=".jpeg, .png, .pdf" required data-v-f7d90e70></div></div>',1)),(0,s.Lk)("div",Ge,[(0,s.Lk)("div",Ke,[e[26]||(e[26]=(0,s.Lk)("label",{class:"form-label",for:"departamento"},"Departamento",-1)),(0,s.bo)((0,s.Lk)("select",{class:"form-select","onUpdate:modelValue":e[10]||(e[10]=a=>r.usuario.departamento=a),onChange:e[11]||(e[11]=a=>n.fetchLocalidades(r.usuario.departamento)),required:""},[e[25]||(e[25]=(0,s.Lk)("option",{value:"default",disabled:""},"Seleccionar",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.departamentos,((a,e)=>((0,s.uX)(),(0,s.CE)("option",{value:a.cod_dpto,key:e},(0,m.v_)(a.descripcion),9,Ye)))),128))],544),[[i.u1,r.usuario.departamento]])]),(0,s.Lk)("div",Ze,[e[28]||(e[28]=(0,s.Lk)("label",{class:"form-label",for:"localidad"},"Localidad",-1)),(0,s.bo)((0,s.Lk)("select",{class:"form-select","onUpdate:modelValue":e[12]||(e[12]=a=>r.usuario.localidad=a),disabled:!("default"!=r.usuario.departamento),onChange:e[13]||(e[13]=a=>n.fetchBarrios(r.usuario.localidad)),required:""},[e[27]||(e[27]=(0,s.Lk)("option",{value:"default",disabled:""},"Seleccionar",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.localidades,((a,e)=>((0,s.uX)(),(0,s.CE)("option",{value:a.cod_localidad,key:e},(0,m.v_)(a.descripcion),9,eo)))),128))],40,ao),[[i.u1,r.usuario.localidad]])])]),(0,s.Lk)("div",oo,[(0,s.Lk)("div",to,[e[30]||(e[30]=(0,s.Lk)("label",{class:"form-label",for:"barrio"},"Barrio",-1)),(0,s.bo)((0,s.Lk)("select",{class:"form-select","onUpdate:modelValue":e[14]||(e[14]=a=>r.usuario.barrio=a),disabled:!("default"!=r.usuario.localidad),required:""},[e[29]||(e[29]=(0,s.Lk)("option",{value:"default",disabled:""},"Seleccionar",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.barrios,((a,e)=>((0,s.uX)(),(0,s.CE)("option",{value:a.cod_barrio,key:e},(0,m.v_)(a.descripcion),9,so)))),128))],8,io),[[i.u1,r.usuario.barrio]])]),(0,s.Lk)("div",ro,[e[31]||(e[31]=(0,s.Lk)("label",{for:"domicilio",class:"form-label"},"Domicilio",-1)),(0,s.bo)((0,s.Lk)("input",{id:"domicilio",class:"form-control","onUpdate:modelValue":e[15]||(e[15]=a=>r.usuario.domicilio=a),type:"text",required:""},null,512),[[i.Jo,r.usuario.domicilio]])])]),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.usuario.cant_parientes,(a=>((0,s.uX)(),(0,s.CE)("div",{class:"form-container",key:a},[(0,s.Lk)("h5",null,"Pariente "+(0,m.v_)(a),1),(0,s.Lk)("div",no,[(0,s.Lk)("div",lo,[(0,s.Lk)("label",{class:"form-label",for:"nom-pariente"+a},"Nombre y Apellido",8,co),(0,s.bo)((0,s.Lk)("input",{type:"text",name:"nom-pariente"+a,class:"form-control","onUpdate:modelValue":e=>r.parientes[a-1].nombre_pariente=e,required:""},null,8,uo),[[i.Jo,r.parientes[a-1].nombre_pariente]])]),(0,s.Lk)("div",mo,[(0,s.Lk)("label",{class:"form-label",for:"dni-pariente"+a},"DNI",8,po),(0,s.bo)((0,s.Lk)("input",{type:"number",name:"dni-pariente"+a,class:"form-control","onUpdate:modelValue":e=>r.parientes[a-1].dni_pariente=e,required:""},null,8,ho),[[i.Jo,r.parientes[a-1].dni_pariente]])])]),(0,s.Lk)("div",fo,[(0,s.Lk)("div",bo,[(0,s.Lk)("label",{class:"form-label",for:"sexo-pariente"+a},"Sexo",8,ko),(0,s.bo)((0,s.Lk)("select",{name:"sexo-pariente"+a,class:"form-select","onUpdate:modelValue":e=>r.parientes[a-1].sexo_pariente=e,required:""},e[32]||(e[32]=[(0,s.Lk)("option",{value:"default",disabled:"",selected:""},"Seleccionar",-1),(0,s.Lk)("option",{value:"f"},"Femenino",-1),(0,s.Lk)("option",{value:"m"},"Masculino",-1),(0,s.Lk)("option",{value:"n"},"No binario",-1)]),8,vo),[[i.u1,r.parientes[a-1].sexo_pariente]])]),(0,s.Lk)("div",Lo,[(0,s.Lk)("label",{class:"form-label",for:"fecha-nacimiento-pariente"+a},"Fecha de Nacimiento",8,go),(0,s.bo)((0,s.Lk)("input",{type:"date",name:"fecha-nacimiento-pariente"+a,class:"form-control","onUpdate:modelValue":e=>r.parientes[a-1].fecha_nacimiento_pariente=e,required:""},null,8,jo),[[i.Jo,r.parientes[a-1].fecha_nacimiento_pariente]])])])])))),128)),e[34]||(e[34]=(0,s.Lk)("div",{class:"fila m-4"},[(0,s.Lk)("button",{type:"submit",class:"btn-mensaje"},"Solicitar")],-1))],32)])):((0,s.uX)(),(0,s.CE)("div",_o,[e[41]||(e[41]=(0,s.Lk)("h3",{class:"mt-2"},"Estado de la Solicitud",-1)),(0,s.Lk)("div",Co,[(0,s.Lk)("div",yo,[(0,s.Lk)("div",Ao,[e[36]||(e[36]=(0,s.Lk)("span",{class:"label"},"Número de Solicitud",-1)),(0,s.Lk)("span",Eo,(0,m.v_)(r.solicitud.id),1)]),(0,s.Lk)("div",wo,[e[37]||(e[37]=(0,s.Lk)("span",{class:"label"},"Estado",-1)),(0,s.Lk)("span",So,(0,m.v_)(r.solicitud.estado),1)]),(0,s.Lk)("div",No,[e[38]||(e[38]=(0,s.Lk)("span",{class:"label"},"Fecha de Solicitud",-1)),(0,s.Lk)("span",Io,(0,m.v_)(n.formatearFecha(r.solicitud.fecha_solicitud)),1)])]),r.solicitud.historial&&r.solicitud.historial.length?((0,s.uX)(),(0,s.CE)("div",Fo,[e[39]||(e[39]=(0,s.Lk)("h3",{class:"historial-titulo"},"Historial",-1)),e[40]||(e[40]=(0,s.Lk)("div",{class:"historial-encabezado"},[(0,s.Lk)("span",null,"Observaciones"),(0,s.Lk)("span",null,"Fecha")],-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.solicitud.historial,((a,e)=>((0,s.uX)(),(0,s.CE)("div",{key:e,class:"historial-item"},[(0,s.Lk)("span",null,(0,m.v_)(a.observaciones),1),(0,s.Lk)("span",null,(0,m.v_)(n.formatearFecha(a.fecha)),1)])))),128))])):(0,s.Q3)("",!0)])]))])}var xo={data(){return{cuilInicio:"",cuilFin:"",cargando:!1,mensajePopup:!1,usuario:{nombre:"",dni:"",cuil:"",sexo:"default",telefono:"",fecha_nacimiento:"",cant_parientes:0,localidad:"default",departamento:"default",barrio:"default",domicilio:""},parientes:[],localidades:[],departamentos:[],barrios:[],solicitud:""}},props:{tieneTarjeta:{type:String,default:null}},watch:{"usuario.cant_parientes"(a){a<0?this.usuario.cant_parientes=0:this.parientes=Array.from({length:a},((a,e)=>({nombre_pariente:this.parientes[e]?.nombre_pariente||"",dni_pariente:this.parientes[e]?.dni_pariente||"",fecha_nacimiento_pariente:this.parientes[e]?.fecha_nacimiento_pariente||"",sexo_pariente:this.parientes[e]?.sexo_pariente||""})))}},methods:{formatearFecha(a){return new Date(a).toLocaleDateString("es-AR",{day:"2-digit",month:"2-digit",year:"2-digit"})},updateCuil(){const a=this.cuilInicio.padStart(2,"0").slice(0,2),e=this.cuilFin.slice(0,1),o=this.usuario.dni;this.usuario.cuil=`${a}${o}${e}`},restrictInput(a){const e=a.target.value,o=/[\s!@#$%^&*()_+=[\]{};':"\\|,<>?`´¨~¡/°¬¿]/g;o.test(e)&&(this.usuario.usuario=this.usuario.usuario.substring(0,this.usuario.usuario.length-1))},async solicitar(){this.cargando=!0;try{const a=new FormData;for(const t in this.usuario)a.append(t,this.usuario[t]);a.append("parientes",JSON.stringify(this.parientes));const e=this.$el.querySelector('input[name="archivo-dni"]').files[0],o=this.$el.querySelector('input[name="archivo-historial-medico"]').files[0];e&&a.append("dni",e),o&&a.append("historial",o),await t.A.post("/tarjetas/solicitar",a,{headers:{"Content-Type":"multipart/form-data"}}),vl.push("/beneficiario")}catch(a){this.mensajePopup=!0,this.mensaje="Error al solicitar: "+a.message}finally{this.cargando=!1}},async fetchDepartamentos(){try{const a=await t.A.get("/get/departamentos");this.departamentos=a.data}catch(a){console.error(a)}},async fetchLocalidades(a){try{const e=await t.A.get(`/get/localidades/${a}`);this.localidades=e.data,this.usuario.localidad="default",this.usuario.barrio="default"}catch(e){console.error(e)}},async fetchBarrios(a){try{const e=await t.A.get(`/get/barrios/${a}`);this.barrios=e.data,this.usuario.barrio="default"}catch(e){console.error(e)}},async fetchSolicitud(){try{const a=await t.A.get("/tarjetas/getSolicitud",{params:{dni:this.usuario.dni}});this.solicitud=a.data}catch(a){console.log(a.response.data)}},async fetchDatos(){this.cargando=!0;try{const a=await t.A.get("/beneficiarios/getDatosPadron",{params:{dni:this.usuario.dni}});Object.assign(this.usuario,a.data)}catch(a){console.log(a)}finally{this.cargando=!1}}},async mounted(){await this.fetchDepartamentos(),this.usuario.dni=await JSON.parse(localStorage.getItem("user")).dni,null!=localStorage.getItem("tieneTarjeta")?await this.fetchSolicitud():await this.fetchDatos()}};const Uo=(0,U.A)(xo,[["render",Do],["__scopeId","data-v-f7d90e70"]]);var Mo=Uo;const Xo={class:"flex-inline"};function To(a,e,o,t,i,r){const n=(0,s.g2)("SidebarEmpleadoComponent"),l=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",Xo,[(0,s.bF)(n),(0,s.bF)(l,{class:"vista"})])}const Po={key:0,class:"mensaje-container-fondo"},Vo={class:"mensaje-container"},$o={class:"modal-botones"},Jo={class:"contenedor"},Oo={class:"contenedor-botones"};function qo(a,e,o,t,i,r){const n=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",null,[i.mostrarModal?((0,s.uX)(),(0,s.CE)("div",Po,[(0,s.Lk)("div",Vo,[e[3]||(e[3]=(0,s.Lk)("span",{class:"mensaje"},"¿Cerrar sesión?",-1)),(0,s.Lk)("div",$o,[(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[0]||(e[0]=a=>this.mostrarModal=!1)},"No"),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[1]||(e[1]=(...a)=>r.cerrarSesion&&r.cerrarSesion(...a))},"Si")])])])):(0,s.Q3)("",!0),(0,s.Lk)("div",Jo,[(0,s.Lk)("div",Oo,[e[9]||(e[9]=(0,s.Lk)("a",{href:"/empleado",class:"sidebar-header"},[(0,s.Lk)("img",{src:"/recursos/logomds.png",class:"mv-auto img-logo",alt:""}),(0,s.Lk)("h4",{class:"white text-center"},[(0,s.eW)("Tarjetas"),(0,s.Lk)("br"),(0,s.eW)("Sociales")])],-1)),e[10]||(e[10]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",null,[(0,s.bF)(n,{class:(0,m.C4)(["item-btn",{active:"/empleado"==a.$route.path}]),to:"/empleado"},{default:(0,s.k6)((()=>e[4]||(e[4]=[(0,s.eW)("Inicio")]))),_:1},8,["class"])]),(0,s.Lk)("div",null,[(0,s.bF)(n,{class:(0,m.C4)(["item-btn",{active:"/empleado/solicitudes"===a.$route.path}]),to:"/empleado/solicitudes"},{default:(0,s.k6)((()=>e[5]||(e[5]=[(0,s.eW)("Solicitudes")]))),_:1},8,["class"])]),(0,s.Lk)("div",null,[(0,s.bF)(n,{class:(0,m.C4)(["item-btn",{active:"/empleado/beneficiarios"===a.$route.path}]),to:"/empleado/beneficiarios"},{default:(0,s.k6)((()=>e[6]||(e[6]=[(0,s.eW)("Beneficiarios")]))),_:1},8,["class"])]),(0,s.Lk)("div",null,[(0,s.bF)(n,{class:(0,m.C4)(["item-btn",{active:"/empleado/tarjetas"===a.$route.path}]),to:"/empleado/tarjetas"},{default:(0,s.k6)((()=>e[7]||(e[7]=[(0,s.eW)("Tarjetas")]))),_:1},8,["class"])]),(0,s.Lk)("div",null,[(0,s.bF)(n,{class:(0,m.C4)(["item-btn",{active:"/empleado/informes"===a.$route.path}]),to:"/empleado/informes"},{default:(0,s.k6)((()=>e[8]||(e[8]=[(0,s.eW)("Informes")]))),_:1},8,["class"])]),(0,s.Lk)("button",{class:"item-btn mt-4",onClick:e[2]||(e[2]=(...a)=>r.cerrarSesionModal&&r.cerrarSesionModal(...a))},"Cerrar Sesión")])])])}var Wo={data(){return{mostrarModal:!1}},methods:{cerrarSesionModal(){this.mostrarModal=!0},cerrarSesion(){this.mostrarModal=!1,localStorage.clear(),aa.emit("usuarioDeslogueado"),vl.push("/")}}};const Ro=(0,U.A)(Wo,[["render",qo],["__scopeId","data-v-c195f890"]]);var Qo=Ro,Bo=o(1714),Ho={components:{SidebarEmpleadoComponent:Qo},mounted(){"Notification"in window&&"default"===Notification.permission&&Notification.requestPermission().then((a=>{console.log("Permiso de notificación:",a)}));const a=(0,Bo.io)("https://nazadoto.com:3500");a.on("nueva_solicitud",(a=>{console.log("Nueva solicitud:",a),this.mostrarNotificacion(a)}))},methods:{mostrarNotificacion(a){"Notification"in window&&"granted"===Notification.permission?new Notification("Nueva Solicitud",{body:`De: ${a.nombre} - ${a.dni}`,icon:"/recursos/icono-noti.png"}):console.log("Notificaciones no permitidas por el usuario")}}};const zo=(0,U.A)(Ho,[["render",To],["__scopeId","data-v-760bf96a"]]);var Go=zo;const Ko={class:"vista"},Yo={class:"container"},Zo={class:"inline-flex"},at={class:"mt-2"},et={class:"tarjetas-inicio"},ot={key:0,class:"modal-fondo"},tt={class:"modal-contenido"},it={key:0,class:"error"},st={class:"modal-actions"};function rt(a,e,o,t,r,n){return(0,s.uX)(),(0,s.CE)("div",Ko,[(0,s.Lk)("div",Yo,[(0,s.Lk)("span",Zo,[(0,s.Lk)("h3",at,"Bienvenid@, "+(0,m.v_)(r.usuario.usuario?.toUpperCase()),1),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[0]||(e[0]=a=>r.abrirModal=!0)},"Cambiar contraseña")]),e[15]||(e[15]=(0,s.Lk)("p",{class:"lead"},"Desde aquí podés acceder a las principales funciones de gestión del sistema.",-1)),(0,s.Lk)("div",et,[(0,s.Lk)("div",{class:"card acceso",onClick:e[1]||(e[1]=e=>a.$router.push("/empleado/solicitudes"))},e[10]||(e[10]=[(0,s.Lk)("h5",null,"Gestión de Solicitudes",-1),(0,s.Lk)("p",null,"Evaluar, aprobar o rechazar solicitudes.",-1)])),(0,s.Lk)("div",{class:"card acceso",onClick:e[2]||(e[2]=e=>a.$router.push("/empleado/beneficiarios"))},e[11]||(e[11]=[(0,s.Lk)("h5",null,"Gestión de Beneficiarios",-1),(0,s.Lk)("p",null,"Agregar, modificar o buscar beneficiarios registrados.",-1)])),(0,s.Lk)("div",{class:"card acceso",onClick:e[3]||(e[3]=e=>a.$router.push("/empleado/tarjetas"))},e[12]||(e[12]=[(0,s.Lk)("h5",null,"Gestión de Tarjetas",-1),(0,s.Lk)("p",null,"Registrar y actualizar información de tarjetas sociales.",-1)])),(0,s.Lk)("div",{class:"card acceso",onClick:e[4]||(e[4]=e=>a.$router.push("/empleado/informes"))},e[13]||(e[13]=[(0,s.Lk)("h5",null,"Generar Informes",-1),(0,s.Lk)("p",null,"Obtener reportes de beneficiarios y tarjetas.",-1)]))]),r.abrirModal?((0,s.uX)(),(0,s.CE)("div",ot,[(0,s.Lk)("div",tt,[e[14]||(e[14]=(0,s.Lk)("h3",null,"Cambiar contraseña",-1)),(0,s.bo)((0,s.Lk)("input",{class:"form-control","onUpdate:modelValue":e[5]||(e[5]=a=>r.form.contraseñaActual=a),type:"password",placeholder:"Contraseña actual"},null,512),[[i.Jo,r.form.contraseñaActual]]),(0,s.bo)((0,s.Lk)("input",{class:"form-control","onUpdate:modelValue":e[6]||(e[6]=a=>r.form.contraseñaNueva=a),type:"password",placeholder:"Nueva contraseña"},null,512),[[i.Jo,r.form.contraseñaNueva]]),(0,s.bo)((0,s.Lk)("input",{class:"form-control","onUpdate:modelValue":e[7]||(e[7]=a=>r.form.repetirContraseña=a),type:"password",placeholder:"Repetir nueva contraseña"},null,512),[[i.Jo,r.form.repetirContraseña]]),r.error?((0,s.uX)(),(0,s.CE)("p",it,(0,m.v_)(r.error),1)):(0,s.Q3)("",!0),(0,s.Lk)("div",st,[(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[8]||(e[8]=(...a)=>n.cambiarContraseña&&n.cambiarContraseña(...a))},"Guardar"),(0,s.Lk)("button",{class:"btn",onClick:e[9]||(e[9]=a=>r.abrirModal=!1)},"Cancelar")])])])):(0,s.Q3)("",!0)])])}var nt={data(){return{usuario:"",abrirModal:!1,error:"",form:{"contraseñaActual":"","contraseñaNueva":"","repetirContraseña":""}}},mounted(){this.usuario=JSON.parse(localStorage.getItem("user"))},methods:{async"cambiarContraseña"(){if(this.error="",this.form.contraseñaNueva===this.form.repetirContraseña)try{await t.A.post("/auth/cambiarContrasena",{usuario:this.usuario.usuario,"contraseñaActual":this.form.contraseñaActual,"contraseñaNueva":this.form.contraseñaNueva}),alert("Contraseña cambiada correctamente."),this.abrirModal=!1,this.form={"contraseñaActual":"","contraseñaNueva":"","repetirContraseña":""}}catch(a){this.error=a.response?.data?.message||"Error al cambiar la contraseña."}else this.error="Las contraseñas nuevas no coinciden."}}};const lt=(0,U.A)(nt,[["render",rt],["__scopeId","data-v-608a327d"]]);var ct=lt;const dt={class:"vista"},ut={key:0,class:"pantalla-carga-vista text-center"},mt={key:1,class:"mensaje-container-fondo"},pt={class:"mensaje-container"},ht={class:"mensaje"},ft={key:2,class:"mensaje-container-fondo"},bt={class:"mensaje-container"},kt={class:"flex"},vt={class:"container"},Lt={class:"fila"},gt={class:"w-5"},jt={class:"btns-comprobar"},_t=["disabled"],Ct=["disabled"],yt={class:"fila"},At={class:"w-100"},Et=["disabled"],wt={class:"fila"},St={class:"w-5"},Nt=["disabled"],It={class:"w-5"},Ft={class:"input-group"},Dt=["disabled"],xt={class:"input-group-text"},Ut=["disabled"],Mt={class:"fila"},Xt={class:"w-3"},Tt=["disabled"],Pt={class:"w-3"},Vt=["disabled"],$t={class:"w-3"},Jt=["disabled"],Ot={class:"fila"},qt={class:"w-3"},Wt=["disabled"],Rt=["value"],Qt={class:"w-3"},Bt=["disabled"],Ht=["value"],zt={class:"w-3"},Gt=["disabled"],Kt=["value"],Yt={class:"fila"},Zt={class:"w-5"},ai=["disabled"],ei={class:"w-5"},oi=["disabled"],ti={class:"fila"},ii={class:"w-5"},si=["disabled"],ri={class:"w-5"},ni=["disabled"],li={class:"fila"},ci={key:0,class:"w-100"},di={class:"historial"},ui={class:"fila mt-2"},mi={class:"w-5 ml-auto"},pi=["disabled"],hi={key:0,class:"vista-previa"},fi={class:"archivo-preview"},bi={class:"archivo"},ki=["disabled"],vi=["href"],Li=["src","alt"],gi=["src"],ji=["title"],_i={class:"fila"},Ci={class:"w-5"},yi=["for"],Ai=["id","onUpdate:modelValue"],Ei={class:"w-5"},wi=["for"],Si=["id","onUpdate:modelValue"],Ni={class:"fila"},Ii={class:"w-5"},Fi=["for"],Di=["id","onUpdate:modelValue"],xi={class:"w-5"},Ui=["for"],Mi=["id","onUpdate:modelValue"],Xi={class:"w-5"},Ti=["for"],Pi=["id","onUpdate:modelValue"],Vi={class:"fila m-4"},$i=["disabled"],Ji=["disabled"];function Oi(a,e,o,t,r,n){const l=(0,s.g2)("TarjetaModal");return(0,s.uX)(),(0,s.CE)("div",dt,[r.cargandoDatos?((0,s.uX)(),(0,s.CE)("div",ut,e[28]||(e[28]=[(0,s.Lk)("div",{class:"logo-carga"},[(0,s.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,s.Lk)("div",{class:"texto-carga"},"Cargando...")],-1)]))):(0,s.Q3)("",!0),r.mensajePopup?((0,s.uX)(),(0,s.CE)("div",mt,[(0,s.Lk)("div",pt,[(0,s.Lk)("span",ht,(0,m.v_)(r.mensaje),1),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[0]||(e[0]=a=>{this.mensajePopup=!1,this.mensaje=""})},"Ok")])])):(0,s.Q3)("",!0),r.quitarArchivoMsgPopup?((0,s.uX)(),(0,s.CE)("div",ft,[(0,s.Lk)("div",bt,[e[29]||(e[29]=(0,s.Lk)("span",{class:"mensaje"},"¿Borrar archivo adjunto?",-1)),(0,s.Lk)("span",kt,[(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[1]||(e[1]=(...a)=>n.quitarArchivo&&n.quitarArchivo(...a))},"Si, borrar"),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[2]||(e[2]=a=>this.quitarArchivoMsgPopup=!1)},"No")])])])):(0,s.Q3)("",!0),(0,s.Lk)("div",vt,[e[53]||(e[53]=(0,s.Lk)("h3",{class:"mt-2"},"Datos de Beneficiario",-1)),(0,s.Lk)("form",{class:"formulario-beneficiario",onSubmit:e[27]||(e[27]=(0,i.D$)(((...a)=>n.cargarBeneficiario&&n.cargarBeneficiario(...a)),["prevent"]))},[(0,s.Lk)("div",Lt,[(0,s.Lk)("div",gt,[e[30]||(e[30]=(0,s.Lk)("label",{for:"dni",class:"form-label"},"DNI",-1)),(0,s.bo)((0,s.Lk)("input",{id:"dni",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>r.form.dni=a),type:"number",required:"",onKeydown:e[4]||(e[4]=(0,i.jR)((0,i.D$)(((...a)=>n.comprobarPadron&&n.comprobarPadron(...a)),["prevent"]),["enter"]))},null,544),[[i.Jo,r.form.dni]])]),(0,s.Lk)("div",jt,[(0,s.Lk)("button",{type:"button",class:"btn-mensaje",onClick:e[5]||(e[5]=(...a)=>n.comprobarPadron&&n.comprobarPadron(...a)),disabled:""==r.form.dni},"Comprobar en padrón",8,_t),(0,s.Lk)("button",{type:"button",class:"btn-tarjeta orange",onClick:e[6]||(e[6]=(...a)=>n.verTarjeta&&n.verTarjeta(...a)),disabled:!r.tieneTarjeta},"Ver Tarjeta",8,Ct),(0,s.bF)(l,{visible:r.modalVisible,form:r.tarjetaForm,onCerrar:e[7]||(e[7]=a=>r.modalVisible=!1)},null,8,["visible","form"])])]),(0,s.Lk)("div",yt,[(0,s.Lk)("div",At,[(0,s.Lk)("button",{type:"button",class:"btn-tarjeta",disabled:!r.botonModificacion,onClick:e[8]||(e[8]=a=>{r.habilitarModificacion=!0,r.habilitarImprimir=!0})},"Modificar Datos",8,Et)])]),(0,s.Lk)("div",wt,[(0,s.Lk)("div",St,[e[31]||(e[31]=(0,s.Lk)("label",{for:"nombre",class:"form-label"},"Nombre completo",-1)),(0,s.bo)((0,s.Lk)("input",{id:"nombre",class:"form-control","onUpdate:modelValue":e[9]||(e[9]=a=>r.form.nombre=a),type:"text",disabled:!r.habilitarModificacion},null,8,Nt),[[i.Jo,r.form.nombre]])]),(0,s.Lk)("div",It,[e[32]||(e[32]=(0,s.Lk)("label",{for:"cuil",class:"form-label"},"CUIL",-1)),(0,s.Lk)("div",Ft,[(0,s.bo)((0,s.Lk)("input",{class:"form-control text-center",maxlength:"2",type:"text","onUpdate:modelValue":e[10]||(e[10]=a=>r.cuilInicio=a),onInput:e[11]||(e[11]=(...a)=>n.updateCuil&&n.updateCuil(...a)),disabled:!r.habilitarModificacion,style:{"max-width":"3em"}},null,40,Dt),[[i.Jo,r.cuilInicio]]),(0,s.Lk)("span",xt,(0,m.v_)(r.form.dni),1),(0,s.bo)((0,s.Lk)("input",{class:"form-control text-center",maxlength:"1",type:"text","onUpdate:modelValue":e[12]||(e[12]=a=>r.cuilFin=a),onInput:e[13]||(e[13]=(...a)=>n.updateCuil&&n.updateCuil(...a)),disabled:!r.habilitarModificacion,style:{"max-width":"3em"}},null,40,Ut),[[i.Jo,r.cuilFin]])])])]),(0,s.Lk)("div",Mt,[(0,s.Lk)("div",Xt,[e[33]||(e[33]=(0,s.Lk)("label",{for:"fecha_nacimiento",class:"form-label"},"Fecha de Nacimiento",-1)),(0,s.bo)((0,s.Lk)("input",{id:"fecha_nacimiento",class:"form-control","onUpdate:modelValue":e[14]||(e[14]=a=>r.form.fecha_nacimiento=a),type:"date",disabled:!r.habilitarModificacion},null,8,Tt),[[i.Jo,r.form.fecha_nacimiento]])]),(0,s.Lk)("div",Pt,[e[35]||(e[35]=(0,s.Lk)("label",{for:"sexo",class:"form-label"},"Sexo",-1)),(0,s.bo)((0,s.Lk)("select",{id:"sexo",class:"form-select","onUpdate:modelValue":e[15]||(e[15]=a=>r.form.sexo=a),disabled:!r.habilitarModificacion},e[34]||(e[34]=[(0,s.Lk)("option",{disabled:"",value:"default"},"Seleccione",-1),(0,s.Lk)("option",{value:"F"},"Femenino",-1),(0,s.Lk)("option",{value:"M"},"Masculino",-1)]),8,Vt),[[i.u1,r.form.sexo]])]),(0,s.Lk)("div",$t,[e[36]||(e[36]=(0,s.Lk)("label",{for:"cant_parientes",class:"form-label"},"Cant. Parientes (hijos)",-1)),(0,s.bo)((0,s.Lk)("input",{id:"cant_parientes",class:"form-control","onUpdate:modelValue":e[16]||(e[16]=a=>r.form.cant_parientes=a),type:"number",disabled:!r.habilitarModificacion},null,8,Jt),[[i.Jo,r.form.cant_parientes]])])]),(0,s.Lk)("div",Ot,[(0,s.Lk)("div",qt,[e[38]||(e[38]=(0,s.Lk)("label",{for:"cod_dpto",class:"form-label"},"Departamento",-1)),(0,s.bo)((0,s.Lk)("select",{id:"cod_dpto",class:"form-select","onUpdate:modelValue":e[17]||(e[17]=a=>r.form.cod_dpto=a),disabled:!r.habilitarModificacion},[e[37]||(e[37]=(0,s.Lk)("option",{disabled:"",value:"default"},"Seleccione",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.departamentos,(a=>((0,s.uX)(),(0,s.CE)("option",{key:a.cod_dpto,value:a.cod_dpto},(0,m.v_)(a.descripcion),9,Rt)))),128))],8,Wt),[[i.u1,r.form.cod_dpto]])]),(0,s.Lk)("div",Qt,[e[40]||(e[40]=(0,s.Lk)("label",{for:"cod_localidad",class:"form-label"},"Localidad",-1)),(0,s.bo)((0,s.Lk)("select",{id:"cod_localidad",class:"form-select","onUpdate:modelValue":e[18]||(e[18]=a=>r.form.cod_localidad=a),disabled:!r.habilitarModificacion},[e[39]||(e[39]=(0,s.Lk)("option",{disabled:"",value:"default"},"Seleccione",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.localidades,(a=>((0,s.uX)(),(0,s.CE)("option",{key:a.cod_localidad,value:a.cod_localidad},(0,m.v_)(a.descripcion),9,Ht)))),128))],8,Bt),[[i.u1,r.form.cod_localidad]])]),(0,s.Lk)("div",zt,[e[42]||(e[42]=(0,s.Lk)("label",{for:"cod_barrio",class:"form-label"},"Barrio",-1)),(0,s.bo)((0,s.Lk)("select",{id:"cod_barrio",class:"form-select","onUpdate:modelValue":e[19]||(e[19]=a=>r.form.cod_barrio=a),disabled:!r.habilitarModificacion},[e[41]||(e[41]=(0,s.Lk)("option",{disabled:"",value:"default"},"Seleccione",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.barrios,(a=>((0,s.uX)(),(0,s.CE)("option",{key:a.cod_barrio,value:a.cod_barrio},(0,m.v_)(a.descripcion),9,Kt)))),128))],8,Gt),[[i.u1,r.form.cod_barrio]])])]),(0,s.Lk)("div",Yt,[(0,s.Lk)("div",Zt,[e[43]||(e[43]=(0,s.Lk)("label",{for:"domicilio",class:"form-label"},"Domicilio",-1)),(0,s.bo)((0,s.Lk)("input",{id:"domicilio",class:"form-control","onUpdate:modelValue":e[20]||(e[20]=a=>r.form.domicilio=a),type:"text",disabled:!r.habilitarModificacion},null,8,ai),[[i.Jo,r.form.domicilio]])]),(0,s.Lk)("div",ei,[e[45]||(e[45]=(0,s.Lk)("label",{for:"estado",class:"form-label"},"Estado",-1)),(0,s.bo)((0,s.Lk)("select",{id:"estado",class:"form-select","onUpdate:modelValue":e[21]||(e[21]=a=>r.form.estado=a),disabled:!r.habilitarModificacion},e[44]||(e[44]=[(0,s.Lk)("option",{disabled:"",value:"default"},"Seleccione",-1),(0,s.Lk)("option",{value:null},"Sin Tarjeta",-1),(0,s.Lk)("option",{value:"SOLICITADA"},"Solicitada",-1),(0,s.Lk)("option",{value:"PENDIENTE"},"Pendiente",-1),(0,s.Lk)("option",{value:"ENTREGADA"},"Entregada",-1),(0,s.Lk)("option",{value:"BAJA"},"Baja",-1)]),8,oi),[[i.u1,r.form.estado]])])]),(0,s.Lk)("div",ti,[(0,s.Lk)("div",ii,[e[46]||(e[46]=(0,s.Lk)("label",{for:"observaciones",class:"form-label"},"Agregar Observación",-1)),(0,s.bo)((0,s.Lk)("input",{id:"observaciones",class:"form-control","onUpdate:modelValue":e[22]||(e[22]=a=>r.form.observaciones=a),type:"text",disabled:!r.habilitarModificacion},null,8,si),[[i.Jo,r.form.observaciones]])]),(0,s.Lk)("div",ri,[e[47]||(e[47]=(0,s.Lk)("label",{for:"importe_acreditado",class:"form-label"},"Importe Acreditado",-1)),(0,s.bo)((0,s.Lk)("input",{id:"importe_acreditado",class:"form-control","onUpdate:modelValue":e[23]||(e[23]=a=>r.form.importe_acreditado=a),type:"number",step:"0.01",disabled:!r.habilitarModificacion},null,8,ni),[[i.Jo,r.form.importe_acreditado]])])]),(0,s.Lk)("div",li,[r.form.historias.length>0?((0,s.uX)(),(0,s.CE)("div",ci,[e[48]||(e[48]=(0,s.Lk)("label",{for:"historial",class:"form-label"},"Historial",-1)),(0,s.Lk)("div",di,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.form.historias,((a,e)=>((0,s.uX)(),(0,s.CE)("span",{class:"w-100 block",key:e},[(0,s.Lk)("strong",null,(0,m.v_)(a.fecha),1),(0,s.eW)(" "+(0,m.v_)(a.observaciones),1)])))),128))])])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",ui,[(0,s.Lk)("div",mi,[e[49]||(e[49]=(0,s.Lk)("label",{for:"archivo",class:"btn-archivo"},[(0,s.Lk)("img",{class:"pdf-logo",src:"/recursos/logo-pdf.png",alt:""}),(0,s.eW)(" Adjuntar archivo")],-1)),(0,s.Lk)("input",{class:"form-control",type:"file",name:"archivo",id:"archivo",accept:".pdf, .xls, .doc, .docx",hidden:"",onChange:e[24]||(e[24]=(...a)=>n.manejarDocumento&&n.manejarDocumento(...a)),disabled:!r.habilitarModificacion},null,40,pi)])]),null!=r.archivo?((0,s.uX)(),(0,s.CE)("div",hi,[(0,s.Lk)("div",fi,[(0,s.Lk)("a",bi,[(0,s.Lk)("button",{type:"button",class:"btn-quitar",onClick:e[25]||(e[25]=(...a)=>n.quitarArchivoMsg&&n.quitarArchivoMsg(...a)),disabled:!r.habilitarModificacion},"×",8,ki),(0,s.Lk)("a",{class:"to-hidden",href:`https://nazadoto.com:3500/uploads/beneficiario/${r.form.dni}/${r.archivo.nombre}`,target:"_blank"},["imagen"===r.archivo.tipo?((0,s.uX)(),(0,s.CE)("img",{key:0,src:r.archivo.vistaPrevia,alt:r.archivo.nombre,class:"imagen-preview"},null,8,Li)):(0,s.Q3)("",!0),"documento"===r.archivo.tipo?((0,s.uX)(),(0,s.CE)("img",{key:1,src:r.archivo.vistaPrevia,alt:"Documento",class:"documento-preview"},null,8,gi)):(0,s.Q3)("",!0),(0,s.Lk)("div",{class:"desc-archivo",title:r.archivo.nombre},(0,m.v_)(r.archivo.nombre),9,ji)],8,vi)])])])):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.parientesArray,((a,o)=>((0,s.uX)(),(0,s.CE)("span",{key:o},[e[52]||(e[52]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("h4",null,"Pariente "+(0,m.v_)(o+1),1),(0,s.Lk)("div",_i,[(0,s.Lk)("div",Ci,[(0,s.Lk)("label",{for:"pariente"+o+"1dni"},"DNI",8,yi),(0,s.bo)((0,s.Lk)("input",{id:"pariente"+o+"1dni",type:"number",class:"form-control","onUpdate:modelValue":a=>r.parientesArray[o].dni=a},null,8,Ai),[[i.Jo,r.parientesArray[o].dni]])]),(0,s.Lk)("div",Ei,[(0,s.Lk)("label",{for:"pariente"+o+"1nom"},"Nombre Completo",8,wi),(0,s.bo)((0,s.Lk)("input",{id:"pariente"+o+"1nom",type:"text",class:"form-control","onUpdate:modelValue":a=>r.parientesArray[o].nombre=a},null,8,Si),[[i.Jo,r.parientesArray[o].nombre]])])]),(0,s.Lk)("div",Ni,[(0,s.Lk)("div",Ii,[(0,s.Lk)("label",{for:"pariente"+o+"1fecha_nacimiento",class:"form-label"},"Fecha de Nacimiento",8,Fi),(0,s.bo)((0,s.Lk)("input",{id:"pariente"+o+"1fecha_nacimiento",class:"form-control","onUpdate:modelValue":a=>r.parientesArray[o].fecha_nacimiento=a,type:"date"},null,8,Di),[[i.Jo,r.parientesArray[o].fecha_nacimiento]])]),(0,s.Lk)("div",xi,[(0,s.Lk)("label",{for:"pariente"+o+"1tipo",class:"form-label"},"Tipo",8,Ui),(0,s.bo)((0,s.Lk)("select",{id:"pariente"+o+"1tipo",class:"form-select","onUpdate:modelValue":a=>r.parientesArray[o].tipo=a},e[50]||(e[50]=[(0,s.Lk)("option",{disabled:"",value:"default"},"Seleccione",-1),(0,s.Lk)("option",{value:"hijo"},"Hijo",-1),(0,s.Lk)("option",{value:"conyugue"},"Cónyugue",-1),(0,s.Lk)("option",{value:"otro"},"Otro",-1)]),8,Mi),[[i.u1,r.parientesArray[o].tipo]])]),(0,s.Lk)("div",Xi,[(0,s.Lk)("label",{for:"pariente"+o+"1sexo",class:"form-label"},"Sexo",8,Ti),(0,s.bo)((0,s.Lk)("select",{id:"pariente"+o+"1sexo",class:"form-select","onUpdate:modelValue":a=>r.parientesArray[o].sexo=a},e[51]||(e[51]=[(0,s.Lk)("option",{disabled:"",value:"default"},"Seleccione",-1),(0,s.Lk)("option",{value:"F"},"Femenino",-1),(0,s.Lk)("option",{value:"M"},"Masculino",-1)]),8,Pi),[[i.u1,r.parientesArray[o].sexo]])])])])))),128)),(0,s.Lk)("div",Vi,[(0,s.Lk)("button",{type:"button",class:"btn-mensaje btn-imprimir",disabled:!r.habilitarImprimir,onClick:e[26]||(e[26]=(...a)=>n.imprimirFichaPDF&&n.imprimirFichaPDF(...a))},"Imprimir",8,$i),(0,s.Lk)("button",{type:"submit",class:"btn-mensaje",disabled:!r.habilitarModificacion},"Guardar",8,Ji)])],32)])])}const qi={key:0,class:"modal-overlay"},Wi={class:"modal-content"},Ri={class:"formulario-beneficiario"},Qi={class:"fila"},Bi={class:"w-5"},Hi=["value"],zi={class:"w-5"},Gi=["value"],Ki={class:"fila"},Yi={class:"w-5"},Zi=["value"],as={class:"w-5"},es=["value"],os={class:"fila"},ts={class:"w-5"},is=["value"],ss={class:"w-5"},rs=["value"];function ns(a,e,o,t,i,r){return o.visible?((0,s.uX)(),(0,s.CE)("div",qi,[(0,s.Lk)("div",Wi,[(0,s.Lk)("button",{class:"btn-cerrar",onClick:e[0]||(e[0]=e=>a.$emit("cerrar"))},"✕"),e[7]||(e[7]=(0,s.Lk)("h3",null,"Datos de Tarjeta Social",-1)),(0,s.Lk)("form",Ri,[(0,s.Lk)("div",Qi,[(0,s.Lk)("div",Bi,[e[1]||(e[1]=(0,s.Lk)("label",null,"DNI",-1)),(0,s.Lk)("input",{class:"form-control",value:o.form.dni,disabled:""},null,8,Hi)]),(0,s.Lk)("div",zi,[e[2]||(e[2]=(0,s.Lk)("label",null,"Número de Cuenta",-1)),(0,s.Lk)("input",{class:"form-control",value:o.form.num_cuenta,disabled:""},null,8,Gi)])]),(0,s.Lk)("div",Ki,[(0,s.Lk)("div",Yi,[e[3]||(e[3]=(0,s.Lk)("label",null,"Número de Tarjeta",-1)),(0,s.Lk)("input",{class:"form-control",value:o.form.num_tarjeta,disabled:""},null,8,Zi)]),(0,s.Lk)("div",as,[e[4]||(e[4]=(0,s.Lk)("label",null,"Fecha de Registro",-1)),(0,s.Lk)("input",{class:"form-control",value:o.form.fecha_registro,disabled:""},null,8,es)])]),(0,s.Lk)("div",os,[(0,s.Lk)("div",ts,[e[5]||(e[5]=(0,s.Lk)("label",null,"Estado",-1)),(0,s.Lk)("input",{class:"form-control",value:o.form.estado,disabled:""},null,8,is)]),(0,s.Lk)("div",ss,[e[6]||(e[6]=(0,s.Lk)("label",null,"Importe Acreditado",-1)),(0,s.Lk)("input",{class:"form-control",value:o.form.importe_acreditado,disabled:""},null,8,rs)])])])])])):(0,s.Q3)("",!0)}var ls={props:{visible:Boolean,form:Object}};const cs=(0,U.A)(ls,[["render",ns],["__scopeId","data-v-3f8ace48"]]);var ds=cs,us={components:{TarjetaModal:ds},data(){return{cuilInicio:"",cuilFin:"",form:{dni:"",nombre:"",cuil:"",fecha_nacimiento:"",sexo:"default",cod_dpto:"default",cod_localidad:"default",cod_barrio:"default",domicilio:"",fecha_registro:"",hora_registro:"",estado:"default",fecha_modificacion:"",hora_modificacion:"",observaciones:"",cant_parientes:"",importe_acreditado:"",historias:[]},quitarArchivoMsgPopup:!1,botonModificacion:!1,departamentos:[],localidades:[],barrios:[],parientesArray:[],archivo:null,habilitarModificacion:!1,habilitarImprimir:!1,tieneTarjeta:!1,cargandoDatos:!1,mensajePopup:!1,mensaje:"",tarjetaForm:{dni:"",num_cuenta:"",num_tarjeta:"",fecha_registro:"",estado:"",importe_acreditado:""},modalVisible:!1}},watch:{"form.cod_dpto"(a){this.cargarLocalidades(a),this.form.cod_localidad="",this.form.cod_barrio="",this.barrios=[]},"form.cod_localidad"(a){this.cargarBarrios(a),this.form.cod_barrio=""},"form.cant_parientes"(a){this.actualizarParientes(a)}},async mounted(){await this.cargarDepartamentos()},methods:{updateCuil(){const a=this.cuilInicio.padStart(2,"0").slice(0,2),e=this.cuilFin.slice(0,1),o=this.form.dni;this.form.cuil=`${a}${o}${e}`},capitalize(a){return a.charAt(0).toUpperCase()+a.slice(1)},async imprimirFichaPDF(){const a=new Ne.Ay,e=8;let o=20;const t=(t,i)=>{a.setFont("Helvetica","bold"),a.text(`${t}:`,20,o),a.setFont("Helvetica","normal"),a.text(`${i||"-"}`,80,o),a.setFontSize(11),o+=e},i=(e,o,t=11)=>{a.setFontSize(t),a.setFont("Helvetica","bold");const i=a.getStringUnitWidth(e)*t/a.internal.scaleFactor,s=(a.internal.pageSize.getWidth()-i)/2;a.text(e,s,o)},s=a=>fetch(a).then((a=>a.blob())).then((a=>new Promise((e=>{const o=new FileReader;o.onloadend=()=>e(o.result),o.readAsDataURL(a)})))),r=await s("/recursos/icono-mds-negro.png"),n=await s("/recursos/icono-gobierno.png");a.addImage(r,"PNG",30,10,60,15),a.addImage(n,"PNG",150,10,15,15),a.setFont("Helvetica","normal"),a.setFontSize(11),a.text("SANTIAGO DEL ESTERO",160,35,{align:"center"});const l=this.capitalize((new Date).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"}));a.text(l,160,40,{align:"center"}),o=50,i("BENEFICIARIO DE TARJETA SOCIAL",o),o+=2*e,t("DNI",this.form.dni),t("CUIL",this.form.cuil),t("Nombre",this.form.nombre),t("Fecha de Nacimiento",this.form.fecha_nacimiento),t("Sexo","F"===this.form.sexo?"Femenino":"Masculino"),t("Cantidad de Parientes",this.form.cant_parientes),t("Domicilio",this.form.domicilio),t("Departamento",this.obtenerDescripcion(this.departamentos,this.form.cod_dpto)),t("Localidad",this.obtenerDescripcion(this.localidades,this.form.cod_localidad)),t("Barrio",this.obtenerDescripcion(this.barrios,this.form.cod_barrio)),t("Estado",this.form.estado),t("Historial",this.form.observaciones||"-");for(const c of this.form.historias)t(c.fecha,c.observaciones);o+=e,this.parientesArray.length>0&&(a.setFont("Helvetica","bold"),a.text("-- Parientes --",20,o),o+=e,a.setFont("Helvetica","normal"),this.parientesArray.forEach(((t,i)=>{a.text(`${i+1}. DNI: ${t.dni||"-"} | Nombre: ${t.nombre||"-"}`,25,o),o+=e,a.text(`   Nacimiento: ${t.fecha_nacimiento||"-"} | Sexo: ${"F"===t.sexo?"Femenino":"M"===t.sexo?"Masculino":"-"}`,25,o),o+=e})),o+=e),t("Fecha de Registro",this.form.fecha_registro),t("Hora de Registro",this.form.hora_registro),t("Fecha de Modificación",this.form.fecha_modificacion),t("Hora de Modificación",this.form.hora_modificacion),a.save(`ficha_beneficiario_${this.form.dni}.pdf`)},obtenerDescripcion(a,e){const o=a.find((a=>a.cod_dpto===e||a.cod_localidad===e||a.cod_barrio===e));return o?o.descripcion:"-"},quitarArchivoMsg(){this.quitarArchivoMsgPopup=!0},manejarDocumento(a){const e=a.target.files[0];e&&(this.archivo={tipo:"documento",archivo:e,vistaPrevia:e.name.endsWith(".pdf")?"/recursos/logo-pdf.png":e.name.endsWith(".xls")?"/recursos/logo-xls.png":"/recursos/logo-docx.png",nombre:e.name})},async verTarjeta(){if(this.cargandoDatos=!0,this.form.dni)try{const{data:a}=await t.A.get("/tarjetas/getDatos",{params:{dni:this.form.dni}});a&&Object.keys(a).length>0?(this.tarjetaForm={...a},this.modalVisible=!0):this.mostrarMensaje("No se encontró una tarjeta asociada al DNI.")}catch(a){console.error(a),this.mostrarMensaje("Error al buscar la tarjeta.")}finally{this.cargandoDatos=!1}},async cargarDepartamentos(){try{const{data:a}=await t.A.get("/beneficiarios/departamentos");this.departamentos=a}catch(a){console.error("Error cargando departamentos",a)}},async cargarLocalidades(a){if(a)try{const{data:e}=await t.A.get("/beneficiarios/localidades",{params:{cod_dpto:a}});this.localidades=e}catch(e){console.error("Error cargando localidades",e)}},async cargarBarrios(a){if(a)try{const{data:e}=await t.A.get("/beneficiarios/barrios",{params:{cod_localidad:a}});this.barrios=e}catch(e){console.error("Error cargando barrios",e)}},mostrarMensaje(a){this.mensajePopup=!0,this.mensaje=a},actualizarParientes(a){const e=parseInt(a),o=[];for(let t=0;t<e;t++)o.push({dni:"",nombre:"",fecha_nacimiento:"",sexo:""});this.parientesArray=o},resetForm(){this.cuilInicio="",this.cuilFin="",this.form.nombre="",this.form.cuil="",this.form.fecha_nacimiento="",this.form.sexo="default",this.form.cod_dpto="default",this.form.cod_localidad="default",this.form.cod_barrio="default",this.form.domicilio="",this.form.fecha_registro="",this.form.hora_registro="",this.form.estado="default",this.form.fecha_modificacion="",this.form.hora_modificacion="",this.form.observaciones="",this.form.cant_parientes="",this.form.historias=[],this.form.importe_acreditado="",this.parientesArray=[],this.archivo=null,this.tieneTarjeta=!1,this.tarjetaForm={dni:"",num_cuenta:"",num_tarjeta:"",fecha_registro:"",estado:"",importe_acreditado:""}},async comprobarPadron(){this.cargandoDatos=!0,this.resetForm();try{const{data:a}=await t.A.get("/beneficiarios/getDatos",{params:{dni:this.form.dni}});if(a&&Object.keys(a).length>0){for(const e in a)e in this.form&&(this.form[e]=a[e],""!=this.form.cuil&&(this.cuilInicio=this.form.cuil.slice(0,2),this.cuilFin=this.form.cuil.slice(10)));a.archivo?this.archivo={tipo:a.archivo.endsWith(".pdf")||a.archivo.endsWith(".xls")||a.archivo.endsWith(".doc")||a.archivo.endsWith(".docx")?"documento":"imagen",nombre:a.archivo,vistaPrevia:a.archivo.endsWith(".pdf")?"/recursos/logo-pdf.png":a.archivo.endsWith(".xls")?"/recursos/logo-xls.png":a.archivo.endsWith(".doc")||a.archivo.endsWith(".docx")?"/recursos/logo-docx.png":`/uploads/${a.archivo}`,id:"archivo-servidor"}:this.archivo=null,null!=a.estado?this.tieneTarjeta=!0:this.tieneTarjeta=!1,a.cod_dpto&&(this.form.cod_dpto=a.cod_dpto,await this.cargarLocalidades(a.cod_dpto)),a.cod_localidad&&(this.form.cod_localidad=a.cod_localidad,await this.cargarBarrios(a.cod_localidad)),a.cod_barrio&&(this.form.cod_barrio=a.cod_barrio),this.mostrarMensaje("Datos cargados automáticamente.")}else this.mostrarMensaje("No se encontró el DNI en ninguna fuente.")}catch(a){console.error(a),this.mostrarMensaje("No se encontró el DNI en ninguna fuente.")}finally{this.botonModificacion=!0,this.cargandoDatos=!1,this.habilitarImprimir=!0}},async quitarArchivo(){this.quitarArchivoMsgPopup=!1,this.cargandoDatos=!0;try{await t.A.delete("/beneficiarios/quitarArchivo",{params:{dni:this.form.dni}}),this.archivo=null,this.form.archivo=null}catch(a){console.error(a),this.mostrarMensaje("Error al eliminar el archivo.")}finally{this.cargandoDatos=!1,this.mostrarMensaje("Archivo eliminado correctamente.")}},async cargarBeneficiario(){const a=new Date,e=a.toISOString().split("T")[0],o=a.toTimeString().split(" ")[0].slice(0,5);this.form.fecha_registro||(this.form.fecha_registro=e),this.form.hora_registro||(this.form.hora_registro=o),this.form.fecha_modificacion=e,this.form.hora_modificacion=o;const i=new FormData;i.append("beneficiario",JSON.stringify(this.form)),i.append("parientes",JSON.stringify(this.parientesArray)),i.append("archivo",null!=this.archivo?this.archivo.archivo:null);try{const a=await t.A.post("/beneficiarios/update",i,{headers:{"Content-Type":"multipart/form-data"}});a.data.success?this.mostrarMensaje("Beneficiario guardado correctamente."):this.mostrarMensaje("Error al guardar beneficiario.")}catch(s){console.error("Error al conectar con el servidor:",s),this.mostrarMensaje("Error de conexión.")}}}};const ms=(0,U.A)(us,[["render",Oi],["__scopeId","data-v-5e6436d5"]]);var ps=ms;const hs={class:"vista"},fs={key:0,class:"pantalla-carga-vista text-center"},bs={key:1,class:"mensaje-container-fondo"},ks={class:"mensaje-container"},vs={class:"mensaje"},Ls={class:"container"},gs={class:"fila"},js={class:"w-5"},_s={class:"w-5 mt-auto"},Cs={class:"fila"},ys={class:"w-100"},As=["disabled"],Es={class:"fila"},ws={class:"w-5"},Ss={class:"w-5"},Ns={class:"fila"},Is={class:"w-5"},Fs={class:"w-5"},Ds={class:"fila"},xs={class:"w-5"},Us=["disabled"],Ms={class:"w-5"},Xs=["disabled"],Ts={class:"fila"},Ps={class:"w-100"},Vs=["disabled"],$s={key:0,class:"w-100"},Js={class:"historial"};function Os(a,e,o,t,r,n){return(0,s.uX)(),(0,s.CE)("div",hs,[r.cargandoDatos?((0,s.uX)(),(0,s.CE)("div",fs,e[13]||(e[13]=[(0,s.Lk)("div",{class:"logo-carga"},[(0,s.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,s.Lk)("div",{class:"texto-carga"},"Cargando...")],-1)]))):(0,s.Q3)("",!0),r.mensajePopup?((0,s.uX)(),(0,s.CE)("div",bs,[(0,s.Lk)("div",ks,[(0,s.Lk)("span",vs,(0,m.v_)(r.mensaje),1),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[0]||(e[0]=a=>{this.mensajePopup=!1,this.mensaje=""})},"Ok")])])):(0,s.Q3)("",!0),(0,s.Lk)("div",Ls,[e[25]||(e[25]=(0,s.Lk)("h3",{class:"mt-2"},"Datos de Tarjeta Social",-1)),(0,s.Lk)("form",{class:"formulario-beneficiario",onSubmit:e[12]||(e[12]=(0,i.D$)(((...a)=>n.guardarTarjeta&&n.guardarTarjeta(...a)),["prevent"]))},[(0,s.Lk)("div",gs,[(0,s.Lk)("div",js,[e[14]||(e[14]=(0,s.Lk)("label",{for:"dni",class:"form-label"},"DNI",-1)),(0,s.bo)((0,s.Lk)("input",{id:"dni",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=a=>r.form.dni=a),type:"number",onKeydown:e[2]||(e[2]=(0,i.jR)((0,i.D$)(((...a)=>n.comprobarPadron&&n.comprobarPadron(...a)),["prevent"]),["enter"]))},null,544),[[i.Jo,r.form.dni]])]),(0,s.Lk)("div",_s,[(0,s.Lk)("button",{class:"btn-mensaje",type:"button",onClick:e[3]||(e[3]=(...a)=>n.comprobarPadron&&n.comprobarPadron(...a))},"Comprobar en padrón")])]),(0,s.Lk)("div",Cs,[(0,s.Lk)("div",ys,[(0,s.Lk)("button",{type:"button",class:"btn-tarjeta",disabled:!a.botonModificacion,onClick:e[4]||(e[4]=e=>{r.habilitarModificacion=!0,a.habilitarImprimir=!0})},"Modificar Datos",8,As)])]),(0,s.Lk)("div",Es,[(0,s.Lk)("div",ws,[e[15]||(e[15]=(0,s.Lk)("label",{for:"num_cuenta",class:"form-label"},"Número de Cuenta",-1)),(0,s.bo)((0,s.Lk)("input",{id:"num_cuenta",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=a=>r.form.num_cuenta=a),type:"text",disabled:!0},null,512),[[i.Jo,r.form.num_cuenta]])]),(0,s.Lk)("div",Ss,[e[16]||(e[16]=(0,s.Lk)("label",{for:"num_tarjeta",class:"form-label"},"Número de Tarjeta",-1)),(0,s.bo)((0,s.Lk)("input",{id:"num_tarjeta",class:"form-control","onUpdate:modelValue":e[6]||(e[6]=a=>r.form.num_tarjeta=a),type:"text",disabled:!0},null,512),[[i.Jo,r.form.num_tarjeta]])])]),(0,s.Lk)("div",Ns,[(0,s.Lk)("div",Is,[e[17]||(e[17]=(0,s.Lk)("label",{for:"fecha_registro",class:"form-label"},"Fecha de Registro",-1)),(0,s.bo)((0,s.Lk)("input",{id:"fecha_registro",class:"form-control","onUpdate:modelValue":e[7]||(e[7]=a=>r.form.fecha_registro=a),type:"date",disabled:!0},null,512),[[i.Jo,r.form.fecha_registro]])]),(0,s.Lk)("div",Fs,[e[18]||(e[18]=(0,s.Lk)("label",{for:"fecha_modificacion",class:"form-label"},"Fecha de Modificación",-1)),(0,s.bo)((0,s.Lk)("input",{id:"fecha_modificacion",class:"form-control","onUpdate:modelValue":e[8]||(e[8]=a=>r.form.fecha_modificacion=a),type:"date",disabled:!0},null,512),[[i.Jo,r.form.fecha_modificacion]])])]),(0,s.Lk)("div",Ds,[(0,s.Lk)("div",xs,[e[20]||(e[20]=(0,s.Lk)("label",{for:"estado",class:"form-label"},"Estado",-1)),(0,s.bo)((0,s.Lk)("select",{id:"estado",class:"form-select","onUpdate:modelValue":e[9]||(e[9]=a=>r.form.estado=a),disabled:!r.habilitarModificacion},e[19]||(e[19]=[(0,s.Fv)('<option disabled value="" data-v-07c2b06a>Seleccione</option><option value="SOLICITADA" data-v-07c2b06a>Solicitada</option><option value="PENDIENTE" data-v-07c2b06a>Pendiente</option><option value="ENTREGADA" data-v-07c2b06a>Entregada</option><option value="BAJA" data-v-07c2b06a>Baja</option>',5)]),8,Us),[[i.u1,r.form.estado]])]),(0,s.Lk)("div",Ms,[e[21]||(e[21]=(0,s.Lk)("label",{for:"importe_acreditado",class:"form-label"},"Importe Acreditado",-1)),(0,s.bo)((0,s.Lk)("input",{id:"importe_acreditado",class:"form-control","onUpdate:modelValue":e[10]||(e[10]=a=>r.form.importe_acreditado=a),type:"number",step:"0.01",disabled:!r.habilitarModificacion},null,8,Xs),[[i.Jo,r.form.importe_acreditado]])])]),(0,s.Lk)("div",Ts,[(0,s.Lk)("div",Ps,[e[22]||(e[22]=(0,s.Lk)("label",{for:"observaciones",class:"form-label"},"Agregar Observación",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"observaciones",class:"form-control","onUpdate:modelValue":e[11]||(e[11]=a=>r.form.observaciones=a),disabled:!r.habilitarModificacion},null,8,Vs),[[i.Jo,r.form.observaciones]])]),r.form.historias.length>0?((0,s.uX)(),(0,s.CE)("div",$s,[e[23]||(e[23]=(0,s.Lk)("label",{for:"historial",class:"form-label"},"Historial",-1)),(0,s.Lk)("div",Js,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.form.historias,((a,e)=>((0,s.uX)(),(0,s.CE)("span",{class:"w-100 block",key:e},[(0,s.Lk)("strong",null,(0,m.v_)(a.fecha),1),(0,s.eW)(" "+(0,m.v_)(a.observaciones),1)])))),128))])])):(0,s.Q3)("",!0)]),e[24]||(e[24]=(0,s.Lk)("div",{class:"fila"},[(0,s.Lk)("button",{type:"button",class:"btn-mensaje btn-imprimir"},"Imprimir"),(0,s.Lk)("button",{type:"submit",class:"btn-mensaje"},"Guardar")],-1))],32)])])}var qs={data(){return{form:{dni:"",num_cuenta:"",num_tarjeta:"",fecha_registro:"",estado:"",fecha_modificacion:"",importe_acreditado:"",observaciones:"",historias:[]},mensajePopup:!1,mensaje:"",cargandoDatos:!1,habilitarModificacion:!1}},methods:{async comprobarPadron(){this.cargandoDatos=!0;try{const{data:a}=await t.A.get("/tarjetas/getDatos",{params:{dni:this.form.dni}});if(a&&Object.keys(a).length>0){for(const e in a)e in this.form&&null!==a[e]&&void 0!==a[e]&&(this.form[e]=a[e]);this.mostrarMensaje("Datos encontrados y cargados.")}else this.mostrarMensaje("No se encontraron datos para ese DNI.")}catch(a){console.error(a),this.mostrarMensaje("Ocurrió un error al consultar el padrón.")}finally{this.botonModificacion=!0,this.cargandoDatos=!1,this.habilitarImprimir=!0}},mostrarMensaje(a){this.mensajePopup=!0,this.mensaje=a},async guardarTarjeta(){const a=new Date,e=a.toISOString().split("T")[0];this.form.fecha_registro||(this.form.fecha_registro=e),this.form.fecha_modificacion=e;try{const{data:a}=await t.A.post("/tarjetas/update",this.form);a.success?this.mostrarMensaje("Tarjeta guardada correctamente."):this.mostrarMensaje("No se pudo guardar la tarjeta.")}catch(o){console.error(o),this.mostrarMensaje("Error al guardar la tarjeta.")}}}};const Ws=(0,U.A)(qs,[["render",Os],["__scopeId","data-v-07c2b06a"]]);var Rs=Ws;const Qs={class:"vista"},Bs={class:"container"},Hs={key:0,class:"pantalla-carga-vista text-center"},zs={key:1,class:"mensaje-container-fondo"},Gs={class:"mensaje-container"},Ks={class:"mensaje"},Ys={class:"filtros"},Zs={class:"fila flex-between"},ar={class:"gap-2"},er={class:"form-label",for:"fechaDesde"},or={class:"form-label",for:"fechaHasta"},tr={class:"form-label",for:"filtroEstado"},ir={class:"seccion"},sr={class:"fila"},rr={class:"seccion"},nr={class:"fila"};function lr(a,e,o,t,r,n){return(0,s.uX)(),(0,s.CE)("div",Qs,[(0,s.Lk)("div",Bs,[r.cargandoDatos?((0,s.uX)(),(0,s.CE)("div",Hs,e[12]||(e[12]=[(0,s.Lk)("div",{class:"logo-carga"},[(0,s.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,s.Lk)("div",{class:"texto-carga"},"Cargando...")],-1)]))):(0,s.Q3)("",!0),r.mensajePopup?((0,s.uX)(),(0,s.CE)("div",zs,[(0,s.Lk)("div",Gs,[(0,s.Lk)("span",Ks,(0,m.v_)(r.mensaje),1),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[0]||(e[0]=a=>{r.mensajePopup=!1,r.mensaje=""})},"Ok")])])):(0,s.Q3)("",!0),e[19]||(e[19]=(0,s.Lk)("h3",{class:"mt-2"},"Generar Informes",-1)),(0,s.Lk)("section",Ys,[(0,s.Lk)("div",Zs,[(0,s.Lk)("span",ar,[(0,s.Lk)("label",er,[e[13]||(e[13]=(0,s.eW)(" Fecha desde: ")),(0,s.bo)((0,s.Lk)("input",{id:"fechaDesde",class:"form-control",type:"date","onUpdate:modelValue":e[1]||(e[1]=a=>r.fechaDesde=a)},null,512),[[i.Jo,r.fechaDesde]])]),(0,s.Lk)("label",or,[e[14]||(e[14]=(0,s.eW)(" Fecha hasta: ")),(0,s.bo)((0,s.Lk)("input",{id:"fechaHasta",class:"form-control",type:"date","onUpdate:modelValue":e[2]||(e[2]=a=>r.fechaHasta=a)},null,512),[[i.Jo,r.fechaHasta]])])]),(0,s.Lk)("label",tr,[e[16]||(e[16]=(0,s.eW)(" Estado tarjeta: ")),(0,s.bo)((0,s.Lk)("select",{id:"filtroEstado",class:"form-select","onUpdate:modelValue":e[3]||(e[3]=a=>r.estadoTarjeta=a)},e[15]||(e[15]=[(0,s.Fv)('<option value="" data-v-015fd334>Todos</option><option value="SOLICITADA" data-v-015fd334>Solicitada</option><option value="PENDIENTE" data-v-015fd334>Pendiente</option><option value="ENTREGADA" data-v-015fd334>Entregada</option><option value="BAJA" data-v-015fd334>Baja</option>',5)]),512),[[i.u1,r.estadoTarjeta]])])])]),(0,s.Lk)("section",ir,[e[17]||(e[17]=(0,s.Lk)("h4",{class:"subtitulo"},"Beneficiarios",-1)),(0,s.Lk)("div",sr,[(0,s.Lk)("button",{class:"btn-opcion",onClick:e[4]||(e[4]=a=>n.generar("beneficiarios","todo"))},"Todo"),(0,s.Lk)("button",{class:"btn-opcion",onClick:e[5]||(e[5]=a=>n.generar("beneficiarios","capital"))},"Capital"),(0,s.Lk)("button",{class:"btn-opcion",onClick:e[6]||(e[6]=a=>n.generar("beneficiarios","banda"))},"Banda"),(0,s.Lk)("button",{class:"btn-opcion",onClick:e[7]||(e[7]=a=>n.generar("beneficiarios","interior"))},"Interior")])]),(0,s.Lk)("section",rr,[e[18]||(e[18]=(0,s.Lk)("h4",{class:"subtitulo"},"Tarjetas Sociales",-1)),(0,s.Lk)("div",nr,[(0,s.Lk)("button",{class:"btn-opcion",onClick:e[8]||(e[8]=a=>n.generar("tarjetas","todo"))},"Todo"),(0,s.Lk)("button",{class:"btn-opcion",onClick:e[9]||(e[9]=a=>n.generar("tarjetas","capital"))},"Capital"),(0,s.Lk)("button",{class:"btn-opcion",onClick:e[10]||(e[10]=a=>n.generar("tarjetas","banda"))},"Banda"),(0,s.Lk)("button",{class:"btn-opcion",onClick:e[11]||(e[11]=a=>n.generar("tarjetas","interior"))},"Interior")])])])])}var cr=o(3230),dr={data(){return{cargandoDatos:!1,mensajePopup:!1,mensaje:"",fechaDesde:"",fechaHasta:"",estadoTarjeta:""}},methods:{async generar(a,e){try{this.cargandoDatos=!0;let o="";"beneficiarios"===a?o=`/informes/beneficiarios/${e}`:"tarjetas"===a&&(o=`/informes/tarjetas/${e}`);const i={};this.fechaDesde&&(i.fecha_desde=this.fechaDesde),this.fechaHasta&&(i.fecha_hasta=this.fechaHasta),this.estadoTarjeta&&"tarjetas"===a&&(i.estado=this.estadoTarjeta);const s=await t.A.get(o,{params:i}),r=s.data;if(!r||0===r.length)return this.mensaje="No hay datos para este informe.",void(this.mensajePopup=!0);this.descargarXLS(a,e,r)}catch(o){console.error(o),this.mensaje="Error al generar el informe.",this.mensajePopup=!0}finally{this.cargandoDatos=!1}},descargarXLS(a,e,o){const t=cr.Wp.json_to_sheet(o),i=cr.Wp.book_new();cr.Wp.book_append_sheet(i,t,"Informe"),cr._h(i,`Informe_${a}_${e}.xlsx`)}}};const ur=(0,U.A)(dr,[["render",lr],["__scopeId","data-v-015fd334"]]);var mr=ur;const pr={class:"vista"},hr={key:0,class:"pantalla-carga-vista"},fr={key:1,class:"mensaje-container-fondo"},br={class:"mensaje-container"},kr={class:"mensaje"},vr={class:"container"},Lr=["href"],gr=["href"],jr=["onClick"];function _r(a,e,o,t,r,n){return(0,s.uX)(),(0,s.CE)("div",pr,[r.cargandoDatos?((0,s.uX)(),(0,s.CE)("div",hr,e[10]||(e[10]=[(0,s.Lk)("div",{class:"logo-carga"},[(0,s.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:""}),(0,s.Lk)("div",{class:"texto-carga"},"Cargando...")],-1)]))):(0,s.Q3)("",!0),r.mensajePopup?((0,s.uX)(),(0,s.CE)("div",fr,[(0,s.Lk)("div",br,[(0,s.Lk)("span",kr,(0,m.v_)(r.mensaje),1),(0,s.Lk)("button",{class:"btn btn-primario",onClick:e[0]||(e[0]=a=>{r.mensajePopup=!1,r.mensaje=""})},"Ok")])])):(0,s.Q3)("",!0),r.form_solicitud?((0,s.uX)(),(0,s.CE)("div",{key:2,class:"form-solicitud-bg",onClick:e[7]||(e[7]=(...a)=>n.resetForm&&n.resetForm(...a))},[(0,s.Lk)("form",{onSubmit:e[5]||(e[5]=(0,i.D$)(((...a)=>n.responderSolicitud&&n.responderSolicitud(...a)),["prevent"])),onClick:e[6]||(e[6]=(0,i.D$)((()=>{}),["stop"])),class:"form-solicitud-container"},[e[12]||(e[12]=(0,s.Lk)("h3",{class:"titulo-form"},"Responder Solicitud",-1)),e[13]||(e[13]=(0,s.Lk)("label",{for:"id"},"ID",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"id","onUpdate:modelValue":e[1]||(e[1]=a=>r.form.id=a),disabled:"",class:"form-control"},null,512),[[i.Jo,r.form.id]]),e[14]||(e[14]=(0,s.Lk)("label",{for:"dni"},"DNI",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"dni","onUpdate:modelValue":e[2]||(e[2]=a=>r.form.dni=a),disabled:"",class:"form-control"},null,512),[[i.Jo,r.form.dni]]),e[15]||(e[15]=(0,s.Lk)("label",{for:"estado",class:"form-label"},"Estado",-1)),(0,s.bo)((0,s.Lk)("select",{id:"estado",class:"form-select","onUpdate:modelValue":e[3]||(e[3]=a=>r.form.estado=a)},e[11]||(e[11]=[(0,s.Fv)('<option disabled value="default" data-v-1796cb22>Seleccione</option><option value="SOLICITADA" data-v-1796cb22>Solicitada</option><option value="PENDIENTE" data-v-1796cb22>Pendiente</option><option value="ENTREGADA" data-v-1796cb22>Entregada</option><option value="BAJA" data-v-1796cb22>Baja</option>',5)]),512),[[i.u1,r.form.estado]]),e[16]||(e[16]=(0,s.Lk)("label",{for:"observacion",class:"form-label"},"Observación",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"observacion",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=a=>r.form.observacion=a)},null,512),[[i.Jo,r.form.observacion]]),e[17]||(e[17]=(0,s.Lk)("button",{class:"btn btn-primario",type:"submit"},"Guardar",-1))],32)])):(0,s.Q3)("",!0),(0,s.Lk)("div",vr,[e[18]||(e[18]=(0,s.Lk)("h3",{class:"titulo-pagina"},"Gestionar Solicitudes",-1)),(0,s.bo)((0,s.Lk)("input",{class:"form-control buscador",type:"number",placeholder:"Buscar por ID o DNI","onUpdate:modelValue":e[8]||(e[8]=a=>r.buscar=a),onChange:e[9]||(e[9]=(...a)=>n.filtrarSolicitudes&&n.filtrarSolicitudes(...a))},null,544),[[i.Jo,r.buscar]]),e[19]||(e[19]=(0,s.Lk)("div",{class:"solicitud-encabezado"},[(0,s.Lk)("span",null,"ID"),(0,s.Lk)("span",null,"DNI"),(0,s.Lk)("span",null,"Fecha"),(0,s.Lk)("span",null,"Foto DNI"),(0,s.Lk)("span",null,"Historial Médico"),(0,s.Lk)("span",null,"Estado"),(0,s.Lk)("span",null,"Acción")],-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.solicitudesFiltradas,((a,e)=>((0,s.uX)(),(0,s.CE)("div",{class:"solicitud-item",key:e},[(0,s.Lk)("span",null,(0,m.v_)(a.id),1),(0,s.Lk)("span",null,(0,m.v_)(a.dni),1),(0,s.Lk)("span",null,(0,m.v_)(n.formatearFecha(a.fecha_solicitud)),1),(0,s.Lk)("a",{class:"btn btn-secundario",href:"https://nazadoto.com:3500/get/descargar?path="+a.path_dni}," Ver ",8,Lr),(0,s.Lk)("a",{class:"btn btn-secundario",href:"https://nazadoto.com:3500/get/descargar?path="+a.path_historial_medico}," Ver ",8,gr),(0,s.Lk)("span",{class:(0,m.C4)(n.estadoClass(a.estado))},(0,m.v_)(a.estado),3),(0,s.Lk)("a",{class:"btn btn-primario",onClick:e=>n.responder(a)},"Responder",8,jr)])))),128))])])}var Cr={data(){return{cargandoDatos:!1,mensajePopup:!1,form_solicitud:!1,form:{id:"",dni:"",estado:"default",observacion:""},mensaje:"",solicitudes:[],buscar:""}},methods:{async responderSolicitud(){this.cargandoDatos=!0;try{await t.A.post("/tarjetas/actualizarSolicitud",{params:{form:this.form}}),this.resetForm(),this.fetchSolicitudes(),this.filtrarSolicitudes()}catch(a){console.log(a)}finally{this.cargandoDatos=!1}},resetForm(){this.form_solicitud=!1,this.form={id:"",dni:"",estado:"default",observacion:""}},responder(a){this.form_solicitud=!0,this.form.id=a.id,this.form.estado=a.estado,this.form.dni=a.dni},async fetchSolicitudes(){this.cargandoDatos=!0;try{const a=await t.A.get("/tarjetas/getSolicitudes");this.solicitudes=a.data[0]}catch(a){console.log(a)}finally{this.cargandoDatos=!1}},formatearFecha(a){return new Date(a).toLocaleDateString("es-AR",{day:"2-digit",month:"2-digit",year:"2-digit"})},filtrarSolicitudes(){const a=this.buscar.toString().toLowerCase();this.solicitudesFiltradas=this.solicitudes.filter((e=>e.id.toString().includes(a)||e.dni.toString().includes(a)))},estadoClass(a){return{"estado-pendiente":"PENDIENTE"===a,"estado-entregada":"ENTREGADA"===a,"estado-baja":"BAJA"===a,"estado-solicitada":"SOLICITADA"===a}}},async mounted(){await this.fetchSolicitudes()},computed:{solicitudesFiltradas(){if(!this.buscar)return this.solicitudes;const a=this.buscar.toString().toLowerCase();return this.solicitudes.filter((e=>e.id.toString().includes(a)||e.dni.toString().includes(a)))}}};const yr=(0,U.A)(Cr,[["render",_r],["__scopeId","data-v-1796cb22"]]);var Ar=yr;const Er={class:"flex-inline"},wr={key:0,class:"pantalla-carga text-center"};function Sr(a,e,o,t,i,r){const n=(0,s.g2)("SidebarAdminComponent"),l=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",Er,[i.cargando?((0,s.uX)(),(0,s.CE)("div",wr,e[0]||(e[0]=[(0,s.Lk)("div",{class:"logo-carga"},[(0,s.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:"Logo"}),(0,s.Lk)("div",{class:"texto-carga c-black"},"Cargando...")],-1)]))):(0,s.Q3)("",!0),(0,s.bF)(n),(0,s.bF)(l,{class:"vista"})])}const Nr={key:0,class:"mensaje-container-fondo"},Ir={class:"mensaje-container"},Fr={class:"modal-botones"},Dr={class:"contenedor"},xr={class:"contenedor-botones"};function Ur(a,e,o,t,i,r){const n=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",null,[i.mostrarModal?((0,s.uX)(),(0,s.CE)("div",Nr,[(0,s.Lk)("div",Ir,[e[3]||(e[3]=(0,s.Lk)("span",{class:"mensaje"},"¿Cerrar sesión?",-1)),(0,s.Lk)("div",Fr,[(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[0]||(e[0]=a=>this.mostrarModal=!1)},"No"),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[1]||(e[1]=(...a)=>r.cerrarSesion&&r.cerrarSesion(...a))},"Si")])])])):(0,s.Q3)("",!0),(0,s.Lk)("div",Dr,[(0,s.Lk)("div",xr,[e[8]||(e[8]=(0,s.Lk)("a",{href:"/admin",class:"sidebar-header"},[(0,s.Lk)("img",{src:"/recursos/logomds.png",class:"mv-auto img-logo",alt:""}),(0,s.Lk)("h4",{class:"white text-center"},[(0,s.eW)("Tarjetas"),(0,s.Lk)("br"),(0,s.eW)("Sociales")])],-1)),e[9]||(e[9]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",null,[(0,s.bF)(n,{class:(0,m.C4)(["item-btn",{active:"/admin"==a.$route.path}]),to:"/admin"},{default:(0,s.k6)((()=>e[4]||(e[4]=[(0,s.eW)("Inicio")]))),_:1},8,["class"])]),(0,s.Lk)("div",null,[(0,s.bF)(n,{class:(0,m.C4)(["item-btn",{active:"/admin/usuarios"===a.$route.path}]),to:"/admin/usuarios"},{default:(0,s.k6)((()=>e[5]||(e[5]=[(0,s.eW)("Usuarios")]))),_:1},8,["class"])]),(0,s.Lk)("div",null,[(0,s.bF)(n,{class:(0,m.C4)(["item-btn",{active:"/admin/noticias"===a.$route.path}]),to:"/admin/noticias"},{default:(0,s.k6)((()=>e[6]||(e[6]=[(0,s.eW)("Noticias")]))),_:1},8,["class"])]),(0,s.Lk)("div",null,[(0,s.bF)(n,{class:(0,m.C4)(["item-btn",{active:"/admin/logs"===a.$route.path}]),to:"/admin/logs"},{default:(0,s.k6)((()=>e[7]||(e[7]=[(0,s.eW)("Logs")]))),_:1},8,["class"])]),(0,s.Lk)("button",{class:"item-btn mt-4",onClick:e[2]||(e[2]=(...a)=>r.cerrarSesionModal&&r.cerrarSesionModal(...a))},"Cerrar Sesión")])])])}var Mr={data(){return{mostrarModal:!1}},methods:{cerrarSesionModal(){this.mostrarModal=!0},cerrarSesion(){this.mostrarModal=!1,localStorage.clear(),aa.emit("usuarioDeslogueado"),vl.push("/")}}};const Xr=(0,U.A)(Mr,[["render",Ur],["__scopeId","data-v-6049466e"]]);var Tr=Xr,Pr={components:{SidebarAdminComponent:Tr},data(){return{cargando:!1}}};const Vr=(0,U.A)(Pr,[["render",Sr],["__scopeId","data-v-576b0938"]]);var $r=Vr;const Jr={class:"vista"},Or={class:"container"},qr={class:"inline-flex"},Wr={class:"mt-2"},Rr={class:"tarjetas-inicio"},Qr={key:0,class:"modal-fondo"},Br={class:"modal-contenido"},Hr={key:0,class:"error"},zr={class:"modal-actions"};function Gr(a,e,o,t,r,n){return(0,s.uX)(),(0,s.CE)("div",Jr,[(0,s.Lk)("div",Or,[(0,s.Lk)("span",qr,[(0,s.Lk)("h3",Wr,"Bienvenid@, "+(0,m.v_)(r.usuario.usuario?.toUpperCase()),1),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[0]||(e[0]=a=>r.abrirModal=!0)},"Cambiar contraseña")]),e[12]||(e[12]=(0,s.Lk)("p",{class:"lead"},"Desde aquí podés acceder a las principales funciones de gestión del sistema.",-1)),(0,s.Lk)("div",Rr,[(0,s.Lk)("div",{class:"card acceso",onClick:e[1]||(e[1]=e=>a.$router.push("/admin/usuarios"))},e[9]||(e[9]=[(0,s.Lk)("h5",null,"Gestionar Usuarios",-1),(0,s.Lk)("p",null,"Ver y modificar la información de los usuarios.",-1)])),(0,s.Lk)("div",{class:"card acceso",onClick:e[2]||(e[2]=e=>a.$router.push("/admin/noticias"))},e[10]||(e[10]=[(0,s.Lk)("h5",null,"Gestionar Noticias",-1),(0,s.Lk)("p",null,"Subir y modificar noticias.",-1)])),(0,s.Lk)("div",{class:"card acceso",onClick:e[3]||(e[3]=e=>a.$router.push("/admin/logs"))},e[11]||(e[11]=[(0,s.Lk)("h5",null,"Auditoría",-1),(0,s.Lk)("p",null,"Ver el registro de acciones de los usuarios.",-1)]))])]),r.abrirModal?((0,s.uX)(),(0,s.CE)("div",Qr,[(0,s.Lk)("div",Br,[e[13]||(e[13]=(0,s.Lk)("h3",null,"Cambiar contraseña",-1)),(0,s.bo)((0,s.Lk)("input",{class:"form-control","onUpdate:modelValue":e[4]||(e[4]=a=>r.form.contraseñaActual=a),type:"password",placeholder:"Contraseña actual"},null,512),[[i.Jo,r.form.contraseñaActual]]),(0,s.bo)((0,s.Lk)("input",{class:"form-control","onUpdate:modelValue":e[5]||(e[5]=a=>r.form.contraseñaNueva=a),type:"password",placeholder:"Nueva contraseña"},null,512),[[i.Jo,r.form.contraseñaNueva]]),(0,s.bo)((0,s.Lk)("input",{class:"form-control","onUpdate:modelValue":e[6]||(e[6]=a=>r.form.repetirContraseña=a),type:"password",placeholder:"Repetir nueva contraseña"},null,512),[[i.Jo,r.form.repetirContraseña]]),r.error?((0,s.uX)(),(0,s.CE)("p",Hr,(0,m.v_)(r.error),1)):(0,s.Q3)("",!0),(0,s.Lk)("div",zr,[(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[7]||(e[7]=(...a)=>n.cambiarContraseña&&n.cambiarContraseña(...a))},"Guardar"),(0,s.Lk)("button",{class:"btn",onClick:e[8]||(e[8]=a=>r.abrirModal=!1)},"Cancelar")])])])):(0,s.Q3)("",!0)])}var Kr={data(){return{usuario:"",abrirModal:!1,error:"",form:{"contraseñaActual":"","contraseñaNueva":"","repetirContraseña":""}}},props:{tieneTarjeta:{type:String,default:null}},methods:{async"cambiarContraseña"(){if(this.error="",this.form.contraseñaNueva===this.form.repetirContraseña)try{await t.A.post("/auth/cambiarContrasena",{usuario:this.usuario.usuario,"contraseñaActual":this.form.contraseñaActual,"contraseñaNueva":this.form.contraseñaNueva}),alert("Contraseña cambiada correctamente."),this.abrirModal=!1,this.form={"contraseñaActual":"","contraseñaNueva":"","repetirContraseña":""}}catch(a){this.error=a.response?.data?.message||"Error al cambiar la contraseña."}else this.error="Las contraseñas nuevas no coinciden."}},mounted(){this.usuario=JSON.parse(localStorage.getItem("user"))}};const Yr=(0,U.A)(Kr,[["render",Gr],["__scopeId","data-v-6ae3116a"]]);var Zr=Yr;const an={class:"vista"},en={key:0,class:"pantalla-carga text-center"},on={key:1,class:"mensaje-container-fondo"},tn={class:"mensaje-container"},sn={class:"mensaje"},rn={class:"container"},nn={class:"tabla-usuarios"},ln=["onUpdate:modelValue"],cn=["onUpdate:modelValue"],dn=["onUpdate:modelValue"],un=["onUpdate:modelValue"],mn=["onClick"];function pn(a,e,o,t,r,n){return(0,s.uX)(),(0,s.CE)("div",an,[r.cargando?((0,s.uX)(),(0,s.CE)("div",en,e[1]||(e[1]=[(0,s.Lk)("div",{class:"logo-carga"},[(0,s.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:"Logo"}),(0,s.Lk)("div",{class:"texto-carga"},"Cargando...")],-1)]))):(0,s.Q3)("",!0),r.mensajePopup?((0,s.uX)(),(0,s.CE)("div",on,[(0,s.Lk)("div",tn,[(0,s.Lk)("span",sn,(0,m.v_)(r.mensaje),1),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[0]||(e[0]=a=>{r.mensajePopup=!1,r.mensaje=""})}," Ok ")])])):(0,s.Q3)("",!0),(0,s.Lk)("div",rn,[e[4]||(e[4]=(0,s.Lk)("h3",{class:"mt-2"},"Gestión de Usuarios",-1)),(0,s.Lk)("table",nn,[e[3]||(e[3]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"ID"),(0,s.Lk)("th",null,"Usuario"),(0,s.Lk)("th",null,"Correo"),(0,s.Lk)("th",null,"DNI"),(0,s.Lk)("th",null,"Rol"),(0,s.Lk)("th",null,"Fecha Registro"),(0,s.Lk)("th",null,"Acciones")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.usuarios,(a=>((0,s.uX)(),(0,s.CE)("tr",{key:a.id},[(0,s.Lk)("td",null,(0,m.v_)(a.id),1),(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e=>a.usuario=e,class:"input-tabla"},null,8,ln),[[i.Jo,a.usuario]])]),(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e=>a.correo=e,class:"input-tabla"},null,8,cn),[[i.Jo,a.correo]])]),(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e=>a.dni=e,class:"input-tabla"},null,8,dn),[[i.Jo,a.dni]])]),(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":e=>a.rol=e,class:"input-tabla"},e[2]||(e[2]=[(0,s.Lk)("option",{value:"0"},"Beneficiario",-1),(0,s.Lk)("option",{value:"1"},"Empleado",-1),(0,s.Lk)("option",{value:"2"},"Administrador",-1)]),8,un),[[i.u1,a.rol]])]),(0,s.Lk)("td",null,(0,m.v_)(n.formatearFecha(a.fecha_registro)),1),(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"btn-guardar",onClick:e=>n.guardarUsuario(a)}," Guardar ",8,mn)])])))),128))])])])])}var hn={data(){return{cargando:!1,mensajePopup:!1,mensaje:"",usuarios:[]}},methods:{formatearFecha(a){return new Date(a).toLocaleDateString("es-AR",{day:"2-digit",month:"2-digit",year:"2-digit"})},async fetchUsuarios(){this.cargando=!0;try{const a=await t.A.get("/get/usuarios");this.usuarios=a.data[0]}catch(a){this.mensaje="Error al cargar usuarios."+a,this.mensajePopup=!0}finally{this.cargando=!1}},async guardarUsuario(a){this.cargando=!0;try{await t.A.post("/beneficiarios/updateUsuario",{usuario:a}),this.mensaje="Usuario actualizado correctamente.",this.mensajePopup=!0}catch(e){this.mensaje="Error al actualizar usuario.",this.mensajePopup=!0}finally{this.cargando=!1}}},mounted(){this.fetchUsuarios()}};const fn=(0,U.A)(hn,[["render",pn],["__scopeId","data-v-5bc688ec"]]);var bn=fn;const kn={class:"vista"},vn={key:0,class:"pantalla-carga text-center"},Ln={key:1,class:"mensaje-container-fondo"},gn={class:"mensaje-container"},jn={class:"mensaje"},_n={class:"container"},Cn={class:"tabla-usuarios"},yn=["onUpdate:modelValue"],An=["onUpdate:modelValue"],En=["onChange"],wn=["src"],Sn=["onClick"],Nn=["onClick"],In={key:2,class:"modal-fondo"},Fn={class:"modal-contenido"},Dn={class:"mt-2"};function xn(a,e,o,t,r,n){return(0,s.uX)(),(0,s.CE)("div",kn,[r.cargando?((0,s.uX)(),(0,s.CE)("div",vn,e[7]||(e[7]=[(0,s.Lk)("div",{class:"logo-carga"},[(0,s.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:"Logo"}),(0,s.Lk)("div",{class:"texto-carga"},"Cargando...")],-1)]))):(0,s.Q3)("",!0),r.mensajePopup?((0,s.uX)(),(0,s.CE)("div",Ln,[(0,s.Lk)("div",gn,[(0,s.Lk)("span",jn,(0,m.v_)(r.mensaje),1),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[0]||(e[0]=a=>{r.mensajePopup=!1,r.mensaje=""})}," Ok ")])])):(0,s.Q3)("",!0),(0,s.Lk)("div",_n,[e[9]||(e[9]=(0,s.Lk)("h3",{class:"mt-2"},"Gestión de Noticias",-1)),(0,s.Lk)("button",{class:"btn-agregar",onClick:e[1]||(e[1]=(...a)=>n.abrirAgregar&&n.abrirAgregar(...a))},"Agregar Noticia"),(0,s.Lk)("table",Cn,[e[8]||(e[8]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"ID"),(0,s.Lk)("th",null,"Título"),(0,s.Lk)("th",null,"Contenido"),(0,s.Lk)("th",null,"Imagen"),(0,s.Lk)("th",null,"Fecha"),(0,s.Lk)("th",null,"Acciones")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.noticias,(a=>((0,s.uX)(),(0,s.CE)("tr",{key:a.id},[(0,s.Lk)("td",null,(0,m.v_)(a.id),1),(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e=>a.titulo=e,class:"input-tabla"},null,8,yn),[[i.Jo,a.titulo]])]),(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e=>a.contenido=e,class:"input-tabla"},null,8,An),[[i.Jo,a.contenido]])]),(0,s.Lk)("td",null,[(0,s.Lk)("input",{type:"file",onChange:e=>n.onFileChange(e,a)},null,40,En),a.imagen?((0,s.uX)(),(0,s.CE)("img",{key:0,src:a.imagen,width:"50",alt:"Imagen"},null,8,wn)):(0,s.Q3)("",!0)]),(0,s.Lk)("td",null,(0,m.v_)(n.formatearFecha(a.fecha)),1),(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"btn-guardar",onClick:e=>n.editarNoticia(a)},"Guardar",8,Sn),(0,s.Lk)("button",{class:"btn-eliminar",onClick:e=>n.eliminarNoticia(a.id)},"Eliminar",8,Nn)])])))),128))])])]),r.mostrarAgregar?((0,s.uX)(),(0,s.CE)("div",In,[(0,s.Lk)("div",Fn,[e[10]||(e[10]=(0,s.Lk)("h4",null,"Agregar Noticia",-1)),(0,s.bo)((0,s.Lk)("input",{id:"titulo","onUpdate:modelValue":e[2]||(e[2]=a=>r.nuevaNoticia.titulo=a),placeholder:"Título",class:"input-tabla"},null,512),[[i.Jo,r.nuevaNoticia.titulo]]),(0,s.bo)((0,s.Lk)("textarea",{id:"contenido","onUpdate:modelValue":e[3]||(e[3]=a=>r.nuevaNoticia.contenido=a),placeholder:"Contenido",class:"input-tabla"},null,512),[[i.Jo,r.nuevaNoticia.contenido]]),(0,s.Lk)("input",{id:"imagen",type:"file",onChange:e[4]||(e[4]=a=>n.onFileChangeNueva(a)),accept:".jpg, .png, .jpeg"},null,32),(0,s.Lk)("div",Dn,[(0,s.Lk)("button",{class:"btn-guardar",onClick:e[5]||(e[5]=(...a)=>n.agregarNoticia&&n.agregarNoticia(...a))},"Agregar"),(0,s.Lk)("button",{class:"btn",onClick:e[6]||(e[6]=(...a)=>n.cerrarAgregar&&n.cerrarAgregar(...a))},"Cancelar")])])])):(0,s.Q3)("",!0)])}var Un={data(){return{cargando:!1,mensajePopup:!1,mensaje:"",noticias:[],nuevaNoticia:{titulo:"",contenido:"",imagen:null},mostrarAgregar:!1}},methods:{formatearFecha(a){return new Date(a).toLocaleDateString("es-AR",{day:"2-digit",month:"2-digit",year:"2-digit"})},async fetchNoticias(){this.cargando=!0;try{const a=await t.A.get("/noticias/get");this.noticias=a.data[0]}catch(a){this.mensaje="Error al cargar noticias."+a,this.mensajePopup=!0}finally{this.cargando=!1}},onFileChange(a,e){e.imagenFile=a.target.files[0]},onFileChangeNueva(a){this.nuevaNoticia.imagenFile=a.target.files[0]},abrirAgregar(){this.mostrarAgregar=!0},cerrarAgregar(){this.mostrarAgregar=!1,this.nuevaNoticia={titulo:"",contenido:"",imagen:null}},async agregarNoticia(){this.cargando=!0,this.cerrarAgregar();try{const a=new FormData;a.append("titulo",this.nuevaNoticia.titulo),a.append("contenido",this.nuevaNoticia.contenido),this.nuevaNoticia.imagenFile&&a.append("imagen",this.nuevaNoticia.imagenFile),await t.A.post("/noticias/agregar",a,{headers:{"Content-Type":"multipart/form-data"}}),this.mensaje="Noticia agregada correctamente.",this.mensajePopup=!0,this.fetchNoticias()}catch(a){this.mensaje="Error al agregar noticia."+a,this.mensajePopup=!0}finally{this.cargando=!1}},async editarNoticia(a){try{const e=new FormData;e.append("id",a.id),e.append("titulo",a.titulo),e.append("contenido",a.contenido),a.imagenFile&&e.append("imagen",a.imagenFile),await t.A.post("/noticias/editar",e,{headers:{"Content-Type":"multipart/form-data"}}),this.mensaje="Noticia actualizada correctamente.",this.mensajePopup=!0,this.fetchNoticias()}catch(e){this.mensaje="Error al editar noticia."+e,this.mensajePopup=!0}},async eliminarNoticia(a){try{await t.A.post("/noticias/eliminar",{id:a}),this.mensaje="Noticia eliminada correctamente.",this.mensajePopup=!0,this.fetchNoticias()}catch(e){this.mensaje="Error al eliminar noticia."+e,this.mensajePopup=!0}}},mounted(){this.fetchNoticias()}};const Mn=(0,U.A)(Un,[["render",xn],["__scopeId","data-v-2bebdc0c"]]);var Xn=Mn;const Tn={class:"vista"},Pn={class:"container"},Vn={class:"filtros"},$n={class:"g-2"},Jn={class:"form-label",for:"fechaDesde"},On={class:"form-label",for:"fechaHasta"},qn={class:"form-label",for:"filtroUsuario"},Wn={class:"form-label",for:"actividad"},Rn={class:"tabla-container"},Qn={class:"tabla"};function Bn(a,e,o,t,r,n){return(0,s.uX)(),(0,s.CE)("div",Tn,[(0,s.Lk)("div",Pn,[e[12]||(e[12]=(0,s.Lk)("h3",{class:"mt-2"},"Registro de actividades",-1)),(0,s.Lk)("section",Vn,[(0,s.Lk)("div",$n,[(0,s.Lk)("label",Jn,[e[6]||(e[6]=(0,s.eW)(" Fecha desde: ")),(0,s.bo)((0,s.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=a=>r.fechaDesde=a),id:"fechaDesde"},null,512),[[i.Jo,r.fechaDesde]])]),(0,s.Lk)("label",On,[e[7]||(e[7]=(0,s.eW)(" Fecha hasta: ")),(0,s.bo)((0,s.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=a=>r.fechaHasta=a),id:"fechaHasta"},null,512),[[i.Jo,r.fechaHasta]])]),(0,s.Lk)("label",qn,[e[8]||(e[8]=(0,s.eW)(" Usuario: ")),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>r.usuario=a),placeholder:"Usuario",id:"filtroUsuario"},null,512),[[i.Jo,r.usuario]])]),(0,s.Lk)("label",Wn,[e[10]||(e[10]=(0,s.eW)(" Tipo de actividad: ")),(0,s.bo)((0,s.Lk)("select",{class:"form-select","onUpdate:modelValue":e[3]||(e[3]=a=>r.actividad=a),id:"actividad"},e[9]||(e[9]=[(0,s.Fv)('<option value="" data-v-485c6411>Todas</option><option value="LOGIN" data-v-485c6411>Login</option><option value="CREAR" data-v-485c6411>Crear</option><option value="ACTUALIZAR" data-v-485c6411>Actualizar</option><option value="ELIMINAR" data-v-485c6411>Eliminar</option><option value="EXPORTAR" data-v-485c6411>Exportar</option>',6)]),512),[[i.u1,r.actividad]])]),(0,s.Lk)("button",{class:"btn-opcion",onClick:e[4]||(e[4]=(...a)=>n.cargarLogs&&n.cargarLogs(...a))},"Aplicar")]),(0,s.Lk)("button",{class:"btn-opcion",onClick:e[5]||(e[5]=(...a)=>n.exportarExcel&&n.exportarExcel(...a))},"Exportar Excel")]),(0,s.Lk)("div",Rn,[(0,s.Lk)("table",Qn,[e[11]||(e[11]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"ID"),(0,s.Lk)("th",null,"Usuario"),(0,s.Lk)("th",null,"Actividad"),(0,s.Lk)("th",null,"Detalles"),(0,s.Lk)("th",null,"IP"),(0,s.Lk)("th",null,"User Agent"),(0,s.Lk)("th",null,"Fecha")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.logs,(a=>((0,s.uX)(),(0,s.CE)("tr",{key:a.id},[(0,s.Lk)("td",null,(0,m.v_)(a.id),1),(0,s.Lk)("td",null,(0,m.v_)(a.usuario),1),(0,s.Lk)("td",null,(0,m.v_)(a.actividad),1),(0,s.Lk)("td",null,(0,m.v_)(a.detalles),1),(0,s.Lk)("td",null,(0,m.v_)(a.ip),1),(0,s.Lk)("td",null,(0,m.v_)(a.user_agent),1),(0,s.Lk)("td",null,(0,m.v_)(n.formatearFecha(a.fecha)),1)])))),128))])])])])])}var Hn={data(){return{logs:[],fechaDesde:"",fechaHasta:"",usuario:"",actividad:""}},methods:{formatearFecha(a){const e=new Date(a),o=String(e.getDate()).padStart(2,"0"),t=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getFullYear()).slice(-2),s=String(e.getHours()).padStart(2,"0"),r=String(e.getMinutes()).padStart(2,"0");return`${o}/${t}/${i} - ${s}:${r}`},async cargarLogs(){try{const a={};this.fechaDesde&&(a.fecha_desde=this.fechaDesde),this.fechaHasta&&(a.fecha_hasta=this.fechaHasta),this.usuario&&(a.usuario=this.usuario),this.actividad&&(a.actividad=this.actividad);const e=await t.A.get("/get/logs",{params:a});this.logs=e.data}catch(a){console.error("Error al cargar logs:",a)}},exportarExcel(){if(!this.logs.length)return;const a=cr.Wp.json_to_sheet(this.logs),e=cr.Wp.book_new();cr.Wp.book_append_sheet(e,a,"Logs"),cr._h(e,"Logs.xlsx")}},mounted(){this.cargarLogs()}};const zn=(0,U.A)(Hn,[["render",Bn],["__scopeId","data-v-485c6411"]]);var Gn=zn;const Kn={class:"ancho-pag"},Yn={key:0,class:"pantalla-carga text-center"},Zn={key:1,class:"mensaje-container-fondo"},al={class:"mensaje-container"},el={class:"mensaje"},ol={key:2,class:"contenido-noticia container"},tl={class:"noticia-principal"},il={class:"titulo-noticia"},sl=["src"],rl={class:"fecha-texto"},nl={class:"contenido-texto"},ll={class:"noticias-laterales"},cl={class:"lista-noticias mt-2"},dl=["src"];function ul(a,e,o,t,i,r){const n=(0,s.g2)("router-link"),l=(0,s.g2)("pie-component");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("div",Kn,[i.cargando?((0,s.uX)(),(0,s.CE)("div",Yn,e[1]||(e[1]=[(0,s.Lk)("div",{class:"logo-carga"},[(0,s.Lk)("img",{class:"logo-img",src:"/favicon.ico",width:"50",alt:"Logo"}),(0,s.Lk)("div",{class:"texto-carga"},"Cargando noticia...")],-1)]))):(0,s.Q3)("",!0),i.mensajePopup?((0,s.uX)(),(0,s.CE)("div",Zn,[(0,s.Lk)("div",al,[(0,s.Lk)("span",el,(0,m.v_)(i.mensaje),1),(0,s.Lk)("button",{class:"btn-mensaje",onClick:e[0]||(e[0]=a=>{i.mensajePopup=!1,i.mensaje=""})}," Ok ")])])):(0,s.Q3)("",!0),i.cargando?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",ol,[(0,s.Lk)("main",tl,[(0,s.Lk)("h2",il,(0,m.v_)(i.noticia.titulo),1),i.noticia.imagen?((0,s.uX)(),(0,s.CE)("img",{key:0,src:"https://nazadoto.com:3500"+i.noticia.imagen,alt:"",class:"imagen-noticia"},null,8,sl)):(0,s.Q3)("",!0),(0,s.Lk)("p",rl,(0,m.v_)(r.formatearFecha(i.noticia.fecha)),1),(0,s.Lk)("p",nl,(0,m.v_)(i.noticia.contenido),1)]),(0,s.Lk)("aside",ll,[(0,s.Lk)("div",cl,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.otrasNoticias,(a=>((0,s.uX)(),(0,s.Wv)(n,{key:a.id,to:"/noticia/"+a.id,class:"noticia-lateral"},{default:(0,s.k6)((()=>[a.imagen?((0,s.uX)(),(0,s.CE)("img",{key:0,src:"https://nazadoto.com:3500"+a.imagen,alt:"",class:"noticia-imagen-lateral"},null,8,dl)):(0,s.Q3)("",!0),(0,s.Lk)("span",null,(0,m.v_)(a.titulo),1)])),_:2},1032,["to"])))),128))])])]))]),(0,s.bF)(l)])}var ml={components:{PieComponent:X},data(){return{noticia:{},otrasNoticias:[],cargando:!1,mensajePopup:!1,mensaje:"",id:this.$route.params.id}},methods:{formatearFecha(a){return new Date(a).toLocaleDateString("es-AR",{day:"2-digit",month:"2-digit",year:"2-digit"})},async fetchNoticia(){this.noticia={},this.otrasNoticias=[],this.cargando=!0;try{const a=await t.A.get(`/noticias/getNoticia/${this.id}`);this.noticia=a.data;const e=await t.A.get("/noticias/get");this.otrasNoticias=e.data[0].filter((a=>a.id!==this.noticia.id))}catch(a){this.mensaje="Error al cargar la noticia.",this.mensajePopup=!0}finally{this.cargando=!1}}},watch:{"$route.params.id"(a){this.id=a,this.fetchNoticia()}},mounted(){this.fetchNoticia()}};const pl=(0,U.A)(ml,[["render",ul],["__scopeId","data-v-20ba2a2e"]]);var hl=pl;function fl(){const a=JSON.parse(localStorage.getItem("user"));return a}const bl=[{path:"/",component:V,meta:{requiresAuth:!1}},{path:"/login",component:ta},{path:"/registrar",component:_a,meta:{requiresAuth:!1}},{path:"/requisitos",component:Sa,meta:{requiresAuth:!1}},{path:"/admin",component:$r,meta:{requiresAuth:!0,role:2},children:[{path:"",component:Zr,meta:{requiresAuth:!0,role:2}},{path:"usuarios",component:bn,meta:{requiresAuth:!0,role:2}},{path:"noticias",component:Xn,meta:{requiresAuth:!0,role:2}},{path:"logs",component:Gn,meta:{requiresAuth:!0,role:2}}]},{path:"/empleado",component:Go,meta:{requiresAuth:!0,role:1},children:[{path:"",component:ct,meta:{requiresAuth:!0,role:1}},{path:"beneficiarios",component:ps,meta:{requiresAuth:!0,role:1}},{path:"tarjetas",component:Rs,meta:{requiresAuth:!0,role:1}},{path:"solicitudes",component:Ar,meta:{requiresAuth:!0,role:1}},{path:"informes",component:mr,meta:{requiresAuth:!0,role:1}}]},{path:"/beneficiario",component:Ra,meta:{requiresAuth:!0,role:0},children:[{path:"",component:ie,meta:{requiresAuth:!0,role:0}},{path:"solicitud",component:Mo,meta:{requiresAuth:!0,role:0}},{path:"tarjeta",component:De,meta:{requiresAuth:!0,role:0}}]},{path:"/noticia/:id",component:hl,props:!0,meta:{requiresAuth:!1}},{path:"/:catchAll(.*)",redirect:"/"}],kl=(0,u.aE)({history:(0,u.LA)(),routes:bl,linkActiveClass:"active",linkExactActiveClass:"active"});kl.beforeEach(((a,e,o)=>{const t=fl();if("/login"===a.path&&t)switch(t.rol){case 0:return o("/beneficiario");case 1:return o("/empleado");case 2:return o("/admin");default:return o()}if(a.meta.requiresAuth){if(!t)return o("/login");if(void 0!==a.meta.role&&a.meta.role!==t.rol)return o("/login")}return o()}));var vl=kl,Ll={data(){return{usuario:null,logueado:!1}},mounted(){this.obtenerUsuario(),aa.on("usuarioLogueado",this.obtenerUsuario),aa.on("usuarioDeslogueado",this.obtenerUsuario),console.log("Se carga navbarpublico")},unmounted(){aa.off("usuarioLogueado",this.obtenerUsuario),aa.off("usuarioDeslogueado",this.obtenerUsuario)},methods:{obtenerUsuario(){this.usuario=JSON.parse(localStorage.getItem("user")),this.logueado=null!=this.usuario},redireccionarInicio(){switch(console.log(this.usuario),this.usuario.rol){case 0:vl.push("/beneficiario");break;case 1:vl.push("/empleado");break;case 2:vl.push("/admin");break}}}};const gl=(0,U.A)(Ll,[["render",d],["__scopeId","data-v-54103bd2"]]);var jl=gl,_l={name:"App",components:{NavbarPublicoComponent:jl}};const Cl=(0,U.A)(_l,[["render",n]]);var yl=Cl;const Al="prod";t.A.defaults.baseURL="dev"==Al?"http://192.168.1.182:3500":"https://nazadoto.com:3500";const El=(0,i.Ef)(yl);El.use(vl),El.mount("#app")}},e={};function o(t){var i=e[t];if(void 0!==i)return i.exports;var s=e[t]={exports:{}};return a[t].call(s.exports,s,s.exports,o),s.exports}o.m=a,function(){var a=[];o.O=function(e,t,i,s){if(!t){var r=1/0;for(d=0;d<a.length;d++){t=a[d][0],i=a[d][1],s=a[d][2];for(var n=!0,l=0;l<t.length;l++)(!1&s||r>=s)&&Object.keys(o.O).every((function(a){return o.O[a](t[l])}))?t.splice(l--,1):(n=!1,s<r&&(r=s));if(n){a.splice(d--,1);var c=i();void 0!==c&&(e=c)}}return e}s=s||0;for(var d=a.length;d>0&&a[d-1][2]>s;d--)a[d]=a[d-1];a[d]=[t,i,s]}}(),function(){o.n=function(a){var e=a&&a.__esModule?function(){return a["default"]}:function(){return a};return o.d(e,{a:e}),e}}(),function(){var a,e=Object.getPrototypeOf?function(a){return Object.getPrototypeOf(a)}:function(a){return a.__proto__};o.t=function(t,i){if(1&i&&(t=this(t)),8&i)return t;if("object"===typeof t&&t){if(4&i&&t.__esModule)return t;if(16&i&&"function"===typeof t.then)return t}var s=Object.create(null);o.r(s);var r={};a=a||[null,e({}),e([]),e(e)];for(var n=2&i&&t;"object"==typeof n&&!~a.indexOf(n);n=e(n))Object.getOwnPropertyNames(n).forEach((function(a){r[a]=function(){return t[a]}}));return r["default"]=function(){return t},o.d(s,r),s}}(),function(){o.d=function(a,e){for(var t in e)o.o(e,t)&&!o.o(a,t)&&Object.defineProperty(a,t,{enumerable:!0,get:e[t]})}}(),function(){o.f={},o.e=function(a){return Promise.all(Object.keys(o.f).reduce((function(e,t){return o.f[t](a,e),e}),[]))}}(),function(){o.u=function(a){return"js/"+a+"."+{125:"89219218",353:"3f087b68",427:"d5d9d70d"}[a]+".js"}}(),function(){o.miniCssF=function(a){}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(a){if("object"===typeof window)return window}}()}(),function(){o.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)}}(),function(){var a={},e="sgts-web:";o.l=function(t,i,s,r){if(a[t])a[t].push(i);else{var n,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==t||u.getAttribute("data-webpack")==e+s){n=u;break}}n||(l=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,o.nc&&n.setAttribute("nonce",o.nc),n.setAttribute("data-webpack",e+s),n.src=t),a[t]=[i];var m=function(e,o){n.onerror=n.onload=null,clearTimeout(p);var i=a[t];if(delete a[t],n.parentNode&&n.parentNode.removeChild(n),i&&i.forEach((function(a){return a(o)})),e)return e(o)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=m.bind(null,n.onerror),n.onload=m.bind(null,n.onload),l&&document.head.appendChild(n)}}}(),function(){o.r=function(a){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})}}(),function(){o.p="/"}(),function(){var a={524:0};o.f.j=function(e,t){var i=o.o(a,e)?a[e]:void 0;if(0!==i)if(i)t.push(i[2]);else{var s=new Promise((function(o,t){i=a[e]=[o,t]}));t.push(i[2]=s);var r=o.p+o.u(e),n=new Error,l=function(t){if(o.o(a,e)&&(i=a[e],0!==i&&(a[e]=void 0),i)){var s=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;n.message="Loading chunk "+e+" failed.\n("+s+": "+r+")",n.name="ChunkLoadError",n.type=s,n.request=r,i[1](n)}};o.l(r,l,"chunk-"+e,e)}},o.O.j=function(e){return 0===a[e]};var e=function(e,t){var i,s,r=t[0],n=t[1],l=t[2],c=0;if(r.some((function(e){return 0!==a[e]}))){for(i in n)o.o(n,i)&&(o.m[i]=n[i]);if(l)var d=l(o)}for(e&&e(t);c<r.length;c++)s=r[c],o.o(a,s)&&a[s]&&a[s][0](),a[s]=0;return o.O(d)},t=self["webpackChunksgts_web"]=self["webpackChunksgts_web"]||[];t.forEach(e.bind(null,0)),t.push=e.bind(null,t.push.bind(t))}();var t=o.O(void 0,[504],(function(){return o(5717)}));t=o.O(t)})();
//# sourceMappingURL=app.839c7299.js.map